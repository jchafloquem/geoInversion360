import{a as Mt}from"./chunk-RUWSKLE4.js";import{c as jt,e as $,f as tt,g as I,h as At,i as Tt,j as zt}from"./chunk-AC7AQWXQ.js";import{a as m,b as Nt}from"./chunk-2EA2KAER.js";import{a as wt,b as p,c as bt,d as U,e as P,h as X,i as xt,j as H,k as Rt,l as vt,n as F,p as K}from"./chunk-J57HR4DB.js";import{a as Gt,b as St}from"./chunk-IEUNGS56.js";import{b as ht,c as Z}from"./chunk-RQQJT345.js";import{a as gt}from"./chunk-5UCI4TUX.js";import{f as L}from"./chunk-IWJQ3PU6.js";import{b as W,f as J,g as Q,q as Y}from"./chunk-ATXTHXJA.js";import{a as ft,b as B,l as S,v as D}from"./chunk-SO6OJFOM.js";import{a as ct,b as mt}from"./chunk-DG5QI6E2.js";import{b as yt,f as dt}from"./chunk-TMZNSBQB.js";import{c as pt}from"./chunk-RSDQHAJX.js";import{F as _,Y as ut,r as O,s as lt}from"./chunk-OFVMJORF.js";import{b as st}from"./chunk-RP7XSKHE.js";import{a as M}from"./chunk-VC35VCVT.js";import{I as y,T as V}from"./chunk-Z5NXR7SL.js";import{S as z,w as b}from"./chunk-7JLWSSXP.js";import{a as u}from"./chunk-W3WDPWBE.js";import{g as E}from"./chunk-JEGVIFEP.js";var j=class extends St{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],j.prototype,"row",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],j.prototype,"column",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],j.prototype,"rows",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],j.prototype,"columns",void 0),j=u([z("esri.CameraLayout")],j);var et=j;var h=class extends Gt(V){constructor(...t){super(...t),this.position=new S([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new et}normalizeCtorArgs(t,e,r,o){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){let n={position:t};return e!=null&&(n.heading=e),r!=null&&(n.tilt=r),o!=null&&(n.fov=o),n}return t}writePosition(t,e,r,o){let n=t.clone();n.x=b(t.x||0),n.y=b(t.y||0),n.z=t.hasZ?b(t.z||0):t.z,e[r]=n.write({},o)}readPosition(t,e){let r=new S;return r.read(t,e),r.x=b(r.x||0),r.y=b(r.y||0),r.z=r.hasZ?b(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([y({type:S,json:{write:{isRequired:!0}}})],h.prototype,"position",void 0),u([ct("position")],h.prototype,"writePosition",null),u([ft("position")],h.prototype,"readPosition",null),u([y({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),M(t=>Mt.normalize(b(t)))],h.prototype,"heading",void 0),u([y({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),M(t=>yt(b(t),-180,180))],h.prototype,"tilt",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],h.prototype,"fov",void 0),u([y({type:et,nonNullable:!0,json:{read:!1,write:!1}})],h.prototype,"layout",void 0),h=u([z("esri.Camera")],h);var Pt=h;var ot,v=ot=class extends V{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new ot({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([y({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rt}}}}})],v.prototype,"rotation",void 0),u([M("rotation")],v.prototype,"castRotation",null),u([y({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rt}}}}})],v.prototype,"scale",void 0),u([y({types:gt,json:{read:L,write:!0,origins:{"web-scene":{read:L,write:{overridePolicy:rt}}}}})],v.prototype,"targetGeometry",void 0),u([y({type:Pt,json:{write:!0}})],v.prototype,"camera",void 0),v=ot=u([z("esri.Viewpoint")],v);var C=v;function rt(){return{enabled:!this.camera}}function A(){return[1,0,0,1,0,0]}function Lt(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Wt(t,e,r,o,n,a){return[t,e,r,o,n,a]}function Jt(t,e){return new Float64Array(t,e,6)}var Qt=A(),Le=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Qt,clone:Lt,create:A,createView:Jt,fromValues:Wt},Symbol.toStringTag,{value:"Module"}));var qt=96,Vt=39.37,Yt=180/Math.PI;function Ft(t){return t.wkid?t:t.spatialReference||mt.WGS84}function nt(t,e){return e.type?p(t,e.x,e.y):wt(t,e)}function It(t){return ut(t)}function Ct(t,e,r=0){let o=t.width,n=t.height;if(r!==0){let s=dt(r),l=Math.abs(Math.cos(s)),c=Math.abs(Math.sin(s));o=t.width*l+t.height*c,n=t.width*c+t.height*l}let a=Math.max(1,e[0]),i=Math.max(1,e[1]);return Math.max(o/a,n/i)*$t(t.spatialReference)}function k(t,e,r,o){return E(this,null,function*(){let n,a;if(!t||Array.isArray(t)&&!t.length)return null;if(st.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){let s=t.every(g=>"attributes"in g),l=t.some(g=>!g.geometry),c=t;if(s&&l&&e&&e.allLayerViews){let g=new Map;for(let f of t){let d=f.layer,T=g.get(d)||[],R=f.attributes[d.objectIdField];R!=null&&T.push(R),g.set(d,T)}let x=[];g.forEach((f,d)=>{let T=e.allLayerViews.find(R=>R.layer.id===d.id);if(T&&"queryFeatures"in T){let R=d.createQuery();R.objectIds=f,R.returnGeometry=!0,x.push(T.queryFeatures(R))}});let G=yield Promise.all(x),w=[];for(let f of G)if(f&&f.features&&f.features.length)for(let d of f.features)d.geometry!=null&&w.push(d.geometry);c=w}for(let g of c)o=yield k(g,e,r,o);return o}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new S(t);else if(t instanceof B)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){let s=t.layer,l=e.allLayerViews.find(c=>c.layer.id===s.id);if(l&&"queryFeatures"in l){let c=s.createQuery();c.objectIds=[t.attributes[s.objectIdField]],c.returnGeometry=!0,n=(yield l.queryFeatures(c))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":a=new D({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":a=ht(n);break;default:a=n.extent}if(!a)return null;W()||Y(a.spatialReference,r)||(yield J());let i=Q(a,r);if(!i)return null;if(o){let s=i.center,l=s.clone();l.x=Z(s.x,o.center.x,r),l.x!==s.x&&i.centerAt(l),o=o.union(i)}else o=i;return o})}function Zt(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){let e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,r=0;for(let o of t){let n=o.layer;n?.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,r=n.maxScale>r?n.maxScale:r)}return e&&r?{min:e,max:r}:null}}}function kt(t,e){return O(Ft(t),e)?t:Q(t,e)}function sr(t,e){return E(this,null,function*(){if(!t||!e)return new C({targetGeometry:new S,scale:0,rotation:0});let r=e.spatialReference,{constraints:o,padding:n,viewpoint:a,size:i}=e,s=[n?i[0]-n.left-n.right:i[0],n?i[1]-n.top-n.bottom:i[1]],l=null;t instanceof C?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof D?c=t:t instanceof B?c=yield k(t,e,r):t&&(c=(yield k(t.center,e,r))||(yield k(t.target,e,r))||(yield k(t,e,r))),!c&&a?.targetGeometry?c=a.targetGeometry:!c&&e.extent&&(c=e.extent),r||(r=Ft(e.spatialReference||e.extent||c)),W()||O(c.spatialReference,r)||Y(c.spatialReference,r)||(yield J());let g=kt(c,r),x="center"in g?g.center:g;e.pickClosestTarget!==!1&&x.type==="point"&&a.targetGeometry?.type==="point"&&(x.x=Z(x.x,a.targetGeometry.x,x.spatialReference));let G=0;l?G=l.rotation:t.hasOwnProperty("rotation")?G=t.rotation:a&&(G=a.rotation);let w=0;w=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&o&&o.effectiveLODs?o.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?a.scale:Ct(kt(c.extent,r),s,G);let f=Zt(t.target??t);f&&(f.min&&f.min<w?w=f.min:f.max&&f.max>w&&(w=f.max));let d=new C({targetGeometry:x,scale:w,rotation:G});return o&&(d=o.fit(d),o.constrainByGeometry(d),o.rotationEnabled||(d.rotation=a.rotation)),d})}function N(t,e){let r=t.targetGeometry,o=e.targetGeometry;return r.x=o.x,r.y=o.y,r.spatialReference=o.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Ut(t,e,r){return r?p(t,.5*(e[0]-r.right+r.left),.5*(e[1]-r.bottom+r.top)):P(t,e,.5)}var cr=function(){let t=m();return function(e,r,o){let n=r.targetGeometry;nt(t,n);let a=.5*q(r);return e.xmin=t[0]-a*o[0],e.ymin=t[1]-a*o[1],e.xmax=t[0]+a*o[0],e.ymax=t[1]+a*o[1],e.spatialReference=n.spatialReference,e}}();function lr(t,e,r,o,n){return re(t,e,r.center),t.scale=Ct(r,o),n?.constraints?.constrain(t),t}function Xt(t,e,r,o){return _t(t,e,r,o),jt(t,t)}var Et=function(){let t=m();return function(e,r,o){return K(e,te(e,r),Ut(t,r,o))}}(),Ht=function(){let t=A(),e=m();return function(r,o,n,a){let i=q(o),s=at(o);return p(e,i,i),Tt(t,e),$(t,t,s),I(t,t,Et(e,n,a)),I(t,t,[0,a.top-a.bottom]),p(r,t[4],t[5])}}();function q(t){return t.scale*Kt(t.targetGeometry?.spatialReference)}function Kt(t){return t!=null&&_(t)?1/(It(t)*Vt*qt):1}function at(t){return pt(t.rotation)||0}function $t(t){return _(t)?It(t)*Vt*qt:1}function te(t,e){return P(t,e,.5)}var Ot=function(){let t=m(),e=m(),r=m();return function(o,n,a,i,s,l){return xt(t,n),P(e,a,.5*l),p(r,1/i*l,-1/i*l),zt(o,e),s&&$(o,o,s),tt(o,o,r),I(o,o,t),o}}(),_t=function(){let t=m();return function(e,r,o,n){let a=q(r),i=at(r);return nt(t,r.targetGeometry),Ot(e,t,o,a,i,n)}}(),ur=function(){let t=m();return function(e,r,o,n){let a=q(r);return nt(t,r.targetGeometry),Ot(e,t,o,a,0,n)}}();function ee(t){let e=lt(t);return e?e.valid[1]-e.valid[0]:0}function mr(t,e){return Math.round(ee(t)/e)}var fr=function(){let t=m(),e=m(),r=[0,0,0];return function(o,n,a){U(t,o,n),H(t,t),U(e,o,a),H(e,e),vt(r,t,e);let i=Math.acos(Rt(t,e)/(X(t)*X(e)))*Yt;return r[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),pr=function(){let t=m();return function(e,r,o,n){let a=e.targetGeometry;return N(e,r),Ht(t,r,o,n),a.x+=t[0],a.y+=t[1],e}}(),re=function(t,e,r){N(t,e);let o=t.targetGeometry;return o.x=r.x,o.y=r.y,o.spatialReference=r.spatialReference,t},yr=function(){let t=m();return function(e,r,o,n,a){a||(a="center"),K(t,o,n),P(t,t,.5);let i=t[0],s=t[1];switch(a){case"center":p(t,0,0);break;case"left":p(t,-i,0);break;case"top":p(t,0,s);break;case"right":p(t,i,0);break;case"bottom":p(t,0,-s);break;case"top-left":p(t,-i,s);break;case"bottom-left":p(t,-i,-s);break;case"top-right":p(t,i,s);break;case"bottom-right":p(t,i,-s)}return it(e,r,t),e}}();function dr(t,e,r){return N(t,e),t.rotation+=r,t}function gr(t,e,r){return N(t,e),t.rotation=r,t}var oe=function(){let t=m();return function(e,r,o,n,a){return N(e,r),isNaN(o)||o===0||(Bt(t,n,r,a),e.scale=r.scale*o,Dt(t,t,e,a),it(e,e,p(t,t[0]-n[0],n[1]-t[1]))),e}}();function hr(t,e,r){return N(t,e),t.scale=r,t}var ne=function(){let t=m();return function(e,r,o,n,a,i){return N(e,r),isNaN(o)||o===0||(Bt(t,a,r,i),e.scale=r.scale*o,e.rotation+=n,Dt(t,t,e,i),it(e,e,p(t,t[0]-a[0],a[1]-t[1]))),e}}(),wr=function(){let t=m(),e=m();return function(r,o,n,a,i,s,l){return Et(e,s,l),bt(t,i,e),a?ne(r,o,n,a,t,s):oe(r,o,n,t,s)}}(),Bt=function(){let t=A();return function(e,r,o,n){return F(e,r,Xt(t,o,n,1))}}(),Dt=function(){let t=A();return function(e,r,o,n){return F(e,r,_t(t,o,n,1))}}(),it=function(){let t=m(),e=A();return function(r,o,n){N(r,o);let a=q(o),i=r.targetGeometry;return At(e,at(o)),tt(e,e,Nt(a,a)),F(t,n,e),i.x+=t[0],i.y+=t[1],r}}();export{C as a,A as b,Ct as c,sr as d,N as e,Ut as f,cr as g,lr as h,Et as i,q as j,Kt as k,Ot as l,_t as m,ur as n,ee as o,mr as p,fr as q,pr as r,re as s,yr as t,dr as u,gr as v,hr as w,ne as x,wr as y,it as z};
