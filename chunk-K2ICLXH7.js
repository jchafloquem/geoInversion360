import{e as kn,f as Pn,g as En,h as Fn,i as Qe}from"./chunk-WANJNLEB.js";import{a as ze}from"./chunk-XBCADXRU.js";import{a as je}from"./chunk-I6FBO5KL.js";import{a as On}from"./chunk-V4Y5M4BK.js";import{a as U}from"./chunk-TUPKV4BV.js";import{b as Xe,c as b}from"./chunk-C3UHYQBM.js";import{$ as L,Ba as Nn,G as Be,Ja as bn,Ka as Ue,La as _n,Ma as Sn,N as F,Na as I,Oa as Dn,Pa as Rn,Q as _e,R as fe,S as wn,T as M,U as Le,V as E,W as H,X as G,Y as ne,Z as yn,_,aa as xn,b as m,ba as An,c as f,ca as vn,ea as P,fa as K,ga as C,ha as T,ja as h,ka as Ve,la as In,m as Te,n as We,na as ge,oa as v,qa as Se,ra as g,sa as z,ta as De,ua as q,va as de,za as Re}from"./chunk-FXWBXMPB.js";import{a as pn}from"./chunk-OCNYIIP3.js";import{d as gn}from"./chunk-GYYF3HMQ.js";import{a as O,b as be,c as Q,h as $}from"./chunk-IBDPR46F.js";import{f as V}from"./chunk-IWJQ3PU6.js";import{c as Cn}from"./chunk-7S6PD5JC.js";import{a as ie,o as oe,p as se}from"./chunk-4HUAEW4D.js";import{g as hn}from"./chunk-XWRPBDYS.js";import{b as me,l as j,v as Ne}from"./chunk-SO6OJFOM.js";import{b as dn}from"./chunk-DG5QI6E2.js";import{a as pe}from"./chunk-V2KSICSA.js";import{d as Ie}from"./chunk-QYC4ILGT.js";import{a as fn}from"./chunk-HFQFGALU.js";import{n as mn}from"./chunk-BRGZVJPZ.js";import{w as he}from"./chunk-JKP4I6UL.js";import{a as ln}from"./chunk-TZHKPIVH.js";import{g as J}from"./chunk-JEGVIFEP.js";var Mn=class{constructor(i,n){this._moduleSingletons=i,this._syntaxModules=n}loadLibrary(i){if(this._syntaxModules==null)return null;let n=this._syntaxModules[i.toLowerCase()];return n?{syntax:n.script,uri:n.uri}:null}};var te=0;function $e(a,i,n,r,s=1){let c;switch(i=i.toLowerCase()){case"hasz":{let e=a.hasZ;return e!==void 0&&e}case"hasm":{let e=a.hasM;return e!==void 0&&e}case"spatialreference":{let e=a.spatialReference._arcadeCacheId;if(e===void 0){let o=!0;Object.freeze&&Object.isFrozen(a.spatialReference)&&(o=!1),o&&(te++,a.spatialReference._arcadeCacheId=te,e=te)}let t=new b({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid});return e!==void 0&&(t._arcadeCacheId="SPREF"+e.toString()),t}}switch(a.type){case"extent":switch(i){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{let e=a[i];return e!==void 0?e:null}case"type":return"Extent"}break;case"polygon":switch(i){case"rings":return c=a.cache._arcadeCacheId,c===void 0&&(te++,c=te,a.cache._arcadeCacheId=c),new We(a.rings,a.spatialReference,a.hasZ===!0,a.hasM===!0,c);case"type":return"Polygon"}break;case"point":switch(i){case"x":case"y":case"z":case"m":return a[i]??null;case"type":return"Point"}break;case"polyline":switch(i){case"paths":return c=a.cache._arcadeCacheId,c===void 0&&(te++,c=te,a.cache._arcadeCacheId=c),new We(a.paths,a.spatialReference,a.hasZ===!0,a.hasM===!0,c);case"type":return"Polyline"}break;case"multipoint":switch(i){case"points":return c=a.cache._arcadeCacheId,c===void 0&&(te++,c=te,a.cache._arcadeCacheId=c),new Te(a.points,a.spatialReference,a.hasZ===!0,a.hasM===!0,c,1);case"type":return"Multipoint"}}if(s===1)throw new f(n,m.InvalidIdentifier,r);return s===2?{keystate:"notfound"}:null}function Tn(a,i){let n,r=a;if(r==null)return null;if(_(i))n=i;else if(P(i))n=i.toArray();else{if(i==null)return null;n=[i]}for(let s of n){if(L(r)){if(E(s)===!1||!r.hasField(s))return null;r=r.field(s)}else if(An(r)){if(E(s)===!1||!r.hasField(s))return null;r=r.field(s)}else if(yn(r)){if(E(s)===!1)return null;r=$e(r,s,null,null,0)}else if(_(r)){if(G(s)===!1)return null;r=s>=0?r[s]:r[r.length+s]}else{if(!P(r)||G(s)===!1)return null;r=s>=0?r.get(s):r.get(r.length()+s)}if(r==null)return null}return r}var Ln={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},qe={functionDefinitions:new Map,constantDefinitions:new Map},Ze={functionDefinitions:new Map,constantDefinitions:new Map};for(let a of["pi","infinity"])Ze.constantDefinitions.set(a,{type:"constant"}),qe.constantDefinitions.set(a,{type:"constant"});Ze.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),qe.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(let a in Ln){let i=Ln[a];Ze.functionDefinitions.set(a,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]}),qe.functionDefinitions.set(a,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]})}var $n=new Set(["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem","getfeaturesetinfo","filterbysubtypecode","knowledgegraphbyportalitem","querygraph"]),Kn=new Set(["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","nearestvertex","nearestcoordinate","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart","pointtocoordinate","distancetocoordinate","measuretocoordinate"]);function Un(a){return typeof a=="string"||a instanceof String}function Ft(a,i){let n=i==="sync"?qe:Ze;n.functionDefinitions.has(a.name.toLowerCase())?n.functionDefinitions.get(a.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:a.min,max:a.max}}):n.functionDefinitions.set(a.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:a.min,max:a.max}}]})}function re(a,i){if(a)for(let n of a)R(n,i)}function R(a,i){if(a&&i(a)!==!1)switch(a.type){case"ImportDeclaration":re(a.specifiers,i),R(a.source,i);break;case"ExportNamedDeclaration":R(a.declaration,i);break;case"ArrayExpression":re(a.elements,i);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":R(a.left,i),R(a.right,i);break;case"BlockStatement":case"Program":re(a.body,i);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":R(a.callee,i),re(a.arguments,i);break;case"ExpressionStatement":R(a.expression,i);break;case"ForInStatement":R(a.left,i),R(a.right,i),R(a.body,i);break;case"ForStatement":R(a.init,i),R(a.test,i),R(a.update,i),R(a.body,i);break;case"WhileStatement":R(a.test,i),R(a.body,i);break;case"FunctionDeclaration":R(a.id,i),re(a.params,i),R(a.body,i);break;case"IfStatement":R(a.test,i),R(a.consequent,i),R(a.alternate,i);break;case"MemberExpression":R(a.object,i),R(a.property,i);break;case"ObjectExpression":re(a.properties,i);break;case"Property":R(a.key,i),R(a.value,i);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":R(a.argument,i);break;case"VariableDeclaration":re(a.declarations,i);break;case"VariableDeclarator":R(a.id,i),R(a.init,i);break;case"TemplateLiteral":re(a.expressions,i),re(a.quasis,i)}}function Yn(a,i){let n=!1,r=i.toLowerCase();return R(a,s=>!n&&(s.type==="Identifier"&&s.name&&s.name.toLowerCase()===r&&(n=!0),!0)),n}function et(a){let i=[];return R(a,n=>(n.type==="ImportDeclaration"&&n.source&&n.source.value&&i.push({libname:n.specifiers[0].local.name.toLowerCase(),source:n.source.value}),!0)),i}function Ot(a,i){let n=!1,r=i.toLowerCase();return R(a,s=>!n&&(s.type!=="CallExpression"||s.callee.type!=="Identifier"||!s.callee.name||s.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function Ct(a){let i=[];return R(a,n=>n.type!=="MemberExpression"||n.object.type!=="Identifier"||(n.computed===!1&&n.object&&n.object.name&&n.property&&n.property.type==="Identifier"&&n.property.name?i.push(n.object.name.toLowerCase()+"."+n.property.name.toLowerCase()):n.object&&n.object.name&&n.property&&n.property.type==="Literal"&&typeof n.property.value=="string"&&i.push(n.object.name.toLowerCase()+"."+n.property.value?.toString().toLowerCase()),!1)),i}function Mt(a){let i=[];return R(a,n=>{if(n.type==="CallExpression"){if(n.callee.type==="Identifier"&&n.callee.name.toLowerCase()==="expects"){let r="";for(let s=0;s<(n.arguments||[]).length;s++)s===0?n.arguments[s].type==="Identifier"&&(r=n.arguments[s].name.toLowerCase()):r&&n.arguments[s].type==="Literal"&&Un(n.arguments[s].value)&&i.push(r+"."+n.arguments[s].value.toLowerCase());return!1}if(n.callee.type==="Identifier"&&["domainname","domaincode","domain","haskey"].includes(n.callee.name.toLowerCase())&&n.arguments.length>=2){let r="";return n.arguments[0].type==="Identifier"&&(r=n.arguments[0].name.toLowerCase()),r&&n.arguments[1].type==="Literal"&&Un(n.arguments[1].value)&&i.push(r+"."+n.arguments[1].value.toLowerCase()),!1}}return n.type!=="MemberExpression"||n.object.type!=="Identifier"||(n.computed===!1&&n.object&&n.object.name&&n.property&&n.property.type==="Identifier"&&n.property.name?i.push(n.object.name.toLowerCase()+"."+n.property.name.toLowerCase()):n.object&&n.object.name&&n.property&&n.property.type==="Literal"&&typeof n.property.value=="string"&&i.push(n.object.name.toLowerCase()+"."+n.property.value?.toString().toLowerCase()),!1)}),i}function zn(a){let i=[];return R(a,n=>(n.type==="CallExpression"&&n.callee.type==="Identifier"&&i.push(n.callee.name.toLowerCase()),!0)),i}function Tt(a,i=[]){let n=null;if(a.usesFeatureSet===void 0){n===null&&(n=zn(a)),a.usesFeatureSet=!1;for(let r=0;r<n.length;r++)$n.has(n[r])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(a.usesFeatureSet===!1&&i&&i.length>0){for(let r of i)if(Yn(a,r)){a.usesFeatureSet=!0,a.isAsync=!0;break}}}if(a.usesModules===void 0&&(a.usesModules=!1,et(a).length>0&&(a.usesModules=!0)),a.usesGeometry===void 0){a.usesGeometry=!1,n===null&&(n=zn(a));for(let r=0;r<n.length;r++)Kn.has(n[r])&&(a.usesGeometry=!0)}}function nt(a){function i(t,o,l){if(t instanceof pn)return t.toArray();if(_(t))return t;throw new f(o,m.InvalidParameter,l)}function n(t,o){let l=t.length,d=Math.floor(l/2);return l===0?[]:l===1?[t[0]]:r(n(t.slice(0,d),o),n(t.slice(d,l),o),o)}function r(t,o,l){let d=[];for(;t.length>0||o.length>0;)if(t.length>0&&o.length>0){let u=l(t[0],o[0]);isNaN(u)&&(u=0),u<=0?(d.push(t[0]),t=t.slice(1)):(d.push(o[0]),o=o.slice(1))}else t.length>0?(d.push(t[0]),t=t.slice(1)):o.length>0&&(d.push(o[0]),o=o.slice(1));return d}function s(t,o){return J(this,null,function*(){let l=t.length,d=Math.floor(l/2);if(l===0)return[];if(l===1)return[t[0]];let u=[yield s(t.slice(0,d),o),yield s(t.slice(d,l),o)];return c(u[0],u[1],o,[])})}function c(t,o,l,d){return J(this,null,function*(){let u=d;if(t.length>0||o.length>0){if(t.length>0&&o.length>0){let p=yield l(t[0],o[0]);return isNaN(p)&&(p=1),p<=0?(u.push(t[0]),t=t.slice(1)):(u.push(o[0]),o=o.slice(1)),c(t,o,l,d)}return t.length>0?(u.push(t[0]),c(t=t.slice(1),o,l,d)):(u.push(o[0]),c(t,o=o.slice(1),l,d))}return d})}function e(t,o,l,d){h(l,1,2,t,o);let u=l[0];if(P(u)&&(u=u.toArray()),_(u)===!1)throw new f(t,m.InvalidParameter,o);if(l.length>1){if(fe(l[1])===!1)throw new f(t,m.InvalidParameter,o);let A=u,D=l[1].createFunction(t);return d?s(A,D):(A=n(A,(Z,Me)=>D(Z,Me)),A)}let p=u;if(p.length===0)return[];let w={};for(let A=0;A<p.length;A++){let D=Le(p[A]);D!==""&&(w[D]=!0)}if(w.Array===!0||w.Dictionary===!0||w.Feature===!0||w.Point===!0||w.Polygon===!0||w.Polyline===!0||w.Multipoint===!0||w.Extent===!0||w.Function===!0)return p.slice(0);let x=0,N="";for(let A in w)x++,N=A;return p=x>1||N==="String"?n(p,(A,D)=>{if(A==null||A===F)return D==null||D===F?0:1;if(D==null||D===F)return-1;let Z=v(A),Me=v(D);return Z<Me?-1:Z===Me?0:1}):N==="Number"?n(p,(A,D)=>A-D):N==="Boolean"?n(p,(A,D)=>A===D?0:D?-1:1):N==="Date"?n(p,(A,D)=>D-A):p.slice(0),p}a.functions.array=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,0,2,t,o),u.length===0)return[];if(u.length===1&&u[0]===null)return[];if(_(u[0])){if(u.length===2&&H(u[1])===!1)throw new f(t,m.InvalidParameter,o);return M(u[1],!1)===!0?Xe(u[0]):u[0].slice(0)}if(P(u[0])){if(u.length===2&&H(u[1])===!1)throw new f(t,m.InvalidParameter,o);return M(u[1],!1)===!0?Xe(u[0]):u[0].toArray().slice(0)}let p=g(u[0]);if(isNaN(p)||ne(p)===!1)throw new f(t,m.InvalidParameter,o);let w=M(u[1],null),x=new Array(p);return x.fill(w),x})},a.functions.front=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,1,1,t,o),P(u[0])){if(u[0].length()<=0)throw new f(t,m.OutOfBounds,o);return u[0].get(0)}if(_(u[0])){if(u[0].length<=0)throw new f(t,m.OutOfBounds,o);return u[0][0]}throw new f(t,m.InvalidParameter,o)})},a.functions.back=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,1,1,t,o),P(u[0])){if(u[0].length()<=0)throw new f(t,m.OutOfBounds,o);return u[0].get(u[0].length()-1)}if(_(u[0])){if(u[0].length<=0)throw new f(t,m.OutOfBounds,o);return u[0][u[0].length-1]}throw new f(t,m.InvalidParameter,o)})},a.functions.push=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,1,2,t,o),_(u[0]))return u[0][u[0].length]=u[1],u[0].length;throw new f(t,m.InvalidParameter,o)})},a.functions.pop=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,1,1,t,o),_(u[0])){if(u[0].length<=0)throw new f(t,m.OutOfBounds,o);let p=u[0][u[0].length-1];return u[0].length=u[0].length-1,p}throw new f(t,m.InvalidParameter,o)})},a.functions.erase=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,2,2,t,o),_(u[0])){let p=g(u[1]);if(isNaN(p)||ne(p)===!1)throw new f(t,m.InvalidParameter,o);let w=u[0];if(w.length<=0)throw new f(t,m.OutOfBounds,o);if(p<0&&(p=w.length+p),p<0)throw new f(t,m.OutOfBounds,o);if(p>=w.length)throw new f(t,m.OutOfBounds,o);return w.splice(p,1),F}throw new f(t,m.InvalidParameter,o)})},a.functions.insert=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,3,3,t,o),_(u[0])){let p=g(u[1]);if(isNaN(p)||ne(p)===!1)throw new f(t,m.InvalidParameter,o);let w=u[2],x=u[0];if(p>x.length)throw new f(t,m.OutOfBounds,o);if(p<0&&p<-1*x.length)throw new f(t,m.OutOfBounds,o);return p===x.length?(x[p]=w,F):(x.splice(p,0,w),F)}throw new f(t,m.InvalidParameter,o)})},a.functions.resize=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,2,3,t,o),_(u[0])){let p=g(u[1]);if(isNaN(p)||ne(p)===!1)throw new f(t,m.InvalidParameter,o);if(p<0)throw new f(t,m.InvalidParameter,o);let w=M(u[2],null),x=u[0];if(x.length>=p)return x.length=p,F;let N=x.length;x.length=p;for(let A=N;A<x.length;A++)x[A]=w;return F}throw new f(t,m.InvalidParameter,o)})},a.functions.includes=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,2,2,t,o),_(u[0])){let p=u[1];return u[0].findIndex(w=>ge(w,p))>-1}if(P(u[0])){let p=u[1];return u[0].toArray().findIndex(w=>ge(w,p))>-1}throw new f(t,m.InvalidParameter,o)})},a.functions.slice=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,1,3,t,o),_(u[0])){let p=g(M(u[1],0)),w=g(M(u[2],u[0].length));if(isNaN(p)||ne(p)===!1)throw new f(t,m.InvalidParameter,o);if(isNaN(w)||ne(w)===!1)throw new f(t,m.InvalidParameter,o);return u[0].slice(p,w)}if(P(u[0])){let p=u[0],w=g(M(u[1],0)),x=g(M(u[2],p.length()));if(isNaN(w)||ne(w)===!1)throw new f(t,m.InvalidParameter,o);if(isNaN(x)||ne(x)===!1)throw new f(t,m.InvalidParameter,o);return p.toArray().slice(w,x)}throw new f(t,m.InvalidParameter,o)})},a.functions.splice=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{let p=[];for(let w=0;w<u.length;w++)_(u[w])?p.push(...u[w]):P(u[w])?p.push(...u[w].toArray()):p.push(u[w]);return p})},a.functions.top=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{if(h(u,2,2,t,o),_(u[0]))return g(u[1])>=u[0].length?u[0].slice(0):u[0].slice(0,g(u[1]));if(P(u[0]))return g(u[1])>=u[0].length()?u[0].slice(0):u[0].slice(0,g(u[1]));throw new f(t,m.InvalidParameter,o)})},a.functions.first=function(t,o){return a.standardFunction(t,o,(l,d,u)=>(h(u,1,1,t,o),_(u[0])?u[0].length===0?null:u[0][0]:P(u[0])?u[0].length()===0?null:u[0].get(0):null))},a.mode==="sync"&&(a.functions.sort=function(t,o){return a.standardFunction(t,o,(l,d,u)=>e(t,d,u,!1))},a.functions.any=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w){let N=p(x);if(H(N)&&N===!0)return!0}return!1})},a.functions.all=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w)if(p(x)!==!0)return!1;return!0})},a.functions.none=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w)if(p(x)===!0)return!1;return!0})},a.functions.reduce=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,3,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);return u.length===2?w.length===0?null:w.reduce((x,N)=>{let A=p(x,N);return x=A!==void 0&&A!==F?A:null}):w.reduce((x,N)=>{let A=p(x,N);return x=A!==void 0&&A!==F?A:null},u[2])})},a.functions.map=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d),x=[];for(let N of w){let A=p(N);A!==void 0&&A!==F?x.push(A):x.push(null)}return x})},a.functions.filter=function(t,o){return a.standardFunction(t,o,(l,d,u)=>{h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d),x=[];for(let N of w)p(N)===!0&&x.push(N);return x})}),a.mode==="async"&&(a.functions.sort=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){return e(t,d,u,!0)}))},a.functions.any=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w){let N=yield p(x),A=null;if(A=he(A)?yield N:N,H(A)&&A===!0)return!0}return!1}))},a.functions.all=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w){let N=yield p(x),A=null;if(A=he(A)?yield N:N,A!==!0)return!1}return!0}))},a.functions.none=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d);for(let x of w){let N=yield p(x),A=null;if(A=he(A)?yield N:N,A===!0)return!1}return!0}))},a.functions.filter=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d),x=[];for(let N of w){let A=yield p(N),D=null;D=he(D)?yield A:A,D===!0&&x.push(N)}return x}))},a.functions.reduce=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,3,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d),x;if(u.length>2){let N=M(u[2],null);x=w.reduce((A,D)=>J(this,null,function*(){let Z=yield A;return Z!==void 0&&Z!==F||(Z=null),p(Z,D)}),Promise.resolve(N))}else{if(w.length===0)return null;x=w.reduce((N,A,D)=>J(this,null,function*(){if(D<=1)return p(N,A);let Z=yield N;return Z!==void 0&&Z!==F||(Z=null),p(Z,A)}))}return x.then(N=>N!==void 0&&N!==F?N:null)}))},a.functions.map=function(t,o){return a.standardFunctionAsync(t,o,(l,d,u)=>J(this,null,function*(){h(u,2,2,t,d);let p=u[1].createFunction(t),w=i(u[0],t,d),x=[];for(let N of w){let A=yield p(N),D=null;D=he(D)?yield A:A,D!==void 0&&D!==F?x.push(D):x.push(null)}return x}))})}var Ht=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:nt},Symbol.toStringTag,{value:"Module"}));function tt(a,i,n){return a+(rt(n)?it:at)[i]}function rt(a){return a%4==0&&(a%100!=0||a%400==0)}var at=[0,31,59,90,120,151,181,212,243,273,304,334],it=[0,31,60,91,121,152,182,213,244,274,305,335];function Y(a){return a===null?a:a.isValid===!1?null:a}function ke(a,i){return a===""||a.toLowerCase().trim()==="default"?I(i):a==="z"||a==="Z"?"UTC":a}function ae(a,i){return C(a)?a.toArcadeDate():z(a,I(i))}function Yt(a,i){a.today=function(n,r){return i(n,r,(s,c,e)=>{h(e,0,0,n,r);let t=new Date;return t.setHours(0,0,0,0),O.dateJSAndZoneToArcadeDate(t,I(n))})},a.time=function(n,r){return i(n,r,(s,c,e)=>{switch(h(e,0,4,n,r),e.length){case 0:{let t=O.nowToArcadeDate(I(n));return new $(t.hour,t.minute,t.second,t.millisecond)}case 1:{if(T(e[0]))return e[0].clone();if(K(e[0]))return new $(e[0].hour,e[0].minute,e[0].second,e[0].millisecond);if(C(e[0]))return new $(0,0,0,0);if(E(e[0]))return $.fromString(e[0]);let t=g(e[0]);return isNaN(t)===!1?$.fromMilliseconds(t):null}case 2:return E(e[0])&&E(e[1])?$.fromString(e[0],e[1]):$.fromParts(g(e[0]),g(e[1]),0,0);case 3:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),0);case 4:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),g(e[3]))}throw new f(n,m.InvalidParameter,r)})},a.dateonly=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,0,3,n,r),e.length===3)return Q.fromParts(g(e[0]),g(e[1])+1,g(e[2]));if(e.length===2){let t=v(e[1]);return t===""?null:t==="X"?Q.fromSeconds(g(e[0])):t==="x"?Q.fromMilliseconds(g(e[0])):Q.fromString(v(e[0]),t)}if(e.length===1){if(E(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return Q.fromString(e[0]+"-01-01")}if(C(e[0]))return e[0].clone();if(K(e[0]))return Q.fromParts(e[0].year,e[0].monthJS+1,e[0].day);let t=g(e[0]);return isNaN(t)===!1?Q.fromMilliseconds(t):E(e[0])?Q.fromString(e[0]):null}if(e.length===0){let t=O.nowToArcadeDate(I(n));return t.isValid===!1?null:Q.fromParts(t.year,t.monthJS+1,t.day)}return null})},a.changetimezone=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,2,n,r),e[0]===null)return null;if(C(e[0]))throw new f(n,m.CannotChangeTimeZoneDateOnly,r);if(C(e[0]))throw new f(n,m.CannotChangeTimeZoneTime,r);let t=z(e[0],I(n));if(t===null)throw new f(n,m.InvalidParameter,r);let o=be(ke(v(e[1]),n),!1);if(o===null)return null;let l=O.arcadeDateAndZoneToArcadeDate(t,o);return l.isValid===!1?null:l})},a.timezone=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,2,n,r),T(e[0])||C(e[0]))return"Unknown";let t=z(e[0],I(n));if(t===null)return null;let o=t.timeZone;return o==="system"?O.systemTimeZoneCanonicalName:o.toLowerCase()==="utc"?"UTC":o.toLowerCase()==="unknown"?"Unknown":o})},a.timezoneoffset=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=z(e[0],I(n));return t===null?null:60*t.timeZoneOffset*1e3})},a.now=function(n,r){return i(n,r,(s,c,e)=>{h(e,0,0,n,r);let t=O.nowToArcadeDate(I(n));return t.isValid===!1?null:t})},a.timestamp=function(n,r){return i(n,r,(s,c,e)=>{h(e,0,0,n,r);let t=O.nowUTCToArcadeDate();return t.isValid===!1?null:t})},a.toutc=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=z(e[0],I(n));return t===null?null:t.toUTC()})},a.tolocal=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=z(e[0],I(n));return t===null?null:t.toLocal()})},a.day=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.day})},a.month=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.monthJS})},a.year=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.year})},a.hour=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),T(e[0]))return e[0].hour;let t=z(e[0],I(n));return t===null?NaN:t.hour})},a.second=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),T(e[0]))return e[0].second;let t=z(e[0],I(n));return t===null?NaN:t.second})},a.millisecond=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),T(e[0]))return e[0].millisecond;let t=z(e[0],I(n));return t===null?NaN:t.millisecond})},a.minute=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),T(e[0]))return e[0].minute;let t=z(e[0],I(n));return t===null?NaN:t.minute})},a.week=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,2,n,r);let t=ae(e[0],I(n));if(t===null)return NaN;let o=g(M(e[1],0));if(o<0||o>6)throw new f(n,m.InvalidParameter,r);let l=t.day,d=t.monthJS,u=t.year,p=t.dayOfWeekJS,w=tt(l,d,u)-1,x=Math.floor(w/7);return p-o+(p-o<0?7:0)<w-7*x?x+1:x})},a.weekday=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.dayOfWeekJS})},a.isoweekday=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.dayOfWeekISO})},a.isomonth=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.monthISO})},a.isoweek=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.weekISO})},a.isoyear=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=ae(e[0],I(n));return t===null?NaN:t.yearISO})},a.date=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,0,8,n,r),e.length===3){if(C(e[0])&&T(e[1])&&E(e[2])){let t=be(ke(v(e[2])??"unknown",n),!1);return t===null?null:Y(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,t))}return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),0,0,0,0,I(n)))}if(e.length===4)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),0,0,0,I(n)));if(e.length===5)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),0,0,I(n)));if(e.length===6)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),0,I(n)));if(e.length===7)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),I(n)));if(e.length===8){let t=be(ke(v(e[7])??"unknown",n),!1);return t===null?null:Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),t))}if(e.length===2){if(C(e[0])&&E(e[1])){let l=be(ke(v(e[1])??"unknown",n),!1);return l===null?null:Y(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,l))}if(C(e[0])&&T(e[1]))return Y(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,"unknown"));let t,o=v(e[1]);return o===""?null:(o=In(o,!0),t=o==="X"?Ie.fromSeconds(g(e[0])):o==="x"?Ie.fromMillis(g(e[0])):Ie.fromFormat(v(e[0]),o,{locale:fn(),numberingSystem:"latn"}),t.isValid?O.dateTimeToArcadeDate(t):null)}if(e.length===1){if(C(e[0]))return Y(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,"unknown"));if(E(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return z(e[0]+"-01-01",I(n))}let t=g(e[0]);if(isNaN(t)===!1){let o=Ie.fromMillis(t);return o.isValid?O.dateTimeAndZoneToArcadeDate(o,I(n)):null}return z(e[0],I(n))}return e.length===0?O.nowToArcadeDate(I(n)):null})},a.datediff=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,4,n,r),T(e[0]))return T(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(T(e[1]))return NaN;if(C(e[0]))return C(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(C(e[1]))return NaN;let t=z(e[0],I(n)),o=z(e[1],I(n));if(t===null||o===null)return NaN;let l=M(e[3],"");switch(l!==""&&l!==null?(l=ke(v(l),n),t=O.arcadeDateAndZoneToArcadeDate(t,l),o=O.arcadeDateAndZoneToArcadeDate(o,l)):t.timeZone!==o.timeZone&&(t.isUnknownTimeZone?t=O.arcadeDateAndZoneToArcadeDate(t,o.timeZone):o=(o.isUnknownTimeZone,O.arcadeDateAndZoneToArcadeDate(o,t.timeZone))),v(e[2]).toLowerCase()){case"days":case"day":case"d":return t.diff(o,"days");case"months":case"month":return t.diff(o,"months");case"minutes":case"minute":case"m":return e[2]==="M"?t.diff(o,"months"):t.diff(o,"minutes");case"seconds":case"second":case"s":return t.diff(o,"seconds");case"milliseconds":case"millisecond":case"ms":default:return t.diff(o);case"hours":case"hour":case"h":return t.diff(o,"hours");case"years":case"year":case"y":return t.diff(o,"years")}})},a.dateadd=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,3,n,r);let t=g(e[1]);if(isNaN(t)||t===1/0||t===-1/0)return T(e[0])||C(e[0])?e[0].clone():z(e[0],I(n));let o="milliseconds";switch(v(e[2]).toLowerCase()){case"days":case"day":case"d":o="days",t=C(e[0])?t:Ve(t);break;case"months":case"month":o="months",t=C(e[0])?t:Ve(t);break;case"minutes":case"minute":case"m":o=e[2]==="M"?"months":"minutes";break;case"seconds":case"second":case"s":o="seconds";break;case"milliseconds":case"millisecond":case"ms":o="milliseconds";break;case"hours":case"hour":case"h":o="hours";break;case"years":case"year":case"y":o="years"}if(T(e[0])||C(e[0]))return e[0].plus(o,t);let l=z(e[0],I(n));return l===null?null:l.plus({[o]:t})})}}function gr(a,i){a.ringisclockwise=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=[];if(e[0]===null)return!1;if(_(e[0]))for(let o of e[0]){if(!(o instanceof j))throw new f(n,m.InvalidParameter,r);t.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}else if(e[0]instanceof Te)t=e[0]._elements;else{if(!P(e[0]))throw new f(n,m.InvalidParameter,r);for(let o of e[0].toArray()){if(!(o instanceof j))throw new f(n,m.InvalidParameter,r);t.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}}return!(t.length<3)&&hn(t)})},a.polygon=function(n,r){return i(n,r,(s,c,e)=>{let t;if(h(e,1,1,n,r),e[0]instanceof b){let o=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);if(!(o instanceof oe))throw new f(n,m.InvalidParameter,r);t=o}else if(e[0]instanceof oe)t=V(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(new oe(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.polyline=function(n,r){return i(n,r,(s,c,e)=>{let t;if(h(e,1,1,n,r),e[0]instanceof b){let o=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);if(!(o instanceof se))throw new f(n,m.InvalidParameter,r);t=o}else if(e[0]instanceof se)t=V(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(new se(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.point=function(n,r){return i(n,r,(s,c,e)=>{let t;if(h(e,1,1,n,r),e[0]instanceof b){let o=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);if(!(o instanceof j))throw new f(n,m.InvalidParameter,r);t=o}else if(e[0]instanceof j)t=V(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(new j(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.multipoint=function(n,r){return i(n,r,(s,c,e)=>{let t;if(h(e,1,1,n,r),e[0]instanceof b){let o=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);if(!(o instanceof ie))throw new f(n,m.InvalidParameter,r);t=o}else if(e[0]instanceof ie)t=V(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(new ie(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.extent=function(n,r){return i(n,r,(s,c,e)=>{e=Re(e),h(e,1,1,n,r);let t=null;if(e[0]instanceof b)t=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);else if(e[0]instanceof j){let o={xmin:e[0].x,ymin:e[0].y,xmax:e[0].x,ymax:e[0].y,spatialReference:e[0].spatialReference.toJSON()},l=e[0];l.hasZ?(o.zmin=l.z,o.zmax=l.z):l.hasM&&(o.mmin=l.m,o.mmax=l.m),t=V(o)}else if(e[0]instanceof oe)t=V(e[0].extent?.toJSON());else if(e[0]instanceof se)t=V(e[0].extent?.toJSON());else if(e[0]instanceof ie)t=V(e[0].extent?.toJSON());else if(e[0]instanceof Ne)t=V(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(new Ne(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.geometry=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=null;if(e[0]===null)return null;if(L(e[0]))t=q(e[0].geometry(),n.spatialReference);else if(e[0]instanceof b)t=q(U.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=n.spatialReference),t=q(V(o),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new f(n,m.WrongSpatialReference,r);return de(t)})},a.setgeometry=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,2,n,r),!L(e[0]))throw new f(n,m.InvalidParameter,r);if(e[0].immutable===!0)throw new f(n,m.Immutable,r);if(!(e[1]instanceof me||e[1]===null))throw new f(n,m.InvalidParameter,r);return e[0]._geometry=e[1],F})},a.feature=function(n,r){return i(n,r,(s,c,e)=>{if(e.length===0)throw new f(n,m.WrongNumberOfParameters,r);let t;if(e.length===1)if(E(e[0]))t=U.fromJson(JSON.parse(e[0]),n.timeZone);else if(L(e[0]))t=U.createFromArcadeFeature(e[0]);else if(e[0]instanceof me)t=U.createFromGraphicLikeObject(e[0],null,null,n.timeZone);else{if(!(e[0]instanceof b))throw new f(n,m.InvalidParameter,r);{let o=e[0].hasField("geometry")?e[0].field("geometry"):null,l=e[0].hasField("attributes")?e[0].field("attributes"):null;o!==null&&o instanceof b&&(o=U.parseGeometryFromDictionary(o,n.spatialReference)),l!==null&&(l=U.parseAttributesFromDictionary(l)),t=U.createFromGraphicLikeObject(o,l,null,n.timeZone)}}else if(e.length===2){let o=null,l=null;if(e[0]!==null)if(e[0]instanceof me)o=e[0];else{if(!(o instanceof b))throw new f(n,m.InvalidParameter,r);o=U.parseGeometryFromDictionary(e[0],n.spatialReference)}if(e[1]!==null){if(!(e[1]instanceof b))throw new f(n,m.InvalidParameter,r);l=U.parseAttributesFromDictionary(e[1])}t=U.createFromGraphicLikeObject(o,l,null,n.timeZone)}else{let o=null,l={};if(e[0]!==null)if(e[0]instanceof me)o=e[0];else{if(!(o instanceof b))throw new f(n,m.InvalidParameter,r);o=U.parseGeometryFromDictionary(e[0],n.spatialReference)}for(let d=1;d<e.length;d+=2){let u=v(e[d]),p=e[d+1];if(!(p==null||E(p)||isNaN(p)||K(p)||G(p)||T(p)||C(p)||H(p)))throw new f(n,m.InvalidParameter,r);if(fe(p)||wn(p)===!1)throw new f(n,m.InvalidParameter,r);l[u]=p===F?null:p}t=U.createFromGraphicLikeObject(o,l,null,n.timeZone)}return t._geometry=q(t.geometry(),n.spatialReference),t.immutable=!1,t})},a.dictionary=function(n,r){return i(n,r,(s,c,e)=>{if(e.length===0||e.length===1&&e[0]===null){let l=new b;return l.immutable=!1,l}if(e.length===1&&E(e[0]))try{let l=JSON.parse(e[0]),d=b.convertObjectToArcadeDictionary(l,I(n),!1);return d.immutable=!1,d}catch{throw new f(n,m.InvalidParameter,r)}if(e.length===1&&e[0]instanceof me)try{let l=e[0].toJSON();l.hasZ=e[0].hasZ===!0,l.hasM=e[0].hasM===!0;let d=b.convertObjectToArcadeDictionary(l,I(n),!1);return d.immutable=!1,d}catch{throw new f(n,m.InvalidParameter,r)}if(e.length===1&&L(e[0]))try{let l=new b;l.immutable=!1,l.setField("geometry",e[0].geometry());let d=new b;d.immutable=!1,l.setField("attributes",d);for(let u of e[0].keys())d.setField(u,e[0].field(u));return l}catch{throw new f(n,m.InvalidParameter,r)}if(e.length===1&&e[0]instanceof b)try{let l=new b;l.immutable=!1;for(let d of e[0].keys())l.setField(d,e[0].field(d));return l}catch{throw new f(n,m.InvalidParameter,r)}if(e.length===2&&e[0]instanceof b&&H(e[1]))try{if(e[1]!==!0){let l=new b;l.immutable=!1;for(let d of e[0].keys())l.setField(d,e[0].field(d));return l}return e[0].deepClone()}catch{throw new f(n,m.InvalidParameter,r)}if(e.length%2!=0)throw new f(n,m.WrongNumberOfParameters,r);let t={};for(let l=0;l<e.length;l+=2){let d=v(e[l]),u=e[l+1];if(!(u==null||E(u)||isNaN(u)||K(u)||G(u)||H(u)||C(u)||T(u)||_(u)||P(u)))throw new f(n,m.InvalidParameter,r);if(fe(u))throw new f(n,m.InvalidParameter,r);t[d]=u===F?null:u}let o=new b(t);return o.immutable=!1,o})},a.haskey=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,2,n,r);let t=v(e[1]);if(L(e[0])||e[0]instanceof b)return e[0].hasField(t);if(e[0]instanceof me){let o=$e(e[0],t,null,null,2);return!o||o.keystate!=="notfound"}throw new f(n,m.InvalidParameter,r)})},a.hasvalue=function(n,r){return i(n,r,(s,c,e)=>(h(e,2,2,n,r),Tn(e[0],e[1])!=null))},a.indexof=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,2,n,r);let t=e[1];if(_(e[0])){for(let o=0;o<e[0].length;o++)if(ge(t,e[0][o]))return o;return-1}if(P(e[0])){let o=e[0].length();for(let l=0;l<o;l++)if(ge(t,e[0].get(l)))return l;return-1}throw new f(n,m.InvalidParameter,r)})},a.angle=function(n,r){return i(n,r,(s,c,e)=>{if(e=Re(e),h(e,2,3,n,r),!(e[0]instanceof j))throw new f(n,m.InvalidParameter,r);if(!(e[1]instanceof j))throw new f(n,m.InvalidParameter,r);if(e.length>2&&!(e[2]instanceof j))throw new f(n,m.InvalidParameter,r);return e.length===2?kn(e[0],e[1]):En(e[0],e[1],e[2])})},a.bearing=function(n,r){return i(n,r,(s,c,e)=>{if(e=Re(e),h(e,2,3,n,r),!(e[0]instanceof j))throw new f(n,m.InvalidParameter,r);if(!(e[1]instanceof j))throw new f(n,m.InvalidParameter,r);if(e.length>2&&!(e[2]instanceof j))throw new f(n,m.InvalidParameter,r);return e.length===2?Pn(e[0],e[1]):Fn(e[0],e[1],e[2])})},a.isselfintersecting=function(n,r){return i(n,r,(s,c,e)=>{e=Re(e),h(e,1,1,n,r);let t=e[0];if(t instanceof oe)return t.isSelfIntersecting;if(t instanceof se)return Qe(t.paths);if(t instanceof ie){let o=t.points;for(let l=0;l<o.length;l++)for(let d=0;d<o.length;d++)if(d!==l){let u=!0;for(let p=0;p<o[l].length;p++)if(o[l][p]!==o[d][p]){u=!1;break}if(u===!0)return!0}}if(_(t)||P(t)){let o=Nn(t,n.spatialReference);return o!==null&&(t=o.paths),Qe(t)}return!1})}}function Ke(a,i,n){if(n===void 0||+n==0)return Math[a](i);if(i=+i,n=+n,isNaN(i)||typeof n!="number"||n%1!=0)return NaN;let r=i.toString().split("e");return r=(i=Math[a](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function Ar(a,i){function n(r,s,c){let e=g(r);return isNaN(e)?e:isNaN(s)||isNaN(c)||s>c?NaN:e<s?s:e>c?c:e}a.number=function(r,s){return i(r,s,(c,e,t)=>{h(t,1,2,r,s);let o=t[0];if(G(o))return o;if(o===null)return 0;if(K(o)||T(o)||C(o))return o.toNumber();if(H(o))return Number(o);if(_(o))return NaN;if(o===""||o===void 0)return Number(o);if(E(o)){if(t[1]!==void 0){let l=_e(t[1],"\u2030","");return l=_e(l,"\xA4",""),gn(o,{pattern:l})}return Number(o.trim())}return Number(o)})},a.abs=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.abs(g(t[0]))))},a.acos=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.acos(g(t[0]))))},a.asin=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.asin(g(t[0]))))},a.atan=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.atan(g(t[0]))))},a.atan2=function(r,s){return i(r,s,(c,e,t)=>(h(t,2,2,r,s),Math.atan2(g(t[0]),g(t[1]))))},a.ceil=function(r,s){return i(r,s,(c,e,t)=>{if(h(t,1,2,r,s),t.length===2){let o=g(t[1]);return isNaN(o)&&(o=0),Ke("ceil",g(t[0]),-1*o)}return Math.ceil(g(t[0]))})},a.round=function(r,s){return i(r,s,(c,e,t)=>{if(h(t,1,2,r,s),t.length===2){let o=g(t[1]);return isNaN(o)&&(o=0),Ke("round",g(t[0]),-1*o)}return Math.round(g(t[0]))})},a.floor=function(r,s){return i(r,s,(c,e,t)=>{if(h(t,1,2,r,s),t.length===2){let o=g(t[1]);return isNaN(o)&&(o=0),Ke("floor",g(t[0]),-1*o)}return Math.floor(g(t[0]))})},a.cos=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.cos(g(t[0]))))},a.isnan=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),typeof t[0]=="number"&&isNaN(t[0])))},a.exp=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.exp(g(t[0]))))},a.log=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.log(g(t[0]))))},a.pow=function(r,s){return i(r,s,(c,e,t)=>(h(t,2,2,r,s),g(t[0])**g(t[1])))},a.random=function(r,s){return i(r,s,(c,e,t)=>(h(t,0,0,r,s),Math.random()))},a.sin=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.sin(g(t[0]))))},a.sqrt=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.sqrt(g(t[0]))))},a.tan=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),Math.tan(g(t[0]))))},a.isempty=function(r,s){return i(r,s,(c,e,t)=>(h(t,1,1,r,s),t[0]===null||t[0]===""||t[0]===void 0||t[0]===F))},a.boolean=function(r,s){return i(r,s,(c,e,t)=>{h(t,1,1,r,s);let o=t[0];return De(o)})},a.constrain=function(r,s){return i(r,s,(c,e,t)=>{h(t,3,3,r,s);let o=g(t[1]),l=g(t[2]);if(_(t[0])){let d=[];for(let u of t[0])d.push(n(u,o,l));return d}if(P(t[0])){let d=[];for(let u=0;u<t[0].length();u++)d.push(n(t[0].get(u),o,l));return d}return n(t[0],o,l)})}}function ue(a,i){if(i.length===1){if(_(i[0]))return ze(a,i[0],-1);if(P(i[0]))return ze(a,i[0].toArray(),-1)}return ze(a,i,-1)}function _r(a,i){a.stdev=function(n,r){return i(n,r,(s,c,e)=>ue("stdev",e))},a.variance=function(n,r){return i(n,r,(s,c,e)=>ue("variance",e))},a.average=function(n,r){return i(n,r,(s,c,e)=>ue("mean",e))},a.mean=function(n,r){return i(n,r,(s,c,e)=>ue("mean",e))},a.sum=function(n,r){return i(n,r,(s,c,e)=>ue("sum",e))},a.min=function(n,r){return i(n,r,(s,c,e)=>ue("min",e))},a.max=function(n,r){return i(n,r,(s,c,e)=>ue("max",e))},a.distinct=function(n,r){return i(n,r,(s,c,e)=>ue("distinct",e))},a.count=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),_(e[0])||E(e[0]))return e[0].length;if(P(e[0]))return e[0].length();throw new f(n,m.InvalidParameter,r)})}}var cn=a=>(i,n,r)=>(r=r||14,+a(i,n).toFixed(r)),ot=(a,i)=>a+i;var st=(a,i)=>a*i,ut=(a,i)=>a/i,jn=(a,i,n)=>cn(ot)(a,i,n);var ve=(a,i,n)=>cn(st)(a,i,n),He=(a,i,n)=>cn(ut)(a,i,n),Ge=360,ct=400,lt=2*Math.PI,X=3600,qn=3240,Oe=60,ce=60,Zn=180*X/Math.PI,Ee=Ge*Oe*ce,Ye=90*X,we=180*X,mt=270*X,Bn="\u1D4D",Fe="\xB0";function Pe(a){if(E(a)===!1)throw new f(null,m.InvalidParameter,null);return a}function rn(a,i){let n=10**i;return Math.round(a*n)/n}function ft(a,i){return a%i}function ye(a){let i=parseFloat(a.toString().replace(Math.trunc(a).toString(),"0"))*Math.sign(a);return a<0?{fraction:i,integer:Math.ceil(a)}:{fraction:i,integer:Math.floor(a)}}var k,y,S,an;function Ae(a,i){switch(a){case k.north:return i==="SHORT"?"N":"North";case k.east:return i==="SHORT"?"E":"East";case k.south:return i==="SHORT"?"S":"South";case k.west:return i==="SHORT"?"W":"West"}}function en(a,i){return a-Math.floor(a/i)*i}function nn(a){switch(a){case y.truncated_degrees:case y.decimal_degrees:return Ge;case y.radians:return lt;case y.gradians:return ct;case y.seconds:return Ee;case y.fractional_degree_minutes:return Oe;case y.fractional_minute_seconds:return ce;default:throw new f(null,m.LogicError,null,{reason:"unsupported evaluations"})}}function Hn(a){switch(a.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return S.north_azimuth;case"POLAR":return S.polar;case"QUADRANT":return S.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return S.south_azimuth}throw new f(null,m.LogicError,null,{reason:"unsupported directionType"})}function Gn(a){switch(a.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return y.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return y.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return y.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return y.gradians}throw new f(null,m.LogicError,null,{reason:"unsupported units"})}(function(a){a[a.north=0]="north",a[a.east=1]="east",a[a.south=2]="south",a[a.west=3]="west"})(k||(k={})),function(a){a[a.decimal_degrees=1]="decimal_degrees",a[a.seconds=2]="seconds",a[a.degrees_minutes_seconds=3]="degrees_minutes_seconds",a[a.radians=4]="radians",a[a.gradians=5]="gradians",a[a.truncated_degrees=6]="truncated_degrees",a[a.fractional_degree_minutes=7]="fractional_degree_minutes",a[a.fractional_minute_seconds=8]="fractional_minute_seconds"}(y||(y={})),function(a){a[a.north_azimuth=1]="north_azimuth",a[a.polar=2]="polar",a[a.quadrant=3]="quadrant",a[a.south_azimuth=4]="south_azimuth"}(S||(S={})),function(a){a[a.meridian=0]="meridian",a[a.direction=1]="direction"}(an||(an={}));var le=class a{constructor(i,n,r){this.m_degrees=i,this.m_minutes=n,this.m_seconds=r}getField(i){switch(i){case y.decimal_degrees:case y.truncated_degrees:return this.m_degrees;case y.fractional_degree_minutes:return this.m_minutes;case y.seconds:case y.fractional_minute_seconds:return this.m_seconds;default:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(i){let n=ye(i).fraction,r=ye(i).integer,s=Math.floor(r/X);r-=s*X;let c=Math.floor(r/ce);return r-=c*ce,new a(s,c,r+n)}static numberToDms(i){let n=ye(i).fraction,r=ye(i).integer,s=ve(ye(100*n).fraction,100),c=ye(100*n).integer;return new a(r,c,s)}format(i,n){let r=rn(this.m_seconds,n),s=this.m_minutes,c=this.m_degrees;if(i===y.seconds||i===y.fractional_minute_seconds)ce<=r&&(r-=ce,++s),Oe<=s&&(s=0,++c),Ge<=c&&(c=0);else if(i===y.fractional_degree_minutes)r=0,s=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,c=this.m_degrees,Oe<=s&&(s=0,++c),Ge<=c&&(c=0);else if(i===y.decimal_degrees||i===y.truncated_degrees){let e=He(this.m_seconds,X),t=He(this.m_minutes,Oe);c=Math.round(this.m_degrees+t+e),s=0,r=0}return new a(c,s,r)}static dmsToSeconds(i,n,r){return i*X+n*ce+r}},on=class{constructor(i,n,r){this.meridian=i,this.angle=n,this.direction=r}fetchAzimuth(i){return i===an.meridian?this.meridian:this.direction}},ee=class a{constructor(i){this._angle=i}static createFromAngleAndDirection(i,n){return new a(new W(a._convertDirectionFormat(i.extractAngularUnits(y.seconds),n,S.north_azimuth)))}getAngle(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:case S.south_azimuth:case S.polar:return new W(a._convertDirectionFormat(n,S.north_azimuth,i));case S.quadrant:{let r=a.secondsNorthAzimuthToQuadrant(n);return new W(r.angle)}}}getMeridian(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:return k.north;case S.south_azimuth:return k.south;case S.polar:return k.east;case S.quadrant:return a.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:return k.east;case S.south_azimuth:return k.west;case S.polar:return k.north;case S.quadrant:return a.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(i){let n=i<=Ye||i>=mt?k.north:k.south,r=n===k.north?Math.min(Ee-i,i):Math.abs(i-we),s=i>we?k.west:k.east;return new on(n,r,s)}static createFromAngleMeridianAndDirection(i,n,r){return new a(new W(a.secondsQuadrantToNorthAzimuth(i.extractAngularUnits(y.seconds),n,r)))}static secondsQuadrantToNorthAzimuth(i,n,r){return n===k.north?r===k.east?i:Ee-i:r===k.east?we-i:we+i}static _convertDirectionFormat(i,n,r){let s=0;switch(n){case S.north_azimuth:s=i;break;case S.polar:s=Ye-i;break;case S.quadrant:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"});case S.south_azimuth:s=i+we}let c=0;switch(r){case S.north_azimuth:c=s;break;case S.polar:c=Ye-s;break;case S.quadrant:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"});case S.south_azimuth:c=s-we}return c=ft(c,Ee),c<0?Ee+c:c}};function Jn(a,i,n){let r=null;switch(i){case y.decimal_degrees:r=ve(a,X);break;case y.seconds:r=a;break;case y.gradians:r=ve(a,qn);break;case y.radians:r=ve(a,Zn);break;default:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"})}switch(n){case y.decimal_degrees:return He(r,X);case y.seconds:return r;case y.gradians:return He(r,qn);case y.radians:return r/Zn;default:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"})}}var W=class a{constructor(i){this._seconds=i}static createFromAngleAndUnits(i,n){return new a(Jn(i,n,y.seconds))}extractAngularUnits(i){return Jn(this._seconds,y.seconds,Ce(i))}static createFromDegreesMinutesSeconds(i,n,r){return new a(jn(jn(ve(i,X),ve(n,ce)),r))}};function Ce(a){switch(ln(a),a){case y.decimal_degrees:case y.truncated_degrees:case y.degrees_minutes_seconds:return y.decimal_degrees;case y.gradians:return y.gradians;case y.fractional_degree_minutes:return y.fractional_degree_minutes;case y.radians:return y.radians;case y.seconds:case y.fractional_minute_seconds:return y.seconds}}var sn=class a{constructor(i,n,r,s){this.view=i,this.angle=n,this.merdian=r,this.direction=s,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(i,n,r){return new a(i,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let i=null,n=y.truncated_degrees,r=0;for(let s=0;s<this.view.length;s++){let c=this.view[s];switch(c){case"m":i=un(this.view,s,c),n=n===y.truncated_degrees?y.fractional_degree_minutes:n,s=i.newpos;continue;case"s":i=un(this.view,s,c),n=y.fractional_minute_seconds,r=r<i.rounding?i.rounding:r,s=i.newpos;continue;default:continue}}this._dms=le.secondsToDMS(this.angle.extractAngularUnits(y.seconds)),this._formattedDms=le.secondsToDMS(this.angle.extractAngularUnits(y.seconds)).format(n,r)}};function dt(a,i,n,r,s){let c=null;switch(i){case y.decimal_degrees:case y.radians:case y.gradians:return c=en(rn(a.extractAngularUnits(i),r),nn(i)),c.toFixed(r).padStart(n+r+(r>0?1:0),"0");case y.truncated_degrees:case y.fractional_degree_minutes:return c=en(s.fetchFormattedDms().getField(i),nn(i)),c.toFixed(r).padStart(n+r+(r>0?1:0),"0");case y.fractional_minute_seconds:return c=en(rn(s.fetchDms().getField(i),r),nn(i)),c.toFixed(r).padStart(n+r+(r>0?1:0),"0");default:throw new f(null,m.LogicError,null,{reason:"unexpected evaluation"})}}function ht(a,i,n){if(n===S.quadrant)throw new f(null,m.LogicError,null,{reason:"conversion error"});if(i===y.degrees_minutes_seconds){let r=le.numberToDms(a);return ee.createFromAngleAndDirection(W.createFromDegreesMinutesSeconds(r.m_degrees,r.m_minutes,r.m_seconds),n)}return ee.createFromAngleAndDirection(W.createFromAngleAndUnits(a,Ce(i)),n)}function pt(a){switch(g(a)){case 1:return{first:k.north,second:k.east};case 2:return{first:k.south,second:k.east};case 3:return{first:k.south,second:k.west};case 4:return{first:k.north,second:k.west}}return null}function Wn(a){switch(a.toUpperCase().trim()){case"N":case"NORTH":return k.north;case"E":case"EAST":return k.east;case"S":case"SOUTH":return k.south;case"W":case"WEST":return k.west}return null}function xe(a){let i=parseFloat(a);if(G(i)){if(isNaN(i))throw new f(null,m.LogicError,null,{reason:"invalid conversion"});return i}throw new f(null,m.LogicError,null,{reason:"invalid conversion"})}function tn(a,i,n){let r=n===S.quadrant,s=null,c=null,e=0,t=0,o=0;if(r){if(a.length<2)throw new f(null,m.LogicError,null,{reason:"conversion error"});o=1;let l=pt(v(a[a.length-1]));if(l?(s=l.first,c=l.second):(e=1,s=Wn(v(a[0])),c=Wn(v(a[a.length-1]))),s===null||c===null)throw new f(null,m.LogicError,null,{reason:"invalid conversion"})}switch(i){case y.decimal_degrees:case y.radians:case y.gradians:if(a.length===0)throw new f(null,m.LogicError,null,{reason:"invalid conversion"});return r?ee.createFromAngleMeridianAndDirection(W.createFromAngleAndUnits(xe(a[e]),Ce(i)),s,c):ee.createFromAngleAndDirection(W.createFromAngleAndUnits(xe(a[e]),Ce(i)),n);case y.degrees_minutes_seconds:if(t=a.length-o-e,t===3){let l=W.createFromDegreesMinutesSeconds(xe(a[e]),xe(a[e+1]),xe(a[e+2]));return r?ee.createFromAngleMeridianAndDirection(l,s,c):ee.createFromAngleAndDirection(l,n)}if(t===1){let l=xe(a[e]),d=le.numberToDms(l),u=W.createFromDegreesMinutesSeconds(d.m_degrees,d.m_minutes,d.m_seconds);return r?ee.createFromAngleMeridianAndDirection(u,s,c):ee.createFromAngleAndDirection(u,n)}}throw new f(null,m.LogicError,null,{reason:"invalid conversion"})}function gt(a){let i=new Set([" ","-","/","'",'"',"\\","^",Fe,Bn,"	","\r",`
`,"*"]),n="";for(let r=0;r<a.length;r++){let s=a.charAt(r);i.has(s)?n+="RRSPLITRRSPLITRR":n+=s}return n.split("RRSPLITRRSPLITRR").filter(r=>r!=="")}function wt(a,i,n){if(G(a))return ht(g(a),i,n);if(E(a))return tn(gt(a),i,n);if(_(a))return tn(a,i,n);if(P(a))return tn(a.toArray(),i,n);throw new f(null,m.LogicError,null,{reason:"conversion error"})}function yt(a,i,n){let r=Ce(n);if(r&&n!==y.degrees_minutes_seconds)return a.getAngle(i).extractAngularUnits(r);throw new f(null,m.LogicError,null,{reason:"conversion error"})}function xt(a,i,n){let r=a.getAngle(i);if(i===S.quadrant&&n===y.degrees_minutes_seconds){let s=le.secondsToDMS(r.extractAngularUnits(y.seconds));return[Ae(a.getMeridian(i),"SHORT"),s.m_degrees,s.m_minutes,s.m_seconds,Ae(a.getDirection(i),"SHORT")]}if(n===y.degrees_minutes_seconds){let s=le.secondsToDMS(r.extractAngularUnits(y.seconds));return[s.m_degrees,s.m_minutes,s.m_seconds]}return i===S.quadrant?[Ae(a.getMeridian(i),"SHORT"),r.extractAngularUnits(n),Ae(a.getDirection(i),"SHORT")]:[r.extractAngularUnits(n)]}function At(a,i){let n="";switch(a){case y.decimal_degrees:n=i===S.quadrant?"DD.DD"+Fe:"DDD.DD"+Fe;break;case y.degrees_minutes_seconds:n=i===S.quadrant?"dd"+Fe+` mm' ss"`:"ddd"+Fe+` mm' ss.ss"`;break;case y.radians:n="R.RR";break;case y.gradians:n="GGG.GG"+Bn;break;default:throw new f(null,m.LogicError,null,{reason:"conversion error"})}return i===S.quadrant&&(n="p "+n+" b"),n}function un(a,i,n){let r={padding:0,rounding:0,newpos:i},s=!1;for(;i<a.length;){let c=a[i];if(c===n)s?r.rounding++:r.padding++,i++;else{if(c!==".")break;s=!0,i++}}return r.newpos=i-1,r}function vt(a,i,n){let r={escaped:"",newpos:i};for(i++;i<a.length;){let s=a[i];if(i++,s==="]")break;r.escaped+=s}return r.newpos=i-1,r}function It(a,i,n){let r="",s=null,c=null,e=sn.createFromStringAndBearing(i,a,n),t={D:y.decimal_degrees,d:y.truncated_degrees,m:y.fractional_degree_minutes,s:y.fractional_minute_seconds,R:y.radians,G:y.gradians};for(let o=0;o<i.length;o++){let l=i[o];switch(l){case"[":s=vt(i,o),r+=s.escaped,o=s.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":s=un(i,o,l),c=a.getAngle(n),r+=dt(c,t[l],s.padding,s.rounding,e),o=s.newpos;continue;case"P":case"p":r+=Ae(e.fetchMeridian(),l==="p"?"SHORT":"LONG");continue;case"B":case"b":r+=Ae(e.fetchDirection(),l==="b"?"SHORT":"LONG");continue;default:r+=l}}return r}function Vn(a,i,n){if(!(i instanceof b))throw new f(null,m.InvalidParameter,null);if(i.hasField("directionType")===!1)throw new f(null,m.LogicError,null,{reason:"missing directionType"});if(i.hasField("angleType")===!1)throw new f(null,m.LogicError,null,{reason:"missing angleType"});let r=Hn(Pe(i.field("directiontype"))),s=wt(a,Gn(Pe(i.field("angletype"))),r);if(!(n instanceof b))throw new f(null,m.InvalidParameter,null);if(n.hasField("directionType")===!1)throw new f(null,m.LogicError,null,{reason:"missing directionType"});if(n.hasField("outputType")===!1)throw new f(null,m.LogicError,null,{reason:"missing angleType"});let c=Hn(Pe(n.field("directiontype"))),e=n.hasField("angleType")?Gn(Pe(n.field("angletype"))):null,t=Pe(n.field("outputType")).toUpperCase().trim();if(!c||!t)throw new f(null,m.LogicError,null,{reason:"conversion error"});if(!(e||t==="TEXT"&&n.hasField("format")))throw new f(null,m.LogicError,null,{reason:"invalid unit"});switch(t){case"VALUE":return c===S.quadrant||e===y.degrees_minutes_seconds?xt(s,c,e):yt(s,c,e);case"TEXT":{let o="";return n.hasField("format")&&(o=v(n.field("format"))),o!==null&&o!==""||(o=At(e,c)),It(s,o,c)}default:throw new f(null,m.InvalidParameter,null)}}function Xn(a){let i=[];for(let n=0,r=a.length;n<r;n++){let s=a.charCodeAt(n);s<128?i.push(s):s<2048?i.push(192|s>>6,128|63&s):s<55296||s>=57344?i.push(224|s>>12,128|s>>6&63,128|63&s):(n++,s=65536+((1023&s)<<10|1023&a.charCodeAt(n)),i.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return new Uint8Array(i)}var Je=class{constructor(i){this._seed=i,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(i){let n=[];for(let r of i)isNaN(r)?n.push("NaN"):r===1/0?n.push("Infinity"):r===-1/0?n.push("-Infinity"):r===0?n.push("0"):n.push(r.toString(16));this.update(Xn(n.join("")))}updateIntArray(i){let n=Int32Array.from(i);this.update(new Uint8Array(n.buffer))}updateUint8Array(i){this.update(Uint8Array.from(i))}updateWithString(i){return this.update(Xn(i))}update(i){return this._bufs.push(i),this._totallen+=i.length,this}digest(){let i=new Uint8Array(this._totallen),n=0;for(let r of this._bufs)i.set(r,n),n+=r.length;return this.init(),this._xxHash32(i,this._seed)}_xxHash32(i,n=0){let r=i,s=n+374761393&4294967295,c=0;if(r.length>=16){let t=[n+2654435761+2246822519&4294967295,n+2246822519&4294967295,n+0&4294967295,n-2654435761&4294967295],o=i,l=o.length-16,d=0;for(c=0;(4294967280&c)<=l;c+=4){let u=c,p=o[u]+(o[u+1]<<8),w=o[u+2]+(o[u+3]<<8),x=p*2246822519+(w*2246822519<<16),N=t[d]+x&4294967295;N=N<<13|N>>>19;let A=65535&N,D=N>>>16;t[d]=A*2654435761+(D*2654435761<<16)&4294967295,d=d+1&3}s=(t[0]<<1|t[0]>>>31)+(t[1]<<7|t[1]>>>25)+(t[2]<<12|t[2]>>>20)+(t[3]<<18|t[3]>>>14)&4294967295}s=s+i.length&4294967295;let e=i.length-4;for(;c<=e;c+=4){let t=c,o=r[t]+(r[t+1]<<8),l=r[t+2]+(r[t+3]<<8);s=s+(o*3266489917+(l*3266489917<<16))&4294967295,s=s<<17|s>>>15,s=(65535&s)*668265263+((s>>>16)*668265263<<16)&4294967295}for(;c<r.length;++c)s+=r[c]*374761393,s=s<<11|s>>>21,s=(65535&s)*2654435761+((s>>>16)*2654435761<<16)&4294967295;return s^=s>>>15,s=((65535&s)*2246822519&4294967295)+((s>>>16)*2246822519<<16),s^=s>>>13,s=((65535&s)*3266489917&4294967295)+((s>>>16)*3266489917<<16),s^=s>>>16,s<0?s+4294967296:s}};function Nt(a){return a.loadStatus==="loaded"&&a.user?.sourceJSON?a.user.sourceJSON:null}function bt(a,i){return!!a&&mn(a,i?.restUrl||"")}function Qn(a,i){if(!a||!i)return a===i;if(a.x===i.x&&a.y===i.y){if(a.hasZ){if(a.z!==i.z)return!1}else if(i.hasZ)return!1;if(a.hasM){if(a.m!==i.m)return!1}else if(i.hasM)return!1;return!0}return!1}function B(a,i,n){if(a!==null)if(_(a)){if(i.updateUint8Array([61]),n.map.has(a)){let r=n.map.get(a);i.updateIntArray([61237541^r])}else{n.map.set(a,n.currentLength++);for(let r of a)B(r,i,n);n.map.delete(a),n.currentLength--}i.updateUint8Array([199])}else if(P(a)){if(i.updateUint8Array([61]),n.map.has(a)){let r=n.map.get(a);i.updateIntArray([61237541^r])}else{n.map.set(a,n.currentLength++);for(let r of a.toArray())B(r,i,n);n.map.delete(a),n.currentLength--}i.updateUint8Array([199])}else{if(K(a))return i.updateIntArray([a.toNumber()]),void i.updateUint8Array([241]);if(C(a))return i.updateIntArray([a.toNumber()]),void i.updateIntArray([257]);if(T(a))return i.updateIntArray([a.toNumber()]),void i.updateIntArray([263]);if(E(a))return i.updateIntArray([a.length]),i.updateWithString(a),void i.updateUint8Array([41]);if(H(a))i.updateUint8Array([a===!0?1:0,113]);else{if(G(a))return i.updateFloatArray([a]),void i.updateUint8Array([173]);if(a instanceof On)throw new f(n.context,m.UnsupportedHashType,n.node);if(a instanceof je)throw new f(n.context,m.UnsupportedHashType,n.node);if(!(a instanceof b)){if(L(a))throw new f(n.context,m.UnsupportedHashType,n.node);if(a instanceof j)return i.updateIntArray([3833836621]),i.updateIntArray([0]),i.updateFloatArray([a.x]),i.updateIntArray([1]),i.updateFloatArray([a.y]),a.hasZ&&(i.updateIntArray([2]),i.updateFloatArray([a.z])),a.hasM&&(i.updateIntArray([3]),i.updateFloatArray([a.m])),i.updateIntArray([3765347959]),void B(a.spatialReference.wkid,i,n);if(a instanceof oe){i.updateIntArray([1266616829]);for(let r=0;r<a.rings.length;r++){let s=a.rings[r],c=[],e=null,t=null;for(let o=0;o<s.length;o++){let l=a.getPoint(r,o);if(o===0)e=l;else if(Qn(t,l))continue;t=l,o===s.length-1&&Qn(e,l)||c.push(l)}i.updateIntArray([1397116793,c.length]);for(let o=0;o<c.length;o++){let l=c[o];i.updateIntArray([3962308117,o]),B(l,i,n),i.updateIntArray([2716288009])}i.updateIntArray([2278822459])}return i.updateIntArray([3878477243]),void B(a.spatialReference.wkid,i,n)}if(a instanceof se){i.updateIntArray([4106883559]);for(let r=0;r<a.paths.length;r++){let s=a.paths[r];i.updateIntArray([1397116793,s.length]);for(let c=0;c<s.length;c++)i.updateIntArray([3962308117,c]),B(a.getPoint(r,c),i,n),i.updateIntArray([2716288009]);i.updateIntArray([2278822459])}return i.updateIntArray([2568784753]),void B(a.spatialReference.wkid,i,n)}if(a instanceof ie){i.updateIntArray([588535921,a.points.length]);for(let r=0;r<a.points.length;r++){let s=a.getPoint(r);i.updateIntArray([r]),B(s,i,n)}return i.updateIntArray([1700171621]),void B(a.spatialReference.wkid,i,n)}if(a instanceof Ne)return i.updateIntArray([3483648373]),i.updateIntArray([0]),i.updateFloatArray([a.xmax]),i.updateIntArray([1]),i.updateFloatArray([a.xmin]),i.updateIntArray([2]),i.updateFloatArray([a.ymax]),i.updateIntArray([3]),i.updateFloatArray([a.ymin]),a.hasZ&&(i.updateIntArray([4]),i.updateFloatArray([a.zmax]),i.updateIntArray([5]),i.updateFloatArray([a.zmin])),a.hasM&&(i.updateIntArray([6]),i.updateFloatArray([a.mmax]),i.updateIntArray([7]),i.updateFloatArray([a.mmin])),i.updateIntArray([3622027469]),void B(a.spatialReference.wkid,i,n);if(a instanceof dn)return i.updateIntArray([14]),a.wkid!==void 0&&a.wkid!==null&&i.updateIntArray([a.wkid]),a.wkt&&i.updateWithString(a.wkt),void(a.wkt2&&i.updateWithString(a.wkt2));throw fe(a)?new f(n.context,m.UnsupportedHashType,n.node):xn(a)?new f(n.context,m.UnsupportedHashType,n.node):vn(a)?new f(n.context,m.UnsupportedHashType,n.node):a===F?new f(n.context,m.UnsupportedHashType,n.node):new f(n.context,m.UnsupportedHashType,n.node)}if(i.updateUint8Array([223]),n.map.has(a)){let r=n.map.get(a);i.updateIntArray([61237541^r])}else{n.map.set(a,n.currentLength++);for(let r of a.keys())i.updateIntArray([r.length]),i.updateWithString(r),i.updateUint8Array([251]),B(a.field(r),i,n),i.updateUint8Array([239]);n.map.delete(a),n.currentLength--}i.updateUint8Array([73])}}else i.updateUint8Array([0,139])}function Qr(a,i){a.portal=function(n,r){return i(n,r,(s,c,e)=>(h(e,1,1,n,r),new je(v(e[0]))))},a.typeof=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=Le(e[0]);if(t==="Unrecognized Type")throw new f(n,m.UnrecognizedType,r);return t})},a.trim=function(n,r){return i(n,r,(s,c,e)=>(h(e,1,1,n,r),v(e[0]).trim()))},a.tohex=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=g(e[0]);return isNaN(t)?t:t.toString(16)})},a.upper=function(n,r){return i(n,r,(s,c,e)=>(h(e,1,1,n,r),v(e[0]).toUpperCase()))},a.proper=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,2,n,r);let t=1;e.length===2&&v(e[1]).toLowerCase()==="firstword"&&(t=2);let o=/\s/,l=v(e[0]),d="",u=!0;for(let p=0;p<l.length;p++){let w=l[p];o.test(w)?t===1&&(u=!0):w.toUpperCase()!==w.toLowerCase()&&(u?(w=w.toUpperCase(),u=!1):w=w.toLowerCase()),d+=w}return d})},a.lower=function(n,r){return i(n,r,(s,c,e)=>(h(e,1,1,n,r),v(e[0]).toLowerCase()))},a.guid=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,0,1,n,r),e.length>0)switch(v(e[0]).toLowerCase()){case"digits":return pe().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return pe();case"digits-hyphen-braces":return"{"+pe()+"}";case"digits-hyphen-parentheses":return"("+pe()+")"}return"{"+pe()+"}"})},a.standardizeguid=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,2,n,r);let t=v(e[0]);if(t===""||t===null)return"";let o=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(t);if(!o)return"";let l=o.groups;switch(t=l.partA+"-"+l.partB+"-"+l.partC+"-"+l.partD+"-"+l.partE,v(e[1]).toLowerCase()){case"digits":return t.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return t;case"digits-hyphen-braces":return"{"+t+"}";case"digits-hyphen-parentheses":return"("+t+")"}return"{"+t+"}"})},a.console=function(n,r){return i(n,r,(s,c,e)=>(e.length===0||(e.length===1?n.console(v(e[0])):n.console(v(e))),F))},a.mid=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,3,n,r);let t=g(e[1]);if(isNaN(t))return"";if(t<0&&(t=0),e.length===2)return v(e[0]).substr(t);let o=g(e[2]);return isNaN(o)?"":(o<0&&(o=0),v(e[0]).substr(t,o))})},a.find=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,3,n,r);let t=0;if(e.length>2){if(t=g(M(e[2],0)),isNaN(t))return-1;t<0&&(t=0)}return v(e[1]).indexOf(v(e[0]),t)})},a.left=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,2,n,r);let t=g(e[1]);return isNaN(t)?"":(t<0&&(t=0),v(e[0]).substr(0,t))})},a.right=function(n,r){return i(n,r,(s,c,e)=>{h(e,2,2,n,r);let t=g(e[1]);return isNaN(t)?"":(t<0&&(t=0),v(e[0]).substr(-1*t,t))})},a.split=function(n,r){return i(n,r,(s,c,e)=>{let t;h(e,2,4,n,r);let o=g(M(e[2],-1)),l=De(M(e[3],!1));if(o===-1||o===null||l===!0?t=v(e[0]).split(v(e[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),t=v(e[0]).split(v(e[1]),o)),l===!1)return t;let d=[];for(let u=0;u<t.length&&!(o!==-1&&d.length>=o);u++)t[u]!==""&&t[u]!==void 0&&d.push(t[u]);return d})},a.text=function(n,r){return i(n,r,(s,c,e)=>(h(e,1,2,n,r),Se(e[0],e[1])))},a.concatenate=function(n,r){return i(n,r,(s,c,e)=>{let t=[];if(e.length<1)return"";if(_(e[0])){let o=M(e[2],"");for(let l=0;l<e[0].length;l++)t[l]=Se(e[0][l],o);return e.length>1?t.join(e[1]):t.join("")}if(P(e[0])){let o=M(e[2],"");for(let l=0;l<e[0].length();l++)t[l]=Se(e[0].get(l),o);return e.length>1?t.join(e[1]):t.join("")}for(let o=0;o<e.length;o++)t[o]=Se(e[o]);return t.join("")})},a.reverse=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),_(e[0])){let t=e[0].slice(0);return t.reverse(),t}if(P(e[0])){let t=e[0].toArray().slice(0);return t.reverse(),t}throw new f(n,m.InvalidParameter,r)})},a.replace=function(n,r){return i(n,r,(s,c,e)=>{h(e,3,4,n,r);let t=v(e[0]),o=v(e[1]),l=v(e[2]);return e.length!==4||De(e[3])?_e(t,o,l):t.replace(o,l)})},a.schema=function(n,r){return i(n,r,(s,c,e)=>{if(L(e[0])){let t=Dn(e[0]);return t?b.convertObjectToArcadeDictionary(t,I(n)):null}throw new f(n,m.InvalidParameter,r)})},a.subtypes=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),L(e[0])){let t=Ue(e[0]);return t?b.convertObjectToArcadeDictionary(t,I(n)):null}throw new f(n,m.InvalidParameter,r)})},a.subtypecode=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),L(e[0])){let t=Ue(e[0]);if(!t)return null;if(t.subtypeField&&e[0].hasField(t.subtypeField)){let o=e[0].field(t.subtypeField);for(let l of t.subtypes)if(l.code===o)return l.code;return null}return null}throw new f(n,m.InvalidParameter,r)})},a.subtypename=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),L(e[0])){let t=Ue(e[0]);if(!t)return"";if(t.subtypeField&&e[0].hasField(t.subtypeField)){let o=e[0].field(t.subtypeField);for(let l of t.subtypes)if(l.code===o)return l.name;return""}return""}throw new f(n,m.InvalidParameter,r)})},a.gdbversion=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),L(e[0]))return e[0].gdbVersion();throw new f(n,m.InvalidParameter,r)})},a.domain=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,3,n,r),L(e[0])){let t=bn(e[0],v(e[1]),e[2]===void 0?void 0:e[2]);return t&&t.domain?t.domain.type==="coded-value"||t.domain.type==="codedValue"?b.convertObjectToArcadeDictionary({type:"codedValue",name:t.domain.name,dataType:Be[t.field.type],codedValues:t.domain.codedValues.map(o=>({name:o.name,code:o.code}))},I(n)):b.convertObjectToArcadeDictionary({type:"range",name:t.domain.name,dataType:Be[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},I(n)):null}throw new f(n,m.InvalidParameter,r)})},a.domainname=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,4,n,r),L(e[0]))return _n(e[0],v(e[1]),e[2],e[3]===void 0?void 0:e[3]);throw new f(n,m.InvalidParameter,r)})},a.domaincode=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,2,4,n,r),L(e[0]))return Sn(e[0],v(e[1]),e[2],e[3]===void 0?void 0:e[3]);throw new f(n,m.InvalidParameter,r)})},a.urlencode=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),e[0]===null)return"";if(e[0]instanceof b){let t="";for(let o of e[0].keys()){let l=e[0].field(o);t!==""&&(t+="&"),t+=l===null?encodeURIComponent(o)+"=":encodeURIComponent(o)+"="+encodeURIComponent(l)}return t}return encodeURIComponent(v(e[0]))})},a.hash=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,1,n,r);let t=new Je(0);return B(e[0],t,{context:n,node:r,map:new Map,currentLength:0}),t.digest()})},a.convertdirection=function(n,r){return i(n,r,(s,c,e)=>(h(e,3,3,n,r),Vn(e[0],e[1],e[2])))},a.fromjson=function(n,r){return i(n,r,(s,c,e)=>{if(h(e,1,1,n,r),E(e[0])===!1)throw new f(n,m.InvalidParameter,r);return b.convertJsonToArcade(JSON.parse(v(e[0])),I(n))})},a.expects=function(n,r){return i(n,r,(s,c,e)=>{if(e.length<1)throw new f(n,m.WrongNumberOfParameters,r);return F})},a.tocharcode=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,2,n,r);let t=g(M(e[1],0)),o=v(e[0]);if(o.length===0&&e.length===1)return null;if(o.length<=t||t<0)throw new f(n,m.OutOfBounds,r);return o.charCodeAt(t)})},a.tocodepoint=function(n,r){return i(n,r,(s,c,e)=>{h(e,1,2,n,r);let t=g(M(e[1],0)),o=v(e[0]);if(o.length===0&&e.length===1)return null;if(o.length<=t||t<0)throw new f(n,m.OutOfBounds,r);return o.codePointAt(t)})},a.fromcharcode=function(n,r){return i(n,r,(s,c,e)=>{if(e.length<1)throw new f(n,m.WrongNumberOfParameters,r);let t=e.map(o=>Math.trunc(g(o))).filter(o=>o>=0&&o<=65535);return t.length===0?null:String.fromCharCode.apply(null,t)})},a.fromcodepoint=function(n,r){return i(n,r,(s,c,e)=>{if(e.length<1)throw new f(n,m.WrongNumberOfParameters,r);let t;try{t=e.map(o=>Math.trunc(g(o))).filter(o=>o<=1114111&&o>>>0===o)}catch{return null}return t.length===0?null:String.fromCodePoint.apply(null,t)})},a.getuser=function(n,r){return i(n,r,(s,c,e)=>{h(e,0,2,n,r);let t=M(e[1],"");if(t=t===!0||t===!1?"":v(t),t!==null&&t!=="")return null;if(e.length===0||e[0]instanceof je){let o=null;if(o=n.services?.portal?n.services.portal:Cn.getDefault(),e.length>0&&!bt(e[0].field("url"),o)||!o)return null;if(t===""){let l=Nt(o);if(l){let d=JSON.parse(JSON.stringify(l));for(let u of["lastLogin","created","modified"])d[u]!==void 0&&d[u]!==null&&(d[u]=new Date(d[u]));return b.convertObjectToArcadeDictionary(d,I(n))}}return null}throw new f(n,m.InvalidParameter,r)})},a.getenvironment=function(n,r){return i(n,r,(s,c,e)=>(h(e,0,0,n,r),b.convertObjectToArcadeDictionary(Rn(I(n),n.spatialReference),I(n),!0)))}}export{Mn as a,$e as b,Tn as c,Ft as d,Yn as e,et as f,Ot as g,Ct as h,Mt as i,zn as j,Tt as k,Ht as l,Yt as m,gr as n,Ar as o,_r as p,Qr as q};
