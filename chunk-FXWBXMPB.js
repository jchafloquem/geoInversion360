import{a as F}from"./chunk-OCNYIIP3.js";import{b as xe,d as Ae}from"./chunk-GYYF3HMQ.js";import{c as Ce}from"./chunk-WMT47BMV.js";import{a as I,b as Fe,c as Y,h as H}from"./chunk-IBDPR46F.js";import{f as Ne}from"./chunk-IWJQ3PU6.js";import{a as z,o as j,p as q}from"./chunk-4HUAEW4D.js";import{g as Te}from"./chunk-XWRPBDYS.js";import{b as D,l as x,v as k}from"./chunk-SO6OJFOM.js";import{b as Se}from"./chunk-DG5QI6E2.js";import{d as G}from"./chunk-QYC4ILGT.js";import{a as se}from"./chunk-HFQFGALU.js";import{U as be}from"./chunk-BRGZVJPZ.js";import{w as ge}from"./chunk-JKP4I6UL.js";import{k as he,l as B}from"./chunk-BRWS572J.js";import{g as ae}from"./chunk-JEGVIFEP.js";var P=class{constructor(r){this.source=r}};var a;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(a||(a={}));var Ie={[a.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[a.LogicError]:"Logic error - {reason}",[a.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[a.NeverReach]:"Encountered unreachable logic",[a.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[a.ModuleAccessorMustBeString]:"Module accessor must be a string",[a.ModuleExportNotFound]:"Module has no export with provided identifier",[a.ModulesNotSupported]:"Current profile does not support modules",[a.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[a.FunctionNotFound]:"Function not found",[a.FieldNotFound]:"Key not found - {key}",[a.CircularModules]:"Circular module dependencies are not allowed",[a.Cancelled]:"Execution cancelled",[a.UnsupportedHashType]:"Type not supported in hash function",[a.IllegalResult]:"Value is not a supported return type",[a.PortalRequired]:"Portal is required",[a.InvalidParameter]:"Invalid parameter",[a.WrongNumberOfParameters]:"Call with wrong number of parameters",[a.Unrecognized]:"Unrecognized code structure",[a.UnrecognizedType]:"Unrecognized type",[a.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[a.BooleanConditionRequired]:"Conditions must use booleans",[a.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[a.NoFunctionInArray]:"Arrays cannot contain functions.",[a.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[a.KeyAccessorMustBeString]:"Accessor must be a string",[a.KeyMustBeString]:"Object keys must be a string",[a.Immutable]:"Object is immutable",[a.UnexpectedToken]:"Unexpected token",[a.MemberOfNull]:"Cannot access property of null object",[a.MaximumCallDepth]:"Exceeded maximum function depth",[a.OutOfBounds]:"Out of bounds",[a.InvalidIdentifier]:"Identifier not recognized",[a.CallNonFunction]:"Expression is not a function",[a.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[a.AssignModuleFunction]:"Cannot assign function to module variable",[a.UnsupportedUnaryOperator]:"Unsupported unary operator",[a.UnsupportedOperator]:"Unsupported operator",[a.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[a.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[a.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[a.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[a.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"},le=class extends Error{constructor(...r){super(...r)}},K=class e extends le{constructor(r,n){super(ue(n)+r.message,{cause:r}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,e),n?.loc&&(this.loc=n.loc)}},A=class e extends Error{constructor(r,n,t,o){super("Execution error - "+ue(t)+B(Ie[n],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}};function ue(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}var Me=class e extends Error{constructor(r,n,t,o){super("Compilation error - "+ue(t)+B(Ie[n],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}},Oe=class e extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function Rr(e,r,n){return n.declaredRootClass==="esri.arcade.arcadeexecutionerror"||n.declaredRootClass==="esri.arcade.arcadecompilationerror"?n.loc===null&&r?.loc?new K(n,{cause:n}):n:(n.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||n.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||n.declaredRootClass,r?.loc?new K(n,{cause:n}):n)}var V;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(V||(V={}));var Ve={[V.UnrecognizedUri]:"Unrecognized uri - {uri}",[V.UnsupportedUriProtocol]:"Unrecognized uri protocol"},De=class e extends Error{constructor(r,n){super(B(Ve[r],n)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};var v=class{constructor(){}};function ve(e,r,n){if(e instanceof v&&!(e instanceof _)){let t=new _;return t.fn=e,t.parameterEvaluator=n,t.context=r,t}return e}var Ee=class extends v{constructor(r){super(),this.fn=r}createFunction(r){return(...n)=>this.fn(r,{preparsed:!0,arguments:n})}call(r,n){return this.fn(r,n)}marshalledCall(r,n,t,o){return o(r,n,(s,f,i)=>{i=i.map(u=>u instanceof v&&!(u instanceof _)?ve(u,r,o):u);let c=this.call(t,{args:i});return ge(c)?c.then(u=>ve(u,t,o)):c})}},_=class extends v{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(r){return this.fn.createFunction(this.context)}call(r,n){return this.fn.marshalledCall(r,n,this.context,this.parameterEvaluator)}marshalledCall(r,n,t){return this.fn.marshalledCall(r,n,this.context,this.parameterEvaluator)}};var ke,Ze;function jr(e){return Ce.fromJSON(e.toJSON())}function Ge(e){return e.toJSON?e.toJSON():e}function qr(e){return typeof e=="string"||e instanceof String}function Yr(e){return typeof e=="number"}function Re(e){return e instanceof Date}function Hr(e){return e instanceof G}function we(e){return e instanceof I}function Kr(e){return e instanceof Y}function Vr(e){return e instanceof H}function Wr(e,r){return e===r||!(!Re(e)&&!we(e)||!Re(r)&&!we(r))&&e.getTime()===r.getTime()}function $r(e){if(e==null)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function Xr(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new k({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Qr(e){if(e==null)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(ke||(ke={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(Ze||(Ze={}));var en=1e3;var rn={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},ce={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},nn={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function tn(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function on(e,r){r||(r={}),typeof r=="function"&&(r={cmp:r});let n=typeof r.cycles=="boolean"&&r.cycles,t=r.cmp&&(o=r.cmp,function(f){return function(i,c){let u={key:i,value:f[i]},h={key:c,value:f[c]};return o(u,h)}});var o;let s=[];return function f(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let c,u;if(Array.isArray(i)){for(u="[",c=0;c<i.length;c++)c&&(u+=","),u+=f(i[c])||"null";return u+"]"}if(i===null)return"null";if(s.includes(i)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}let h=s.push(i)-1,N=Object.keys(i).sort(t?.(i));for(u="",c=0;c<N.length;c++){let R=N[c],w=f(i[R]);w&&(u&&(u+=","),u+=JSON.stringify(R)+":"+w)}return s.splice(h,1),"{"+u+"}"}(e)}function We(e){switch(e.type){case"catalog":case"feature":case"oriented-imagery":case"subtype-group":return!0;default:return!1}}function an(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return We(e)}}var M=class e extends F{constructor(r,n,t,o,s,f){super(r),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=n,this._hasZ=t,this._hasM=o,this._cacheId=s,this._partId=f}get(r){if(this._lazyPt[r]===void 0){let n=this._elements[r];if(n===void 0)return;let t=this._hasZ,o=this._hasM,s;s=t&&!o?new x(n[0],n[1],n[2],void 0,this._spRef):o&&!t?new x(n[0],n[1],void 0,n[2],this._spRef):t&&o?new x(n[0],n[1],n[2],n[3],this._spRef):new x(n[0],n[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+r.toString(),this._lazyPt[r]=s}return this._lazyPt[r]}equalityTest(r){return r===this||r!==null&&r instanceof e&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};var W=class e extends F{constructor(r,n,t,o,s){super(r),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=t,this._hasM=o,this._spRef=n,this._cacheId=s}get(r){if(this._lazyPath[r]===void 0){let n=this._elements[r];if(n===void 0)return;this._lazyPath[r]=new M(n,this._spRef,this._hasZ,this._hasM,this._cacheId,r)}return this._lazyPath[r]}equalityTest(r){return r===this||r!==null&&r instanceof e&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}};var X=class{constructor(r){this.value=r}},Q=class{constructor(r){this.value=r}},$e=Q,Xe=X,b={type:"VOID"},Qe={type:"BREAK"},er={type:"CONTINUE"};function U(e,r,n){return r===""||r==null||r===n||r===n?e:e=e.split(r).join(n)}function te(e){return e instanceof v}function me(e){return e instanceof P}function ee(e){return!!g(e)||!!T(e)||!!p(e)||!!m(e)||!!y(e)||!!S(e)||e===null||e===b||typeof e=="number"}function rr(e,r){return e===void 0?r:e}function nr(e){return e==null?"":C(e)||E(e)?"Array":p(e)?"Date":y(e)?"Time":m(e)?"DateOnly":g(e)?"String":S(e)?"Boolean":T(e)?"Number":e?.declaredClass==="esri.arcade.Attachment"?"Attachment":e?.declaredClass==="esri.arcade.Portal"?"Portal":e?.declaredClass==="esri.arcade.Dictionary"?"Dictionary":Je(e)?"KnowledgeGraph":e instanceof P?"Module":_e(e)?"Feature":e instanceof x?"Point":e instanceof j?"Polygon":e instanceof q?"Polyline":e instanceof z?"Multipoint":e instanceof k?"Extent":te(e)?"Function":Ue(e)?"FeatureSet":Le(e)?"FeatureSetCollection":e===b?"":typeof e=="number"&&isNaN(e)?"Number":"Unrecognized Type"}function g(e){return typeof e=="string"||e instanceof String}function S(e){return typeof e=="boolean"}function T(e){return typeof e=="number"}function tr(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function or(e){return e instanceof D}function C(e){return Array.isArray(e)}function _e(e){return e?.arcadeDeclaredClass==="esri.arcade.Feature"}function Ue(e){return e?.declaredRootClass==="esri.arcade.featureset.support.FeatureSet"}function ir(e){return e?.declaredClass==="esri.arcade.Dictionary"}function Le(e){return e?.declaredRootClass==="esri.arcade.featureSetCollection"}function Je(e){return e?.declaredClass==="esri.rest.knowledgeGraph.KnowledgeGraph"}function E(e){return e instanceof F}function p(e){return e instanceof I}function m(e){return e instanceof Y}function y(e){return e instanceof H}function de(e){return e!=null&&typeof e=="object"}function re(e){return e instanceof Date}function ar(e,r,n,t,o){if(e.length<r||e.length>n)throw new A(t,a.WrongNumberOfParameters,o)}function sr(e){return e<0?-Math.round(-e):Math.round(e)}function ye(e,r){return isNaN(e)||r==null||r===""?e.toString():(r=U(r,"\u2030",""),r=U(r,"\xA4",""),xe(e,{pattern:r}))}function oe(e,r){return r==null||r===""?e.toISOString(!0):e.toFormat(Be(r),{locale:se(),numberingSystem:"latn"})}function Be(e,r=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let n="",t=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(let o of e.match(t)||[])switch(o){case"D":n+="d";break;case"DD":n+="dd";break;case"DDD":n+="o";break;case"d":n+="c";break;case"ddd":n+="ccc";break;case"dddd":n+="cccc";break;case"M":n+="L";break;case"MM":n+="LL";break;case"MMM":n+="LLL";break;case"MMMM":n+="LLLL";break;case"YY":n+="yy";break;case"Y":case"YYYY":n+="yyyy";break;case"Q":n+="q";break;case"Z":n+="Z";break;case"ZZ":n+="ZZ";break;case"ZZZ":n+="ZZZ";break;case"ZZZZ":n+=r?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":n+=r?"[ZZZZZ]":"ZZZZZ";break;case"S":n+="'S'";break;case"SS":n+="'SS'";break;case"SSS":n+="u";break;case"A":case"a":n+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":n+=o;break;default:o.length>=2&&o.slice(0,1)==="["&&o.slice(-1)==="]"?n+=`'${o.slice(1,-1)}'`:n+=`'${o}'`}return n}function l(e,r,n){switch(n){case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}return!1}function lr(e,r,n){if(e===null){if(r===null||r===b)return l(null,null,n);if(T(r))return l(0,r,n);if(g(r)||S(r))return l(0,d(r),n);if(p(r))return l(0,r.toNumber(),n);if(y(r)||m(r))return l(e,r.toNumber(),n)}if(e===b){if(r===null||r===b)return l(null,null,n);if(T(r))return l(0,r,n);if(g(r)||S(r))return l(0,d(r),n);if(p(r))return l(0,r.toNumber(),n);if(y(r)||m(r))return l(e,r.toNumber(),n)}else if(T(e)){if(T(r))return l(e,r,n);if(S(r))return l(e,d(r),n);if(r===null||r===b)return l(e,0,n);if(g(r))return l(e,d(r),n);if(p(r)||y(r)||m(r))return l(e,r.toNumber(),n)}else if(g(e)){if(g(r))return l(O(e),O(r),n);if(p(r)||y(r)||m(r))return l(d(e),r.toNumber(),n);if(T(r))return l(d(e),r,n);if(r===null||r===b)return l(d(e),0,n);if(S(r))return l(d(e),d(r),n)}else if(p(e)){if(p(r))return e.timeZone!==r.timeZone&&(e.isUnknownTimeZone?e=I.arcadeDateAndZoneToArcadeDate(e,r.timeZone):r.isUnknownTimeZone&&(r=I.arcadeDateAndZoneToArcadeDate(r,e.timeZone))),l(e.toNumber(),r.toNumber(),n);if(r===null||r===b)return l(e.toNumber(),0,n);if(T(r))return l(e.toNumber(),r,n);if(S(r)||g(r))return l(e.toNumber(),d(r),n);if(y(r))throw new A(null,a.CannotCompareDateAndTime,null);if(m(r))return l(e.toNumber(),r.toNumber(),n)}else if(S(e)){if(S(r))return l(e,r,n);if(T(r))return l(d(e),d(r),n);if(p(r)||y(r)||m(r))return l(d(e),r.toNumber(),n);if(r===null||r===b)return l(d(e),0,n);if(g(r))return l(d(e),d(r),n)}else if(m(e)){if(p(r))return l(e.toNumber(),r.toNumber(),n);if(r===null||r===b)return l(e.toNumber(),0,n);if(T(r))return l(e.toNumber(),r,n);if(S(r)||g(r))return l(e.toNumber(),d(r),n);if(y(r))throw new A(null,a.CannotCompareDateAndTime,null);if(m(r))return l(e.toNumber(),r.toNumber(),n)}else if(y(e)){if(p(r))throw new A(null,a.CannotCompareDateAndTime,null);if(r===null||r===b)return l(e.toNumber(),0,n);if(T(r))return l(e.toNumber(),r,n);if(S(r)||g(r))return l(e.toNumber(),d(r),n);if(y(r))return l(e.toNumber(),r.toNumber(),n);if(m(r))throw new A(null,a.CannotCompareDateAndTime,null)}return!!ze(e,r)&&(n==="<="||n===">=")}function ze(e,r){if(e===r||e===null&&r===b||r===null&&e===b)return!0;if(p(e)&&p(r)||y(e)&&y(r)||m(e)&&m(r))return e.equals(r);if(e instanceof W||e instanceof M)return e.equalityTest(r);if(e instanceof x&&r instanceof x){let n=e.cache._arcadeCacheId,t=r.cache._arcadeCacheId;if(n!=null)return n===t}return!!(de(e)&&de(r)&&(e._arcadeCacheId===r._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===r._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function O(e,r){if(g(e))return e;if(e===null)return"";if(T(e))return ye(e,r);if(S(e))return e.toString();if(p(e))return oe(e,r);if(y(e)||m(e))return e.toFormat(r);if(e instanceof D)return JSON.stringify(e.toJSON());if(C(e)){let n=[];for(let t=0;t<e.length;t++)n[t]=ne(e[t]);return"["+n.join(",")+"]"}if(e instanceof F){let n=[];for(let t=0;t<e.length();t++)n[t]=ne(e.get(t));return"["+n.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():te(e)?"object, Function":e===b?"":me(e)?"object, Module":""}function ur(e){let r=[];if(!C(e))return null;if(e instanceof F){for(let n=0;n<e.length();n++)r[n]=d(e.get(n));return r}for(let n=0;n<e.length;n++)r[n]=d(e[n]);return r}function $(e,r,n=!1){if(g(e))return e;if(e===null)return"";if(T(e))return ye(e,r);if(S(e))return e.toString();if(p(e))return oe(e,r);if(y(e)||m(e))return e.toFormat(r);if(e instanceof D)return e instanceof k?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+pe(e.spatialReference)+"}":pe(e.toJSON(),(t,o)=>t.key===o.key?0:t.key==="spatialReference"?1:o.key==="spatialReference"||t.key<o.key?-1:t.key>o.key?1:0);if(C(e)){let t=[];for(let o=0;o<e.length;o++)t[o]=ne(e[o],n);return"["+t.join(",")+"]"}if(e instanceof F){let t=[];for(let o=0;o<e.length();o++)t[o]=ne(e.get(o),n);return"["+t.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText(n):te(e)?"object, Function":e===b?"":me(e)?"object, Module":""}function ne(e,r=!1){if(e===null)return"null";if(S(e)||T(e)||g(e))return JSON.stringify(e);if(e instanceof D||e instanceof F||Array.isArray(e))return $(e,null,r);if(p(e))return JSON.stringify(r?e.getTime():oe(e,""));if(y(e)||m(e))return JSON.stringify(e.toString());if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText(r)}else if(e===b)return"null";return"null"}function d(e,r){return T(e)?e:e===null||e===""?0:p(e)||m(e)||y(e)?NaN:S(e)?e?1:0:C(e)||e===""||e===void 0?NaN:r!==void 0&&g(e)?(r=U(r,"\u2030",""),r=U(r,"\xA4",""),Ae(e,{pattern:r})):e===b?0:Number(e)}function cr(e,r){if(p(e))return e;if(g(e)){let n=fr(e,r);if(n)return I.dateTimeToArcadeDate(n)}return null}function fr(e,r){let n=/ (\d\d)/,t=Fe(r),o=G.fromISO(e,{zone:t});return o.isValid||n.test(e)&&(e=e.replace(n,"T$1"),o=G.fromISO(e,{zone:r}),o.isValid)?o:null}function dr(e){return S(e)?e:g(e)?(e=e.toLowerCase())==="true":!!T(e)&&e!==0&&!isNaN(e)}function pr(e,r){let n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=r),Ne(n)}function mr(e,r){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=r),e)}function yr(e){if(e===null)return null;if(e instanceof x)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof j){if(e.rings.length===0)return null;for(let r of e.rings)if(r.length>0)return e;return null}if(e instanceof q){if(e.paths.length===0)return null;for(let r of e.paths)if(r.length>0)return e;return null}return e instanceof z?e.points.length===0?null:e:e instanceof k?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function je(e,r){if(!e||!e.domain)return r;let n=null,t=null;if(p(r))n=r.toNumber();else if(m(r))n=r.toString();else if(y(r))n=r.toStorageString();else if(e.field.type==="string"||e.field.type==="esriFieldTypeString")n=O(r);else{if(r==null)return null;if(r==="")return r;n=d(r)}for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.code===n&&(t=s)}return t===null?O(r):t.name}function qe(e,r){if(!e||!e.domain)return r;let n=null,t=O(r);for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.name===t&&(n=s)}return n===null?r:n.code}function ie(e,r,n=null,t=null){if(!r||!r.fields)return null;let o,s,f=null;for(let h=0;h<r.fields.length;h++){let N=r.fields[h];N.name.toLowerCase()===e.toString().toLowerCase()&&(f=N)}if(f===null)throw new A(null,a.FieldNotFound,null,{key:e});let i=r.typeIdField,c="id",u=r.types;if(r.subtypeField&&(i=r.subtypeField,c="code",u=r.subtypes??[]),t===null&&n&&i)t=n.hasField(i)?n.field(i):null;else if(i&&t!==null){let h=!1;for(let N of u||[])if(t===N[c]){h=!0;break}if(!h){for(let N of u||[])if(t===N.name){t=N[c],h=!0;break}}h||(t=null,n&&i&&(t=n.hasField(i)?n.field(i):null))}return t!=null&&u.some(h=>h[c]===t&&(o=h.domains?.[f.name],o&&o.type==="inherited"&&(o=Pe(f.name,r),s=!0),!0)),s||o||(o=Pe(e,r)),{field:f,domain:o}}function Pe(e,r){let n;return r.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n)),n}function pe(e,r){r||(r={}),typeof r=="function"&&(r={cmp:r});let n=typeof r.cycles=="boolean"&&r.cycles,t=r.cmp&&(o=r.cmp,function(f){return function(i,c){let u={key:i,value:f[i]},h={key:c,value:f[c]};return o(u,h)}});var o;let s=[];return function f(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let c,u;if(Array.isArray(i)){for(u="[",c=0;c<i.length;c++)c&&(u+=","),u+=f(i[c])||"null";return u+"]"}if(i===null)return"null";if(s.includes(i)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}let h=s.push(i)-1,N=Object.keys(i).sort(t?.(i));for(u="",c=0;c<N.length;c++){let R=N[c],w=f(i[R]);w&&(u&&(u+=","),u+=JSON.stringify(R)+":"+w)}return s.splice(h,1),"{"+u+"}"}(e)}function hr(e){if(e===null)return null;let r=[];for(let n of e)n?.arcadeDeclaredClass&&n.arcadeDeclaredClass==="esri.arcade.Feature"?r.push(n.geometry()):r.push(n);return r}function Z(e,r){if(!(r instanceof x))throw new A(null,a.InvalidParameter,null);e.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}function gr(e,r){if(C(e)||E(e)){let n=!1,t=!1,o=[],s=r;if(C(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ,t=e[0].hasM)}else if(e instanceof M)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else{if(!E(e))throw new A(null,a.InvalidParameter,null);for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:(Te(o)||(o=o.slice(0).reverse()),new j({rings:[o],spatialReference:s,hasZ:n,hasM:t}))}return e}function br(e,r){if(C(e)||E(e)){let n=!1,t=!1,o=[],s=r;if(C(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof M)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(E(e)){for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new q({paths:[o],spatialReference:s,hasZ:n,hasM:t})}return e}function Sr(e,r){if(C(e)||E(e)){let n=!1,t=!1,o=[],s=r;if(C(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof M)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(E(e)){for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new z({points:o,spatialReference:s,hasZ:n,hasM:t})}return e}function Tr(e,r=!1){let n=[];if(e===null)return n;if(C(e)===!0){for(let t=0;t<e.length;t++){let o=O(e[t]);o===""&&r!==!0||n.push(o)}return n}if(e instanceof F){for(let t=0;t<e.length();t++){let o=O(e.get(t));o===""&&r!==!0||n.push(o)}return n}if(ee(e)){let t=O(e);return t===""&&r!==!0||n.push(t),n}return[]}var fe=0;function Nr(e){return fe++,fe%100==0?(fe=0,new Promise(r=>{setTimeout(()=>{r(e)},0)})):e}function Fr(e,r,n){switch(n){case"&":return e&r;case"|":return e|r;case"^":return e^r;case"<<":return e<<r;case">>":return e>>r;case">>>":return e>>>r}}function L(e,r=null){return e==null?null:S(e)||T(e)||g(e)?e:e instanceof D?r?.keepGeometryType===!0?e:e.toJSON():e instanceof F?e.toArray().map(n=>L(n,r)):Array.isArray(e)?e.map(n=>L(n,r)):re(e)?e:p(e)?e.toJSDate():y(e)?e.toString():m(e)?e.toJSDate():e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(r):null}function Cr(e,r,n,t,o){return ae(this,null,function*(){let s=yield Ye(e,r,n);o[t]=s})}function Ye(e,r=null,n=null){return ae(this,null,function*(){if(e instanceof F&&(e=e.toArray()),e==null)return null;if(ee(e)||e instanceof D||re(e)||p(e))return L(e,n);if(Array.isArray(e)){let t=[],o=[];for(let s of e)s===null||ee(s)||s instanceof D||re(s)||p(s)?o.push(L(s,n)):(o.push(null),t.push(Cr(s,r,n,o.length-1,o)));return t.length>0&&(yield Promise.all(t)),o}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(r,n):null})}function J(e){return He(e)?e.parent:e}function He(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.support.SubtypeSublayer"}function xr(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.SubtypeGroupLayer"}function Ar(e,r,n){let t=J(e.fullSchema());return t===null||!t.fields?null:ie(r,t,e,n)}function Mr(e){let r=J(e.fullSchema());return r===null?null:r.fields?r.subtypeField?{subtypeField:r.subtypeField,subtypes:r.subtypes?r.subtypes.map(n=>({name:n.name,code:n.code})):[]}:r.typeIdField?{subtypeField:r.typeIdField,subtypes:r.types?r.types.map(n=>({name:n.name,code:n.id})):[]}:null:null}function Or(e,r,n,t){let o=J(e.fullSchema());if(o===null||!o.fields)return null;let s=ie(r,o,e,t);if(n===void 0)try{n=e.field(r)}catch{return null}return je(s,n)}function Dr(e,r,n,t){let o=J(e.fullSchema());if(o===null||!o.fields)return null;if(n===void 0){try{n=e.field(r)}catch{return null}return n}return qe(ie(r,o,e,t),n)}function Ir(e){return e?.timeZone??"system"}function vr(e){let r=J(e.fullSchema());if(r===null||!r.fields)return null;let n=[];for(let t of r.fields)n.push(Ge(t));return{objectIdField:r.objectIdField,globalIdField:r.globalIdField??"",geometryType:ce[r.geometryType]===void 0?"":ce[r.geometryType],fields:n}}function Er(e,r){return e==="system"&&(e=I.systemTimeZoneCanonicalName),{version:Ke,engineVersion:be,timeZone:e,spatialReference:r instanceof Se?r.toJSON():r,application:he.applicationName??"",engine:"web",locale:se()}}var Ke="1.24",_n=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:Q,ReturnResultE:X,absRound:sr,arcadeVersion:Ke,autoCastArrayOfPointsToMultiPoint:Sr,autoCastArrayOfPointsToPolygon:gr,autoCastArrayOfPointsToPolyline:br,autoCastFeatureToGeometry:hr,binaryOperator:Fr,breakResult:Qe,castAsJson:L,castAsJsonAsync:Ye,continueResult:er,defaultExecutingContext:Er,defaultTimeZone:Ir,defaultUndefined:rr,equalityTest:ze,featureDomainCodeLookup:Dr,featureDomainValueLookup:Or,featureFullDomain:Ar,featureSchema:vr,featureSubtypes:Mr,fixNullGeometry:yr,fixSpatialReference:mr,formatDate:oe,formatNumber:ye,getDomain:ie,getDomainCode:qe,getDomainValue:je,getType:nr,greaterThanLessThan:lr,implicitResult:$e,isArray:C,isBoolean:S,isDate:p,isDateOnly:m,isDictionary:ir,isFeature:_e,isFeatureSet:Ue,isFeatureSetCollection:Le,isFunctionParameter:te,isGeometry:or,isImmutableArray:E,isInteger:tr,isJsDate:re,isKnowledgeGraph:Je,isModule:me,isNumber:T,isObject:de,isSimpleType:ee,isString:g,isSubtypeGrouplayer:xr,isSubtypeSublayer:He,isTime:y,multiReplace:U,parseGeometryFromJson:pr,pcCheck:ar,returnResult:Xe,stableStringify:pe,standardiseDateFormat:Be,tick:Nr,toBoolean:dr,toDate:cr,toNumber:d,toNumberArray:ur,toString:O,toStringArray:Tr,toStringExplicit:$,voidOperation:b},Symbol.toStringTag,{value:"Module"}));export{P as a,a as b,A as c,Me as d,Oe as e,Rr as f,V as g,De as h,v as i,ve as j,Ee as k,_ as l,M as m,W as n,ke as o,Ze as p,jr as q,Ge as r,qr as s,Yr as t,Re as u,Hr as v,we as w,Kr as x,Vr as y,Wr as z,$r as A,Xr as B,Qr as C,en as D,rn as E,ce as F,nn as G,tn as H,on as I,We as J,an as K,$e as L,Xe as M,b as N,Qe as O,er as P,U as Q,te as R,ee as S,rr as T,nr as U,g as V,S as W,T as X,tr as Y,or as Z,C as _,_e as $,Ue as aa,ir as ba,Le as ca,Je as da,E as ea,p as fa,m as ga,y as ha,re as ia,ar as ja,sr as ka,Be as la,lr as ma,ze as na,O as oa,ur as pa,$ as qa,d as ra,cr as sa,dr as ta,mr as ua,yr as va,je as wa,qe as xa,ie as ya,hr as za,gr as Aa,br as Ba,Sr as Ca,Tr as Da,Nr as Ea,Fr as Fa,L as Ga,Ye as Ha,He as Ia,Ar as Ja,Mr as Ka,Or as La,Dr as Ma,Ir as Na,vr as Oa,Er as Pa,_n as Qa};
