import{A as g,aa as u,d as y}from"./chunk-BRGZVJPZ.js";import{p as w}from"./chunk-JKP4I6UL.js";import{s as d}from"./chunk-BRWS572J.js";import{a as f,b as p,g as s}from"./chunk-JEGVIFEP.js";var n=null,c=!0;function E(e,a,t){if(!e||!a)throw new Error("Cannot construct image data without dimensions");if(c)try{return new ImageData(e,a)}catch{c=!1}return h(e,a,t)}function L(e,a,t,r){if(!a||!t)throw new Error("Cannot construct image data without dimensions");if(c)try{return new ImageData(e,a,t)}catch{c=!1}let i=h(a,t,r);return i.data.set(e,0),i}function l(){return n||(n=document.createElement("canvas"),n.width=1,n.height=1),n}function h(e,a,t){return t||(t=l()),t.getContext("2d").createImageData(e,a)}function T(e,a){return s(this,null,function*(){let t=window.URL.createObjectURL(e);try{let{data:r}=yield u(t,p(f({},a),{responseType:"image"}));return r}catch(r){throw w(r)?r:new d("invalid-image",`Could not fetch requested image at ${t}`)}finally{window.URL.revokeObjectURL(t)}})}function R(e,a){return s(this,null,function*(){let{arrayBuffer:t,mediaType:r}=yield I(e,a),i=r==="image/png";if(r==="image/gif"){let{isAnimatedGIF:o,parseGif:m}=yield import("./chunk-KG2LHG34.js");if(o(t))return m(t,a)}if(i){let{isAnimatedPNG:o,parseApng:m}=yield import("./chunk-4GNPHVHW.js");if(o(t))return m(t,a)}return T(new Blob([t],{type:r}),a)})}function I(e,a){return s(this,null,function*(){let t=g(e);if(t?.isBase64)return{arrayBuffer:y(t.data),mediaType:t.mediaType};let r=yield u(e,f({responseType:"array-buffer"},a));return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}})}export{E as a,L as b,R as c};
