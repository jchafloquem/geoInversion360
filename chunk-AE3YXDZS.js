import{b as g}from"./chunk-GEIGRTSS.js";import{i as C,j as h,w as v}from"./chunk-P454QITB.js";import{g as L}from"./chunk-JEGVIFEP.js";var w="calciteInternalLabelClick",E="calciteInternalLabelConnected",f="calciteInternalLabelDisconnected",k="calcite-label",r=new WeakMap,i=new WeakMap,c=new WeakMap,d=new WeakMap,s=new Set,D=e=>{let{id:t}=e,l=t&&C(e,{selector:`${k}[for="${t}"]`});if(l)return l;let a=h(e,k);return!a||O(a,e)?null:a};function O(e,t){let l,a="custom-element-ancestor-check",o=n=>{n.stopImmediatePropagation();let u=n.composedPath();l=u.slice(u.indexOf(t),u.indexOf(e))};return e.addEventListener(a,o,{once:!0}),t.dispatchEvent(new CustomEvent(a,{composed:!0,bubbles:!0})),e.removeEventListener(a,o),l.filter(n=>n!==t&&n!==e).filter(n=>n.tagName?.includes("-")).length>0}function y(e){if(!e)return;let t=D(e.el);if(i.has(t)&&t===e.labelEl||!t&&s.has(e))return;let l=T.bind(e);if(t){e.labelEl=t;let a=r.get(t)||[];a.push(e),r.set(t,a.sort(M)),i.has(e.labelEl)||(i.set(e.labelEl,m),e.labelEl.addEventListener(w,m)),s.delete(e),document.removeEventListener(E,c.get(e)),d.set(e,l),document.addEventListener(f,l)}else s.has(e)||(l(),document.removeEventListener(f,d.get(e)))}function W(e){if(!e||(s.delete(e),document.removeEventListener(E,c.get(e)),document.removeEventListener(f,d.get(e)),c.delete(e),d.delete(e),!e.labelEl))return;let t=r.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(w,i.get(e.labelEl)),i.delete(e.labelEl)),r.set(e.labelEl,t.filter(l=>l!==e).sort(M)),e.labelEl=null}function M(e,t){return v(e.el,t.el)?-1:1}function q(e){return e.label||e.labelEl?.textContent?.trim()||""}function m(e){let t=e.detail.sourceEvent.target,l=r.get(this),a=l.find(n=>n.el===t);if(l.includes(a))return;let b=l[0];b.disabled||b.onLabelClick(e)}function x(){s.has(this)&&y(this)}function T(){s.add(this);let e=c.get(this)||x.bind(this);c.set(this,e),document.addEventListener(E,e)}function A(e){return L(this,null,function*(){if(yield g(e),r.has(e))return;let l=e.ownerDocument?.getElementById(e.for);l&&requestAnimationFrame(()=>{for(let a of s)if(a.el===l){y(a);break}})})}export{E as a,f as b,y as c,W as d,q as e,A as f};
