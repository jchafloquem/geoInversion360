import{a as n}from"./chunk-XTPX7UEA.js";import{i as v,j as f}from"./chunk-VBEIMRVI.js";import"./chunk-U5TFOFQK.js";import"./chunk-FQTXYWH5.js";import"./chunk-KLXERNY4.js";import"./chunk-IEUO5FDE.js";import{b as p}from"./chunk-G5XYT3EB.js";import{a as u,b as m,d as l,g as o}from"./chunk-3JO3IXGW.js";import"./chunk-N566L3JG.js";import"./chunk-7S6PD5JC.js";import"./chunk-ZWI7LLTZ.js";import"./chunk-6NCXSKJD.js";import"./chunk-ATXTHXJA.js";import"./chunk-VFINLX57.js";import"./chunk-LM5MGO7W.js";import"./chunk-4HUAEW4D.js";import"./chunk-XWRPBDYS.js";import"./chunk-TCCAOREC.js";import"./chunk-BCREO4Q5.js";import"./chunk-SO6OJFOM.js";import"./chunk-DG5QI6E2.js";import"./chunk-TMZNSBQB.js";import"./chunk-ZGLJFDS6.js";import"./chunk-RSDQHAJX.js";import"./chunk-OFVMJORF.js";import"./chunk-V2KSICSA.js";import"./chunk-LYPZUCFI.js";import"./chunk-HFQFGALU.js";import"./chunk-5TSEU5EE.js";import"./chunk-VC35VCVT.js";import"./chunk-MT7BXRRQ.js";import"./chunk-NNKLK2DS.js";import"./chunk-J7APTVUR.js";import"./chunk-BRGZVJPZ.js";import"./chunk-Z5NXR7SL.js";import"./chunk-7JLWSSXP.js";import"./chunk-W3WDPWBE.js";import"./chunk-JKP4I6UL.js";import"./chunk-TZHKPIVH.js";import"./chunk-JPDAKIWT.js";import"./chunk-W6LY37E4.js";import"./chunk-BRWS572J.js";import"./chunk-AKNRR36C.js";import{a as c,b as y,g as t}from"./chunk-JEGVIFEP.js";var d="Group Layer",R="group-layer-save",P="group-layer-save-as",i=o.GROUP_LAYER_MAP;function I(e){return{isValid:e.type==="group",errorMessage:"Layer.type should be 'group'"}}function T(e){return{isValid:m(e,i),errorMessage:`Layer.portalItem.typeKeywords should have '${i}'`}}function g(e,r){return y(c({},p(e,"web-map",!0)),{initiator:r})}function w(e){let r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}function h(e,r){return t(this,null,function*(){r.title||=e.title,l(r,o.METADATA),u(r,i)})}function O(e,r){return t(this,null,function*(){return v({layer:e,itemType:d,validateLayer:I,validateItem:T,createJSONContext:a=>g(a,e),createItemData:w,errorNamePrefix:R,saveResources:(a,s)=>t(this,null,function*(){return e.sourceIsPortalItem||(yield a.removeAllResources().catch(()=>{})),n(e.resourceReferences,s)})},r)})}function M(e,r,a){return t(this,null,function*(){return f({layer:e,itemType:d,validateLayer:I,createJSONContext:s=>g(s,e),createItemData:w,errorNamePrefix:P,newItem:r,setItemProperties:h,saveResources:(s,A)=>n(e.resourceReferences,A)},a)})}export{O as save,M as saveAs};
