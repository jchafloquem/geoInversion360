import{b as K}from"./chunk-5Z4RIO4Y.js";import{a as G,d as J}from"./chunk-BYCT4PTQ.js";import{b as L,d as H,i as w}from"./chunk-Z6XPPWSB.js";import{a as V}from"./chunk-VV6VBK4L.js";import{b as N}from"./chunk-GXZQZHAF.js";import{a as j,n as S}from"./chunk-MJ4RSERD.js";import{a as z,c as M}from"./chunk-BVW6ULEA.js";import{a as Z}from"./chunk-7C6Z24SS.js";import{c as y,k as A}from"./chunk-3M7QKELQ.js";import{d as Y,e as q,r as D}from"./chunk-5QLB7ZJ7.js";import{q as U}from"./chunk-ATXTHXJA.js";import{h as d}from"./chunk-LM5MGO7W.js";import{d as k}from"./chunk-SO6OJFOM.js";import{f as I,o as _}from"./chunk-TMZNSBQB.js";import{B as W,G as h,I as $,a as R,e as C}from"./chunk-ZGLJFDS6.js";import{B,D as b,a as x,x as v}from"./chunk-OFVMJORF.js";var dr="Projection may be possible after calling projection.load().";function Nr(r,t,o,n){r.error(`Failed to project from (wkid:${t.wkid}) to (wkid:${o.wkid}).${n?" ":""}${n}`)}function Cr(r,t,o,n,e){return O(F.TO_PCPF,y.fromTypedArray(r),m.NORMAL,A.fromTypedArray(t),A.fromTypedArray(o),n,y.fromTypedArray(e))?e:null}function Er(r,t,o,n,e){return O(F.FROM_PCPF,y.fromTypedArray(r),m.NORMAL,A.fromTypedArray(t),A.fromTypedArray(o),n,y.fromTypedArray(e))?e:null}function Or(r,t,o){return d(r,t,0,o,N(t),0,r.length/3)?o:null}function Rr(r,t,o){return d(r,N(o),0,t,o,0,r.length/3)?t:null}function hr(r,t,o){return S(c,o),H(t,r,c),_(c)&&w(t,t),t}function _r(r,t,o){return j(c,o),K(t,r,c),_(c)&&w(t,t,4),t}function jr(r,t,o,n){let e=t===m.NORMAL;return X(r,t,o,(i,l)=>{let a=Math.cos(I(i));l[0]=e?a:1/a,l[1]=1},n)}function Sr(r,t,o,n){let e=t===m.NORMAL;return X(r,t,o,(i,l)=>{let a=Math.cosh(-i/x.radius);l[0]=1,l[1]=e?a:1/a},n)}function X(r,t,o,n,e){let i=t===m.NORMAL?3:4,l=[0,0];for(let a=0,u=1;a<r.length;a+=i,u+=3){n(o[u],l);let f=r[a]*l[0],p=r[a+1]*l[1],s=r[a+2],P=1/Math.sqrt(f*f+p*p+s*s);e[a]=f*P,e[a+1]=p*P,e[a+2]=s*P,i===4&&(e[a+3]=r[a+3])}return e}function Vr(r,t,o,n,e){if(!O(F.TO_PCPF,y.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),m.TANGENT,A.fromTypedArray(t),A.fromTypedArray(o),n,y.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let i=3;i<r.length;i+=4)e[i]=r[i];return e}function Lr(r,t,o,n,e){if(!O(F.FROM_PCPF,y.fromTypedArray(r,16),m.TANGENT,A.fromTypedArray(t),A.fromTypedArray(o),n,y.fromTypedArray(e,16)))return null;for(let i=3;i<r.length;i+=4)e[i]=r[i];return e}var m,F;function Q(r,t,o,n,e){switch(V(n,o,g,n),r===F.FROM_PCPF&&Y(g,g),t){case m.NORMAL:return S(e,g);case m.TANGENT:return j(e,g)}}function O(r,t,o,n,e,i,l){if(!t)return;let a=n.count,u=N(i);if(or(i))for(let f=0;f<a;f++)e.getVec(f,E),t.getVec(f,T),h(T,T,Q(r,o,E,u,c)),l.setVec(f,T);else for(let f=0;f<a;f++){e.getVec(f,E),t.getVec(f,T);let p=k(n.get(f,1)),s=Math.cos(p);o===m.TANGENT!=(r===F.TO_PCPF)&&(s=1/s),Q(r,o,E,u,c),r===F.TO_PCPF?(c[0]*=s,c[1]*=s,c[2]*=s,c[3]*=s,c[4]*=s,c[5]*=s):(c[0]*=s,c[3]*=s,c[6]*=s,c[1]*=s,c[4]*=s,c[7]*=s),h(T,T,c),W(T,T),l.setVec(f,T)}return l}function wr(r){return r.vertexSpace.type==="local"?rr(r):tr(r)}function rr({vertexSpace:r,transform:t,inSpatialReference:o,outSpatialReference:n,localMode:e,outPositions:i,positions:l}){let a=r.origin??C,u=r.origin!=null?t?.localMatrix??M:M,f=N(o),p=n.isWebMercator&&e||!U(o,f)?o:f;V(o,a,g,p),q(g,g,u);let s=i??G(l.length);return L(s,l,g),d(s,p,0,s,n,0,s.length/3),s}function tr({vertexSpace:r,transform:t,outPositions:o,positions:n,inSpatialReference:e,outSpatialReference:i}){let l=r.origin!=null?t?.localMatrix??M:M,a=o??G(n.length);D(l,M)?J(a,n):L(a,n,l);let u=r.origin??C;if(!$(u,C)){let[f,p,s]=u;for(let P=0;P<a.length;P+=3)a[P]+=f,a[P+1]+=p,a[P+2]+=s}return d(a,e,0,a,i,0,a.length/3)?a:null}function or(r){return r.isWGS84||v(r)||B(r)||b(r)}(function(r){r[r.NORMAL=0]="NORMAL",r[r.TANGENT=1]="TANGENT"})(m||(m={})),function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"}(F||(F={}));var E=R(),T=R(),g=z(),c=Z();export{dr as a,Nr as b,Cr as c,Er as d,Or as e,Rr as f,hr as g,_r as h,jr as i,Sr as j,Vr as k,Lr as l,m,wr as n};
