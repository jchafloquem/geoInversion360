import{a as fn,c as J,h as k}from"./chunk-IBDPR46F.js";import{a as De,b as oe,c as Ee}from"./chunk-BES4JRIO.js";import{a as ln,c as cn,d as F}from"./chunk-QYC4ILGT.js";import{l as Xe,m as un}from"./chunk-BRWS572J.js";import{a as Ke}from"./chunk-AKNRR36C.js";var d;(function(i){i.InvalidFunctionParameters="InvalidFunctionParameters",i.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",i.UnsupportedSqlFunction="UnsupportedSqlFunction",i.UnsupportedOperator="UnsupportedOperator",i.UnsupportedSyntax="UnsupportedSyntax",i.UnsupportedIsRhs="UnsupportedIsRhs",i.UnsupportedIsLhs="UnsupportedIsLhs",i.InvalidDataType="InvalidDataType",i.CannotCastValue="CannotCastValue",i.FunctionNotRecognized="FunctionNotRecognized",i.InvalidTime="InvalidTime",i.InvalidParameterCount="InvalidParameterCount",i.InvalidTimeStamp="InvalidTimeStamp",i.InvalidDate="InvalidDate",i.InvalidOperator="InvalidOperator",i.IllegalInterval="IllegalInterval",i.YearMonthIntervals="YearMonthIntervals",i.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",i.MissingStatisticParameters="MissingStatisticParameters"})(d||(d={}));var $u={[d.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.UnsupportedOperator]:"Unsupported operator - {operator}",[d.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.UnsupportedSqlFunction]:"Sql function not found = {function}",[d.InvalidDataType]:"Invalid sql data type",[d.InvalidDate]:"Invalid date encountered",[d.InvalidOperator]:"Invalid operator encountered",[d.InvalidTime]:"Invalid time encountered",[d.IllegalInterval]:"Illegal interval",[d.FunctionNotRecognized]:"Function not recognized",[d.InvalidTimeStamp]:"Invalid timestamp encountered",[d.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.YearMonthIntervals]:"Year-Month Intervals not supported",[d.CannotCastValue]:"Cannot cast value to the required data type"},m=class i extends Error{constructor(r,s){super(Xe($u[r],s)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,i)}},Q;(function(i){i.NeverReach="NeverReach",i.NotImplemented="NotImplemented",i.Cancelled="Cancelled",i.InvalidStatResponse="InvalidStatResponse",i.InvalidRequest="InvalidRequest",i.RequestFailed="RequestFailed",i.MissingFeatures="MissingFeatures",i.AggregationFieldNotFound="AggregationFieldNotFound",i.DataElementsNotFound="DataElementsNotFound"})(Q||(Q={}));var zu={[Q.Cancelled]:"Cancelled",[Q.InvalidStatResponse]:"Invalid statistics response from service",[Q.InvalidRequest]:"Invalid request",[Q.RequestFailed]:"Request failed - {reason}",[Q.MissingFeatures]:"Missing features",[Q.AggregationFieldNotFound]:"Aggregation field not found",[Q.DataElementsNotFound]:"Data elements not found on service",[Q.NeverReach]:"Encountered unreachable logic",[Q.NotImplemented]:"Not implemented"},dn=class i extends Error{constructor(r,s){super(Xe(zu[r],s)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,i)}};function mn(i){return Number.isNaN(i)||i===0?i:Math.trunc(i)}var Z=class i{constructor(r){this._timeStampOffset=r,this._date=null}toDateTime(){return this._date??=F.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return mn(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return mn(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return i.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(r){return new i(F.fromJSDate(r).toISO({includeOffset:!0}))}static fromDateTime(r){return new i(r.toISO({includeOffset:!0}))}static fromParts(r,s,c=0,l=0,I=0,h=0,t=0,S=!1,N=0,R=0){let H=`${r.toString().padStart(4,"0")}-${s.toString().padStart(2,"0")}-${c.toString().padStart(2,"0")}`,Y="";h<10&&(Y="0");let b=`${l.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}:${Y+h.toString()}`;t!==0&&(b+="."+t.toString().padStart(3,"0"));let M=`${S?"-":"+"}${N.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`;return new i(H+"T"+b+M)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let r=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return r&&(r=r.replace(".000","")),r}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(r){let s=this.toDateTime().plus(r);return i.fromDateTime(s)}};function vn(i,r){let s=hn[i.toLowerCase()];if(s==null)throw new m(d.FunctionNotRecognized);if(r.length<s.minParams||r.length>s.maxParams)throw new m(d.InvalidParameterCount,{name:i.toUpperCase()});return s.evaluate(r)}function et(i,r){let s=hn[i.toLowerCase()];return s!=null&&r>=s.minParams&&r<=s.maxParams}var hn={min:{minParams:1,maxParams:1,evaluate:i=>pn(i[0],"min")},max:{minParams:1,maxParams:1,evaluate:i=>pn(i[0],"max")},avg:{minParams:1,maxParams:1,evaluate:i=>In(i[0])},sum:{minParams:1,maxParams:1,evaluate:i=>ku(i[0])},stddev:{minParams:1,maxParams:1,evaluate:i=>Hu(i[0])},count:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].length},var:{minParams:1,maxParams:1,evaluate:i=>wn(i[0])}};function In(i){if(i===null)return null;let r=0,s=0;for(let c=0;c<i.length;c++){let l=i[c];if(l!==null){if(!tt(l))throw new m(d.InvalidValueForAggregateFunction);s++,r+=l}}return s===0?null:r/i.length}function tt(i){return typeof i=="number"}function pn(i,r){if(i===null)return null;let s=null,c=null;for(let l of i){let I=l;I=l instanceof J||l instanceof k?l.toNumber():l instanceof F?l.toMillis():l instanceof Z?l.toMilliseconds():l,(s===null||r==="max"&&c!==null&&I!==null&&c<=I||r==="min"&&c!==null&&I!==null&&c>=I)&&(s=l,c=I)}return s}function ku(i){if(i===null)return null;let r=0;for(let s=0;s<i.length;s++){let c=i[s];if(c!==null){if(!tt(c))throw new m(d.InvalidValueForAggregateFunction);r+=c}}return r}function Hu(i){if(i===null)return null;let r=wn(i);return r===null?null:Math.sqrt(r)}function wn(i){if(i===null||(i=i.filter(c=>c!==null)).length===0)return null;let r=In(i);if(r===null)return null;let s=0;for(let c of i){if(!tt(c))throw new m(d.InvalidValueForAggregateFunction);s+=(r-c)**2}return s/(i.length-1)}var _=class i{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(r){if(r.precision!==null||r.secondary!==null)throw new m(d.PrimarySecondaryQualifiers)}static _parseSecondsComponent(r,s){if(s.includes(".")){let c=s.split(".");r.second=parseFloat(c[0]),r.millis=parseInt(c[1],10)}else r.second=parseFloat(s)}static createFromMilliseconds(r){let s=new i;return s.second=r/1e3,s}static createFromValueAndQualifier(r,s,c){let l=null,I=new i;if(I.op=c==="-"?"-":"+",s.type==="interval-period"){i._fixDefaults(s);let h=new RegExp("^[0-9]{1,}$");if(s.period==="year"||s.period==="month")throw new m(d.YearMonthIntervals);if(s.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))throw new m(d.IllegalInterval);i._parseSecondsComponent(I,r)}else{if(!h.test(r))throw new m(d.IllegalInterval);I[s.period]=parseFloat(r)}}else{if(i._fixDefaults(s.start),i._fixDefaults(s.end),s.start.period==="year"||s.start.period==="month"||s.end.period==="year"||s.end.period==="month")throw new m(d.YearMonthIntervals);switch(s.start.period){case"day":switch(s.end.period){case"hour":if(l=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);I[s.start.period]=parseFloat(r.split(" ")[0]),I[s.end.period]=parseFloat(r.split(" ")[1]);break;case"minute":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);{I[s.start.period]=parseFloat(r.split(" ")[0]);let h=r.split(" ")[1].split(":");I.hour=parseFloat(h[0]),I.minute=parseFloat(h[1])}break;case"second":if(l=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{I[s.start.period]=parseFloat(r.split(" ")[0]);let h=r.split(" ")[1].split(":");I.hour=parseFloat(h[0]),I.minute=parseFloat(h[1]),i._parseSecondsComponent(I,h[2])}break;default:throw new m(d.IllegalInterval)}break;case"hour":switch(s.end.period){case"minute":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!l.test(r))throw new m(d.IllegalInterval);I.hour=parseFloat(r.split(":")[0]),I.minute=parseFloat(r.split(":")[1]);break;case"second":if(l=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{let h=r.split(":");I.hour=parseFloat(h[0]),I.minute=parseFloat(h[1]),i._parseSecondsComponent(I,h[2])}break;default:throw new m(d.IllegalInterval)}break;case"minute":if(s.end.period!=="second")throw new m(d.IllegalInterval);if(l=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!l.test(r))throw new m(d.IllegalInterval);{let h=r.split(":");I.minute=parseFloat(h[0]),i._parseSecondsComponent(I,h[1])}break;default:throw new m(d.IllegalInterval)}}return I}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};var Yu=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,ju=/^(\d{1,2}):(\d{1,2})$/,Bu=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,gn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Gu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,Qu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Wu=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Ku=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function se(i,r){if(r instanceof ln)return r===De.instance?F.fromMillis(i.getTime(),{zone:De.instance}):F.fromJSDate(i,{zone:r});switch(r){case"system":case"local":case null:return F.fromJSDate(i);default:return r?.toLowerCase()==="unknown"?F.fromMillis(i.getTime(),{zone:De.instance}):F.fromJSDate(i,{zone:r})}}function $(i){return typeof i=="number"}function z(i){return typeof i=="string"||i instanceof String}function te(i){return i instanceof _}function B(i){return i instanceof Date}function C(i){return i instanceof F}function x(i){return i instanceof J}function E(i){return i instanceof k}function D(i){return i instanceof Z}function de(i){let r=Yu.exec(i);if(r!==null){let[,s,c,l]=r,I=k.fromParts(parseInt(s,10),parseInt(c,10),parseInt(l,10),0);if(I!==null)return I;throw new m(d.InvalidTime)}if(r=ju.exec(i),r!==null){let[,s,c]=r,l=k.fromParts(parseInt(s,10),parseInt(c,10),0,0);if(l!==null)return l;throw new m(d.InvalidTime)}if(r=Bu.exec(i),r!==null){let[,s,c,l,I]=r,h=k.fromParts(parseInt(s,10),parseInt(c,10),parseInt(l,10),parseInt(I,10));if(h!==null)return h;throw new m(d.InvalidTime)}throw new m(d.InvalidTime)}function ue(i,r,s=!1){let c=Gu.exec(i);if(c!==null){let[,l,I,h,t,S,N,R]=c,H=F.fromObject({year:parseInt(l,10),month:parseInt(I,10),day:parseInt(h,10),hour:parseInt(t,10),minute:parseInt(S,10),second:parseInt(N,10),millisecond:R?parseInt(R.replace(".",""),10):0},{zone:Ee(r)});if(H.isValid===!1)throw new m(d.InvalidTimeStamp);return H}if(c=Qu.exec(i),c!==null){let[,l,I,h,t,S,N,R,H,Y,b]=c,M=Z.fromParts(parseInt(l,10),parseInt(I,10),parseInt(h,10),parseInt(t,10),parseInt(S,10),parseInt(N,10),R?parseInt(R.replace(".",""),10):0,H==="-",parseInt(Y,10),parseInt(b,10));if(M.isValid===!1)throw new m(d.InvalidTimeStamp);return M}if(c=Wu.exec(i),c!==null){let[,l,I,h,t,S,N,R,H]=c,Y=Z.fromParts(parseInt(l,10),parseInt(I,10),parseInt(h,10),parseInt(t,10),parseInt(S,10),0,0,N==="-",parseInt(R,10),parseInt(H,10));if(Y.isValid===!1)throw new m(d.InvalidTimeStamp);return Y}if(c=Ku.exec(i),c!==null){let[,l,I,h,t,S]=c,N=F.fromObject({year:parseInt(l,10),month:parseInt(I,10),day:parseInt(h,10),hour:parseInt(t,10),minute:parseInt(S,10),second:0},{zone:Ee(r)});if(N.isValid===!1)throw new m(d.InvalidTimeStamp);return N}if(c=gn.exec(i),c!==null){let[,l,I,h]=c,t=F.fromObject({year:parseInt(l,10),month:parseInt(I,10),day:parseInt(h,10),hour:0,minute:0,second:0},{zone:Ee(r)});if(t.isValid===!1)throw new m(d.InvalidTimeStamp);return t}throw new m(d.InvalidTimeStamp)}function nt(i,r){let s=gn.exec(i);if(s===null)try{return ue(i,r)}catch{throw new m(d.InvalidDate)}let[,c,l,I]=s,h=J.fromParts(parseInt(c,10),parseInt(l,10),parseInt(I,10));if(h===null)throw new m(d.InvalidDate);return h}var Xu=321408e5,el=26784e5,tl=864e5,nl=36e5,rl=6e4;function rt(i){return!!C(i)||!!D(i)}function Fe(i){return!!C(i)||!!x(i)||!!D(i)||!!E(i)}function Me(i){if(C(i))return i.toMillis();if(x(i))return i.toNumber();if(D(i))return i.toMilliseconds();throw new m(d.InvalidDataType)}function j(i,r,s,c){if(i==null||r==null)return null;if($(i)){if($(r))return W(i,r,s);if(z(r))return al(i,r,s);if(Fe(r))throw new m(d.InvalidOperator);if(x(r))throw new m(d.InvalidOperator)}else if(z(i)){if($(r))return il(i,r,s);if(z(r))return ol(i,r,s);if(C(r))throw new m(d.InvalidOperator);if(x(r))throw new m(d.InvalidOperator);if(E(r))throw new m(d.InvalidOperator);if(D(r))throw new m(d.InvalidOperator)}else if(C(i)){if(rt(r)){if(i instanceof F&&oe(i.zone)){if(r instanceof F&&oe(r.zone)===!1||r instanceof Z)return me(i,r,s)}else if(r instanceof F&&oe(r.zone)&&(i instanceof F&&oe(i.zone)===!1||i instanceof Z))return me(i,r,s);return W(Me(i),Me(r),s)}if(z(r))throw new m(d.InvalidOperator);if(x(r))return sl(i,r,s);if(E(r))throw new m(d.InvalidOperator);if($(r))throw new m(d.InvalidOperator)}else if(x(i)){if(D(r))return cl(i,r,s);if(C(r))return ll(i,r,s);if(z(r))throw new m(d.InvalidOperator);if(x(r))return W(i.toNumber(),r.toNumber(),s);if(E(r))throw new m(d.InvalidOperator);if($(r))throw new m(d.InvalidOperator)}else if(E(i)){if(E(r))return W(i.toNumber(),r.toNumber(),s);if(z(r))throw new m(d.InvalidOperator);if($(r))throw new m(d.InvalidOperator);if(x(r))throw new m(d.InvalidOperator);if(rt(r))throw new m(d.InvalidOperator)}else if(D(i)){if(rt(r))return r instanceof F&&oe(r.zone)?me(i,r,s):W(Me(i),Me(r),s);if(z(r))throw new m(d.InvalidOperator);if(x(r))return ul(i,r,s);if(E(r))throw new m(d.InvalidOperator);if($(r))throw new m(d.InvalidOperator)}switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function W(i,r,s){switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function al(i,r,s){let c=parseFloat(r);if(!isNaN(c))return W(i,c,s);let l=i.toString();switch(s){case"<>":return l!==r;case"=":return l===r;case">":return l>r;case"<":return l<r;case">=":return l>=r;case"<=":return l<=r}}function il(i,r,s){let c=parseFloat(i);if(!isNaN(c))return W(c,r,s);let l=r.toString();switch(s){case"<>":return i!==l;case"=":return i===l;case">":return i>l;case"<":return i<l;case">=":return i>=l;case"<=":return i<=l}}function ol(i,r,s){switch(s){case"<>":return i!==r;case"=":return i===r;case">":return i>r;case"<":return i<r;case">=":return i>=r;case"<=":return i<=r}}function sl(i,r,s){let c=r.toDateTimeLuxon(i.zone);return W((i=i.startOf("day")).toMillis(),c.toMillis(),s)}function ul(i,r,s){let c=r.toDateTimeLuxon(i.toDateTime().zone);return W((i=i.startOfDay()).toMilliseconds(),c.toMillis(),s)}function ll(i,r,s){let c=i.toDateTimeLuxon(r.zone);return r=r.startOf("day"),W(c.toMillis(),r.toMillis(),s)}function cl(i,r,s){let c=i.toDateTimeLuxon(r.toDateTime().zone);return r=r.startOfDay(),W(c.toMillis(),r.toMilliseconds(),s)}function me(i,r,s){i instanceof Z&&(i=i.toDateTime()),r instanceof Z&&(r=r.toDateTime());let c=Tn(i),l=Tn(r);switch(s){case"<>":return c!==l;case"=":return c===l;case">":return c>l;case"<":return c<l;case">=":return c>=l;case"<=":return c<=l}}function Tn(i){return i.year*Xu+i.month*el+i.day*tl+i.hour*nl+i.minute*rl+1e3*i.second+i.millisecond}function pe(i,r,s){let c=On[i.toLowerCase()];if(c==null)throw new m(d.FunctionNotRecognized);if(r.length<c.minParams||r.length>c.maxParams)throw new m(d.InvalidParameterCount,{name:i.toUpperCase()});return c.evaluate(r,s)}function yn(i,r){let s=On[i.toLowerCase()];return s!=null&&r>=s.minParams&&r<=s.maxParams}function Pe(i){return typeof i=="string"||i instanceof String}function at(i){return!B(i)&&!x(i)&&!C(i)&&!E(i)&&!D(i)}function Sn(i){return x(i)||E(i)?i.toString():D(i)?i.toSQLValue():C(i)?i.millisecond===0?i.toFormat("yyyy-LL-dd HH:mm:ss"):i.toSQL({includeOffset:!1}):B(i)?Sn(F.fromJSDate(i)):i.toString()}function fl(i){if(B(i))return J.fromDateJS(i);if(C(i))return J.fromParts(i.year,i.month,i.day);if(x(i))return i;if(E(i))throw new m(d.CannotCastValue);if(D(i)&&J.fromParts(i.year,i.month,i.day)===null)throw new m(d.CannotCastValue);if(Pe(i)){let r=J.fromReader(i);if(r!==null&&r.isValid)return r}throw new m(d.CannotCastValue)}function dl(i,r,s){if(B(i))return se(i,r);if(C(i))return i;if(x(i))return i.toDateTimeLuxon("unknown");if(E(i))throw new m(d.CannotCastValue);if(D(i))return i;if(Pe(i))return ue(i,"unknown",s);throw new m(d.CannotCastValue)}function ml(i){if(B(i))return k.fromDateJS(i);if(C(i))return k.fromDateTime(i);if(x(i))throw new m(d.CannotCastValue);if(E(i))return i;if(D(i))return k.fromSqlTimeStampOffset(i);if(Pe(i))return de(i);throw new m(d.CannotCastValue)}var On={extract:{minParams:2,maxParams:2,evaluate:([i,r])=>{if(r==null)return null;if(B(r))switch(i.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(C(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(x(r))switch(i.toUpperCase()){case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(E(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour}else if(D(r))switch(i.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":return r.timezoneOffsetHour;case"TIMEZONE_MINUTE":return r.timezoneOffsetMinutes}throw new m(d.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:i=>{if(i.length===2){let[r,s]=i;return r==null||s==null?null:r.toString().substring(s-1)}if(i.length===3){let[r,s,c]=i;return r==null||s==null||c==null?null:c<=0?"":r.toString().substring(s-1,s+c-1)}}},position:{minParams:2,maxParams:2,evaluate:([i,r])=>i==null||r==null?null:r.indexOf(i)+1},trim:{minParams:2,maxParams:3,evaluate:i=>{let r=i.length===3,s=r?i[1]:" ",c=r?i[2]:i[1];if(s==null||c==null)return null;let l=`(${un(s)})`;switch(i[0]){case"BOTH":return c.replaceAll(new RegExp(`^${l}*|${l}*$`,"g"),"");case"LEADING":return c.replaceAll(new RegExp(`^${l}*`,"g"),"");case"TRAILING":return c.replaceAll(new RegExp(`${l}*$`,"g"),"")}throw new m(d.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.abs(i[0])},ceiling:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.ceil(i[0])},floor:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.floor(i[0])},log:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])},log10:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.log(i[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sin(i[0])},cos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cos(i[0])},tan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tan(i[0])},asin:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.asin(i[0])},acos:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.acos(i[0])},atan:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.atan(i[0])},sign:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0]>0?1:i[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]**i[1]},mod:{minParams:2,maxParams:2,evaluate:i=>i[0]==null||i[1]==null?null:i[0]%i[1]},round:{minParams:1,maxParams:2,evaluate:i=>{let r=i[0],s=i.length===2?10**i[1]:1;return r==null?null:Math.round(r*s)/s}},truncate:{minParams:1,maxParams:2,evaluate:i=>i[0]==null?null:i.length===1?parseInt(i[0].toFixed(0),10):parseFloat(i[0].toFixed(i[1]))},char_length:{minParams:1,maxParams:1,evaluate:i=>Pe(i[0])?i[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:i=>{let r="";for(let s=0;s<i.length;s++){if(i[s]==null)return null;r+=i[s].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:i[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:i=>{for(let r of i)if(r!==null)return r;return null}},cosh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.cosh(i[0])},sinh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.sinh(i[0])},tanh:{minParams:1,maxParams:1,evaluate:i=>i[0]==null?null:Math.tanh(i[0])},nullif:{minParams:2,maxParams:2,evaluate:(i,r)=>j(i[0],i[1],"=")?null:i[0]},cast:{minParams:2,maxParams:2,evaluate:(i,r)=>{let s=i[0],c=i[1];if(s===null)return null;switch(c.type){case"integer":{if(!at(s))throw new m(d.CannotCastValue);let l=parseInt(s,10);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"smallint":{if(!at(s))throw new m(d.CannotCastValue);let l=parseInt(s,10);if(isNaN(l))throw new m(d.CannotCastValue);if(l>32767||l<-32767)throw new m(d.CannotCastValue);return l}case"float":case"real":{if(!at(s))throw new m(d.CannotCastValue);let l=parseFloat(s);if(isNaN(l))throw new m(d.CannotCastValue);return l}case"time":return ml(s);case"date":return fl(s);case"timestamp":return dl(s,r,c.withtimezone===!0);case"varchar":{let l=Sn(s);if(l.length>c.size)throw new m(d.CannotCastValue);return l}default:throw new m(d.InvalidDataType)}}}};function it(i,r,s,c){if(i==="||")return pe("concat",[r,s],c);if(r===null||s===null)return null;if($(r)){if($(s))return ot(r,s,i);if(te(s))return yl(r,s,i);if(E(s))return Ml();if(x(s))return Fl();if(D(s))return El();if(C(s))return xl();if(z(s))return Pl(r,s,i);throw new m(d.InvalidOperator)}if(x(r)){if($(s))return bl(r,s,i);if(te(s))return Sl(r,s,i);if(E(s))return Zl();if(x(s))return Jl(r,s,i);if(D(s))return Vl(r,s,i);if(C(s))return Ul(r,s,i);if(z(s))return ec();throw new m(d.InvalidOperator)}if(E(r)){if($(s))return Cl(r,s,i);if(te(s))return Il(r,s,i);if(E(s))return Gl();if(x(s))return jl();if(D(s))return Bl();if(C(s))return Yl();if(z(s))return tc();throw new m(d.InvalidOperator)}if(te(r)){if($(s))return Tl(r,s,i);if(te(s))return gl(r,s,i);if(E(s))return vl(r,s,i);if(x(s))return hl(r,s,i);if(D(s))return wl(r,s,i);if(C(s))return pl(r,s,i);if(z(s))return Rl();throw new m(d.InvalidOperator)}if(C(r)){if($(s))return Al(r,s,i);if(te(s))return Ol(r,s,i);if(E(s))return Xl();if(x(s))return Wl(r,s,i);if(D(s))return Kl(r,s,i);if(C(s))return Ql(r,s,i);if(z(s))return nc();throw new m(d.InvalidOperator)}if(D(r)){if($(s))return Dl(r,s,i);if(te(s))return Nl(r,s,i);if(E(s))return $l();if(x(s))return zl(r,s,i);if(D(s))return Hl(r,s,i);if(C(s))return kl(r,s,i);if(z(s))return rc();throw new m(d.InvalidOperator)}if(z(r)){if($(s))return Ll(r,s,i);if(te(s))return ql();if(E(s))return ac();if(x(s))return ic();if(D(s))return sc();if(C(s))return oc();if(z(s))return _l(r,s,i);throw new m(d.InvalidOperator)}throw new m(d.InvalidOperator)}function ot(i,r,s){switch(s){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}throw new m(d.InvalidOperator)}function pl(i,r,s){switch(s){case"+":return r.plus({milliseconds:i.valueInMilliseconds()});case"-":return i.valueInMilliseconds()-r.toMillis()}throw new m(d.InvalidOperator)}function vl(i,r,s){if(s==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new m(d.InvalidOperator)}function hl(i,r,s){if(s==="+")return r.plus("milliseconds",i.valueInMilliseconds());throw new m(d.InvalidOperator)}function Il(i,r,s){switch(s){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function wl(i,r,s){if(s==="+")return r.addMilliseconds(i.valueInMilliseconds());throw new m(d.InvalidOperator)}function gl(i,r,s){switch(s){case"+":return _.createFromMilliseconds(i.valueInMilliseconds()+r.valueInMilliseconds());case"-":return _.createFromMilliseconds(i.valueInMilliseconds()-r.valueInMilliseconds());case"*":return _.createFromMilliseconds(i.valueInMilliseconds()*r.valueInMilliseconds());case"/":return _.createFromMilliseconds(i.valueInMilliseconds()/r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Tl(i,r,s){switch(s){case"+":return _.createFromMilliseconds(i.valueInMilliseconds()+r);case"-":return _.createFromMilliseconds(i.valueInMilliseconds()-r);case"*":return _.createFromMilliseconds(i.valueInMilliseconds()*r);case"/":return _.createFromMilliseconds(i.valueInMilliseconds()/r)}throw new m(d.InvalidOperator)}function yl(i,r,s){switch(s){case"+":return _.createFromMilliseconds(i+r.valueInMilliseconds());case"-":return _.createFromMilliseconds(i-r.valueInMilliseconds());case"*":return _.createFromMilliseconds(i*r.valueInMilliseconds());case"/":return _.createFromMilliseconds(i/r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Sl(i,r,s){switch(s){case"+":return i.plus("milliseconds",r.valueInMilliseconds());case"-":return i.plus("milliseconds",-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Ol(i,r,s){switch(s){case"+":return i.plus({milliseconds:r.valueInMilliseconds()});case"-":return i.minus({milliseconds:r.valueInMilliseconds()})}throw new m(d.InvalidOperator)}function Nl(i,r,s){switch(s){case"+":return i.addMilliseconds(r.valueInMilliseconds());case"-":return i.addMilliseconds(-1*r.valueInMilliseconds())}throw new m(d.InvalidOperator)}function Al(i,r,s){let c=1e3*r*24*60*60;switch(s){case"+":return i.plus({milliseconds:c});case"-":return i.minus({milliseconds:c})}throw new m(d.InvalidOperator)}function bl(i,r,s){let c=1e3*r*24*60*60;switch(s){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new m(d.InvalidOperator)}function Cl(i,r,s){let c=1e3*r*24*60*60;switch(s){case"+":return i.plus("milliseconds",c);case"-":return i.plus("milliseconds",-1*c)}throw new m(d.InvalidOperator)}function xl(i,r,s){throw new m(d.InvalidOperator)}function Dl(i,r,s){let c=1e3*r*24*60*60;switch(s){case"+":return i.addMilliseconds(c);case"-":return i.addMilliseconds(-1*c)}throw new m(d.InvalidOperator)}function El(i,r,s){throw new m(d.InvalidOperator)}function Ml(i,r,s){throw new m(d.InvalidOperator)}function Fl(i,r,s){throw new m(d.InvalidOperator)}function Pl(i,r,s){let c=parseFloat(r);if(isNaN(c))throw new m(d.InvalidOperator);return ot(i,c,s)}function Ll(i,r,s){let c=parseFloat(i);if(isNaN(c))throw new m(d.InvalidOperator);return ot(c,r,s)}function _l(i,r,s){if(s==="+")return i+r;throw new m(d.InvalidOperator)}function Rl(i,r,s){throw new m(d.InvalidOperator)}function ql(i,r,s){throw new m(d.InvalidOperator)}function Ul(i,r,s){if(s==="-")return i.toDateTimeLuxon(r.zone).diff(r).as("days");throw new m(d.InvalidOperator)}function Vl(i,r,s){if(s==="-")return i.toDateTimeLuxon(r.toDateTime().zone).diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function Jl(i,r,s){if(s==="-")return i.toDateTimeLuxon("UTC").diff(r.toDateTimeLuxon("UTC")).as("days");throw new m(d.InvalidOperator)}function Zl(i,r,s){throw new m(d.InvalidOperator)}function $l(i,r,s){throw new m(d.InvalidOperator)}function zl(i,r,s){if(s==="-")return i.toDateTime().diff(r.toDateTimeLuxon(i.toDateTime().zone)).as("days");throw new m(d.InvalidOperator)}function kl(i,r,s){if(s==="-")return i.toDateTime().diff(r).as("days");throw new m(d.InvalidOperator)}function Hl(i,r,s){if(s==="-")return i.toDateTime().diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function Yl(i,r,s){throw new m(d.InvalidOperator)}function jl(i,r,s){throw new m(d.InvalidOperator)}function Bl(i,r,s){throw new m(d.InvalidOperator)}function Gl(i,r,s){throw new m(d.InvalidOperator)}function Ql(i,r,s){if(s==="-")return i.diff(r).as("days");throw new m(d.InvalidOperator)}function Wl(i,r,s){if(s==="-")return i.diff(r.toDateTimeLuxon(i.zone)).as("days");throw new m(d.InvalidOperator)}function Kl(i,r,s){if(s==="-")return i.diff(r.toDateTime()).as("days");throw new m(d.InvalidOperator)}function Xl(i,r,s){throw new m(d.InvalidOperator)}function ec(i,r,s){throw new m(d.InvalidOperator)}function tc(i,r,s){throw new m(d.InvalidOperator)}function nc(i,r,s){throw new m(d.InvalidOperator)}function rc(i,r,s){throw new m(d.InvalidOperator)}function ac(i,r,s){throw new m(d.InvalidOperator)}function ic(i,r,s){throw new m(d.InvalidOperator)}function oc(i,r,s){throw new m(d.InvalidOperator)}function sc(i,r,s){throw new m(d.InvalidOperator)}var Nn,An,bn={exports:{}};An=function(){function i(l,I){function h(){this.constructor=l}h.prototype=I.prototype,l.prototype=new h}function r(l,I,h,t){var S=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(S,r.prototype),S.expected=I,S.found=h,S.location=t,S.name="SyntaxError",S}function s(l,I,h){return h=h||" ",l.length>I?l:(I-=l.length,l+(h+=h.repeat(I)).slice(0,I))}function c(l,I){var h,t={},S=(I=I!==void 0?I:{}).grammarSource,N={start:xt},R=xt,H="!",Y="=",b=">=",M=">",G="<=",q="<>",Pn="<",ft="!=",Re="+",qe="-",dt="||",Ln="*",_n="/",Rn="@",mt="'",pt="N'",he="''",qn=".",Un="null",Vn="true",Jn="false",Zn="in",$n="is",zn="like",kn="escape",Hn="not",Yn="and",jn="or",Bn="between",Gn="from",Qn="for",Wn="substring",Kn="extract",Xn="trim",er="position",tr="timestamp",nr="date",rr="time",ar="leading",ir="trailing",or="both",sr="cast",ur="as",lr="integer",cr="smallint",fr="float",dr="real",mr="varchar",pr="to",vr="interval",hr="year",Ir="timezone_hour",wr="timezone_minute",gr="month",Tr="day",yr="hour",Sr="minute",Or="second",Nr="case",Ar="end",br="when",Cr="then",xr="else",Dr=",",Er="(",Mr=")",vt="`",Fr=/^[A-Za-z_\x80-\uFFFF]/,Pr=/^[A-Za-z0-9_]/,ht=/^[A-Za-z0-9_.\x80-\uFFFF]/,Lr=/^["]/,It=/^[^']/,_r=/^[0-9]/,Rr=/^[eE]/,qr=/^[+\-]/,Ur=/^[ \t\n\r]/,wt=/^[^`]/,Vr=T("!",!1),gt=T("=",!1),Jr=T(">=",!1),Zr=T(">",!1),$r=T("<=",!1),zr=T("<>",!1),kr=T("<",!1),Hr=T("!=",!1),Ue=T("+",!1),Ve=T("-",!1),Yr=T("||",!1),jr=T("*",!1),Br=T("/",!1),Gr=X([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),Qr=X([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Tt=X([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),Wr=X(['"'],!1,!1),Kr=T("@",!1),yt=T("'",!1),Xr=T("N'",!1),St=T("''",!1),Ot=X(["'"],!0,!1),ea=T(".",!1),ta=X([["0","9"]],!1,!1),na=X(["e","E"],!1,!1),ra=X(["+","-"],!1,!1),aa=T("NULL",!0),ia=T("TRUE",!0),oa=T("FALSE",!0),sa=T("IN",!0),ua=T("IS",!0),la=T("LIKE",!0),ca=T("ESCAPE",!0),fa=T("NOT",!0),da=T("AND",!0),ma=T("OR",!0),pa=T("BETWEEN",!0),va=T("FROM",!0),ha=T("FOR",!0),Ia=T("SUBSTRING",!0),wa=T("EXTRACT",!0),ga=T("TRIM",!0),Ta=T("POSITION",!0),ya=T("TIMESTAMP",!0),Sa=T("DATE",!0),Oa=T("TIME",!0),Na=T("LEADING",!0),Aa=T("TRAILING",!0),ba=T("BOTH",!0),Ca=T("CAST",!0),xa=T("AS",!0),Da=T("INTEGER",!0),Ea=T("SMALLINT",!0),Ma=T("FLOAT",!0),Fa=T("REAL",!0),Pa=T("VARCHAR",!0),La=T("TO",!0),_a=T("INTERVAL",!0),Ra=T("YEAR",!0),qa=T("TIMEZONE_HOUR",!0),Ua=T("TIMEZONE_MINUTE",!0),Va=T("MONTH",!0),Ja=T("DAY",!0),Za=T("HOUR",!0),$a=T("MINUTE",!0),za=T("SECOND",!0),ka=T("CASE",!0),Ha=T("END",!0),Ya=T("WHEN",!0),ja=T("THEN",!0),Ba=T("ELSE",!0),Ga=T(",",!1),Qa=T("(",!1),Wa=T(")",!1),Ka=X([" ","	",`
`,"\r"],!1,!1),Nt=T("`",!1),At=X(["`"],!0,!1),Xa=function(e){return e},ei=function(e,a){var o={type:"expression-list"},u=Uu(e,a);return o.value=u,o},ti=function(e,a){return fe(e,a)},ni=function(e,a){return fe(e,a)},ri=function(e){return Ru("NOT",e)},ai=function(e,a){return a==""||a==null||a==null?e:a.type=="arithmetic"?fe(e,a.tail):sn(a.op,e,a.right,a.escape)},ii=function(e){return{type:"arithmetic",tail:e}},oi=function(e,a){return{op:e+"NOT",right:a}},si=function(e,a){return{op:e,right:a}},ui=function(e,a,o){return{op:"NOT"+e,right:{type:"expression-list",value:[a,o]}}},li=function(e,a,o){return{op:e,right:{type:"expression-list",value:[a,o]}}},ci=function(e){return e[0]+" "+e[2]},fi=function(e){return e[0]+" "+e[2]},di=function(e,a,o){return{op:e,right:a,escape:o.value}},mi=function(e,a){return{op:e,right:a,escape:""}},pi=function(e,a){return{op:e,right:a}},vi=function(e){return{op:e,right:{type:"expression-list",value:[]}}},hi=function(e,a){return{op:e,right:a}},Ii=function(e,a){return fe(e,a)},wi=function(e,a){return fe(e,a)},gi=function(e){return e.paren=!0,e},Ti=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},yi=function(e){return{type:"column-reference",table:"",column:e,delimited:!0}},Si=function(e){return e},Oi=function(e,a){return e+a.join("")},Ni=function(e,a){return e+a.join("")},Ai=function(e){return e},bi=function(e){return e.join("")},Ci=function(){return'"'},xi=function(e){return{type:"parameter",value:e[1]}},Di=function(e,a){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},a]}}},Ei=function(e,a,o){return{type:"function",name:"substring",args:{type:"expression-list",value:o?[e,a,o[2]]:[e,a]}}},Mi=function(e,a){return{type:"function",name:"cast",args:{type:"expression-list",value:[e,a]}}},Fi=function(){return{type:"data-type",value:{type:"integer"}}},Pi=function(){return{type:"data-type",value:{type:"smallint"}}},Li=function(){return{type:"data-type",value:{type:"float"}}},_i=function(){return{type:"data-type",value:{type:"real"}}},Ri=function(){return{type:"data-type",value:{type:"date"}}},qi=function(){return{type:"data-type",value:{type:"timestamp"}}},Ui=function(){return{type:"data-type",value:{type:"time"}}},Vi=function(e){return{type:"data-type",value:{type:"varchar",size:parseInt(e)}}},Ji=function(e,a,o){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a,o]}}},Zi=function(e,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},a]}}},$i=function(e,a){return{type:"function",name:"position",args:{type:"expression-list",value:[e,a]}}},zi=function(e,a){return{type:"function",name:e,args:a||{type:"expression-list",value:[]}}},ki=function(e){return e.type==="string"&&Vu(e.value),{type:"timestamp",value:e.value}},Hi=function(e){return e.type==="string"&&Ju(e.value),{type:"time",value:e.value}},Yi=function(e,a,o){return{type:"interval",value:a,qualifier:o,op:e}},ji=function(e,a){return{type:"interval",value:e,qualifier:a,op:""}},Bi=function(e,a){return{type:"interval-qualifier",start:e,end:a}},Gi=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},Qi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Wi=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Ki=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},Xi=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},eo=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},to=function(e,a){return{type:"interval-period",period:e.value,precision:a,secondary:null}},no=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},ro=function(e,a){return{type:"interval-period",period:"second",precision:e,secondary:a}},ao=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},io=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},oo=function(){return{type:"string",value:"day"}},so=function(){return{type:"string",value:"hour"}},uo=function(){return{type:"string",value:"minute"}},lo=function(){return{type:"string",value:"month"}},co=function(){return{type:"string",value:"year"}},fo=function(e){return parseFloat(e)},mo=function(e){return parseFloat(e)},po=function(e){return e.type==="string"&&Zu(e.value),{type:"date",value:e.value}},vo=function(){return{type:"null",value:null}},ho=function(){return{type:"boolean",value:!0}},Io=function(){return{type:"boolean",value:!1}},bt=function(){return"'"},wo=function(e){return{type:"string",value:e.join("")}},go=function(e,a){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:null}},To=function(e,a,o){return{type:"case-expression",format:"simple",operand:e,clauses:a,else:o.value}},yo=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},So=function(e,a){return{type:"case-expression",format:"searched",clauses:e,else:a.value}},Oo=function(e,a){return{type:"when-clause",operand:e,value:a}},No=function(e,a){return{type:"when-clause",operand:e,value:a}},Ao=function(e){return{type:"else-clause",value:e}},bo=function(e){return{type:"number",value:e}},Co=function(e,a,o){return parseFloat(e+a+o)},xo=function(e,a){return parseFloat(e+a)},Do=function(e,a){return parseFloat(e+a)},Eo=function(e){return parseFloat(e)},Mo=function(e,a){return e[0]+a},Fo=function(e){return"."+(e??"")},Po=function(e,a){return e+a},Lo=function(e){return e.join("")},_o=function(e,a){return"e"+(a===null?"":a)},Ro=function(){return"IN"},qo=function(){return"IS"},Uo=function(){return"LIKE"},Vo=function(){return"ESCAPE"},Jo=function(){return"NOT"},Zo=function(){return"AND"},$o=function(){return"OR"},zo=function(){return"BETWEEN"},ko=function(){return"FROM"},Ho=function(){return"FOR"},Yo=function(){return"SUBSTRING"},jo=function(){return"EXTRACT"},Bo=function(){return"TRIM"},Go=function(){return"POSITION"},Qo=function(){return"TIMESTAMP"},Wo=function(){return"DATE"},Ko=function(){return"TIME"},Xo=function(){return"LEADING"},es=function(){return"TRAILING"},ts=function(){return"BOTH"},ns=function(){return"CAST"},rs=function(){return"AS"},as=function(){return"INTEGER"},is=function(){return"SMALLINT"},os=function(){return"FLOAT"},ss=function(){return"REAL"},us=function(){return"VARCHAR"},ls=function(){return"TO"},cs=function(){return"INTERVAL"},fs=function(){return"YEAR"},ds=function(){return"TIMEZONE_HOUR"},ms=function(){return"TIMEZONE_MINUTE"},ps=function(){return"MONTH"},vs=function(){return"DAY"},hs=function(){return"HOUR"},Is=function(){return"MINUTE"},ws=function(){return"SECOND"},gs=function(){return"CASE"},Ts=function(){return"END"},ys=function(){return"WHEN"},Ss=function(){return"THEN"},Os=function(){return"ELSE"},Ns=function(e){return e},As=function(e){return e.join("")},n=0,v=0,Ie=[{line:1,column:1}],K=0,Je=[],f=0;if("startRule"in I){if(!(I.startRule in N))throw new Error(`Can't start parsing from rule "`+I.startRule+'".');R=N[I.startRule]}function Ze(e,a){throw Cs(e,a=a!==void 0?a:$e(v,n))}function T(e,a){return{type:"literal",text:e,ignoreCase:a}}function X(e,a,o){return{type:"class",parts:e,inverted:a,ignoreCase:o}}function bs(){return{type:"end"}}function Ct(e){var a,o=Ie[e];if(o)return o;for(a=e-1;!Ie[a];)a--;for(o={line:(o=Ie[a]).line,column:o.column};a<e;)l.charCodeAt(a)===10?(o.line++,o.column=1):o.column++,a++;return Ie[e]=o,o}function $e(e,a,o){var u=Ct(e),g=Ct(a);return{source:S,start:{offset:e,line:u.line,column:u.column},end:{offset:a,line:g.line,column:g.column}}}function w(e){n<K||(n>K&&(K=n,Je=[]),Je.push(e))}function Cs(e,a){return new r(e,null,null,a)}function xs(e,a,o){return new r(r.buildMessage(e,a),e,a,o)}function xt(){var e,a;return e=n,p(),(a=L())!==t?(p(),v=e,e=Xa(a)):(n=e,e=t),e}function Dt(){var e,a,o,u,g,O,A,P;if(e=n,(a=L())!==t){for(o=[],u=n,g=p(),(O=xe())!==t?(A=p(),(P=L())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(O=xe())!==t?(A=p(),(P=L())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);v=e,e=ei(a,o)}else n=e,e=t;return e}function L(){var e,a,o,u,g,O,A,P;if(e=n,(a=ze())!==t){for(o=[],u=n,g=p(),(O=Ht())!==t?(A=p(),(P=ze())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(O=Ht())!==t?(A=p(),(P=ze())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);v=e,e=ti(a,o)}else n=e,e=t;return e}function ze(){var e,a,o,u,g,O,A,P;if(e=n,(a=we())!==t){for(o=[],u=n,g=p(),(O=Ae())!==t?(A=p(),(P=we())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(O=Ae())!==t?(A=p(),(P=we())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);v=e,e=ni(a,o)}else n=e,e=t;return e}function we(){var e,a,o,u,g;return e=n,(a=ce())===t&&(a=n,l.charCodeAt(n)===33?(o=H,n++):(o=t,f===0&&w(Vr)),o!==t?(u=n,f++,l.charCodeAt(n)===61?(g=Y,n++):(g=t,f===0&&w(gt)),f--,g===t?u=void 0:(n=u,u=t),u!==t?a=o=[o,u]:(n=a,a=t)):(n=a,a=t)),a!==t?(o=p(),(u=we())!==t?(v=e,e=ri(u)):(n=e,e=t)):(n=e,e=t),e===t&&(e=Ds()),e}function Ds(){var e,a,o;return e=n,(a=ee())!==t?(p(),(o=Es())===t&&(o=null),v=e,e=ai(a,o)):(n=e,e=t),e}function Es(){var e;return(e=Ms())===t&&(e=_s())===t&&(e=Ps())===t&&(e=Fs())===t&&(e=Ls()),e}function Ms(){var e,a,o,u,g,O,A;if(e=n,a=[],o=n,u=p(),(g=Et())!==t?(O=p(),(A=ee())!==t?o=u=[u,g,O,A]:(n=o,o=t)):(n=o,o=t),o!==t)for(;o!==t;)a.push(o),o=n,u=p(),(g=Et())!==t?(O=p(),(A=ee())!==t?o=u=[u,g,O,A]:(n=o,o=t)):(n=o,o=t);else a=t;return a!==t&&(v=e,a=ii(a)),e=a}function Et(){var e;return l.substr(n,2)===b?(e=b,n+=2):(e=t,f===0&&w(Jr)),e===t&&(l.charCodeAt(n)===62?(e=M,n++):(e=t,f===0&&w(Zr)),e===t&&(l.substr(n,2)===G?(e=G,n+=2):(e=t,f===0&&w($r)),e===t&&(l.substr(n,2)===q?(e=q,n+=2):(e=t,f===0&&w(zr)),e===t&&(l.charCodeAt(n)===60?(e=Pn,n++):(e=t,f===0&&w(kr)),e===t&&(l.charCodeAt(n)===61?(e=Y,n++):(e=t,f===0&&w(gt)),e===t&&(l.substr(n,2)===ft?(e=ft,n+=2):(e=t,f===0&&w(Hr)))))))),e}function Fs(){var e,a,o,u;return e=n,(a=zt())!==t?(p(),(o=ce())!==t?(p(),(u=ee())!==t?(v=e,e=oi(a,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=zt())!==t?(p(),(o=ee())!==t?(v=e,e=si(a,o)):(n=e,e=t)):(n=e,e=t)),e}function Ps(){var e,a,o,u,g,O;return e=n,(a=ce())!==t?(p(),(o=Yt())!==t?(p(),(u=ee())!==t?(p(),(g=Ae())!==t?(p(),(O=ee())!==t?(v=e,e=ui(o,u,O)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Yt())!==t?(p(),(o=ee())!==t?(p(),(u=Ae())!==t?(p(),(g=ee())!==t?(v=e,e=li(a,o,g)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Mt(){var e,a,o,u,g;return e=n,a=n,(o=ce())!==t?(u=p(),(g=kt())!==t?a=o=[o,u,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(v=e,a=ci(a)),(e=a)===t&&(e=kt()),e}function ke(){var e,a,o,u,g;return e=n,a=n,(o=ce())!==t?(u=p(),(g=Qe())!==t?a=o=[o,u,g]:(n=a,a=t)):(n=a,a=t),a!==t&&(v=e,a=fi(a)),(e=a)===t&&(e=Qe()),e}function Ls(){var e,a,o,u;return e=n,(a=Mt())!==t?(p(),(o=ne())!==t?(p(),hu()!==t?(p(),(u=Ge())!==t?(v=e,e=di(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=Mt())!==t?(p(),(o=ne())!==t?(v=e,e=mi(a,o)):(n=e,e=t)):(n=e,e=t)),e}function _s(){var e,a,o,u;return e=n,(a=ke())!==t?(p(),(o=U())!==t?(p(),(u=Dt())!==t?(p(),V()!==t?(v=e,e=pi(a,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ke())!==t?(p(),(o=U())!==t?(p(),(u=V())!==t?(v=e,e=vi(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ke())!==t?(p(),(o=Be())!==t?(v=e,e=hi(a,o)):(n=e,e=t)):(n=e,e=t))),e}function ee(){var e,a,o,u,g,O,A,P;if(e=n,(a=He())!==t){for(o=[],u=n,g=p(),(O=Ft())!==t?(A=p(),(P=He())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(O=Ft())!==t?(A=p(),(P=He())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);v=e,e=Ii(a,o)}else n=e,e=t;return e}function Ft(){var e;return l.charCodeAt(n)===43?(e=Re,n++):(e=t,f===0&&w(Ue)),e===t&&(l.charCodeAt(n)===45?(e=qe,n++):(e=t,f===0&&w(Ve)),e===t&&(l.substr(n,2)===dt?(e=dt,n+=2):(e=t,f===0&&w(Yr)))),e}function He(){var e,a,o,u,g,O,A,P;if(e=n,(a=Ye())!==t){for(o=[],u=n,g=p(),(O=Pt())!==t?(A=p(),(P=Ye())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);u!==t;)o.push(u),u=n,g=p(),(O=Pt())!==t?(A=p(),(P=Ye())!==t?u=g=[g,O,A,P]:(n=u,u=t)):(n=u,u=t);v=e,e=wi(a,o)}else n=e,e=t;return e}function Pt(){var e;return l.charCodeAt(n)===42?(e=Ln,n++):(e=t,f===0&&w(jr)),e===t&&(l.charCodeAt(n)===47?(e=_n,n++):(e=t,f===0&&w(Br))),e}function Ye(){var e,a;return(e=Ws())===t&&(e=zs())===t&&(e=ks())===t&&(e=js())===t&&(e=Bs())===t&&(e=Hs())===t&&(e=Gs())===t&&(e=su())===t&&(e=Rs())===t&&(e=Be())===t&&(e=n,U()!==t?(p(),(a=L())!==t?(p(),V()!==t?(v=e,e=gi(a)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Rs(){var e,a;return e=n,(a=qs())!==t&&(v=e,a=Ti(a)),(e=a)===t&&(e=n,(a=Vs())!==t&&(v=e,a=yi(a)),e=a),e}function qs(){var e,a;return e=n,(a=Us())!==t&&(v=e,a=Si(a)),e=a}function Us(){var e,a,o,u;if(e=n,(a=je())!==t){for(o=[],u=_t();u!==t;)o.push(u),u=_t();v=e,e=Oi(a,o)}else n=e,e=t;return e}function Lt(){var e,a,o,u;if(e=n,(a=je())!==t){for(o=[],u=y();u!==t;)o.push(u),u=y();v=e,e=Ni(a,o)}else n=e,e=t;return e}function je(){var e;return Fr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Gr)),e}function y(){var e;return Pr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Qr)),e}function _t(){var e;return ht.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Tt)),e}function Vs(){var e,a;return e=n,ge()!==t?(a=Js(),ge()!==t?(v=e,e=Ai(a)):(n=e,e=t)):(n=e,e=t),e}function Js(){var e,a,o;for(e=n,a=[],o=Rt();o!==t;)a.push(o),o=Rt();return v=e,e=a=bi(a)}function Rt(){var e;return(e=$s())===t&&(e=Zs()),e}function Zs(){var e;return e=n,ge()!==t&&ge()!==t?(v=e,e=Ci()):(n=e,e=t),e}function $s(){var e;return ht.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Tt)),e}function ge(){var e;return Lr.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Wr)),e}function Be(){var e,a,o,u;return e=n,a=n,l.charCodeAt(n)===64?(o=Rn,n++):(o=t,f===0&&w(Kr)),o!==t&&(u=Lt())!==t?a=o=[o,u]:(n=a,a=t),a!==t&&(v=e,a=xi(a)),e=a}function zs(){var e,a,o;return e=n,gu()!==t?(p(),U()!==t?(p(),(a=Qs())!==t?(p(),We()!==t?(p(),(o=L())!==t?(p(),V()!==t?(v=e,e=Di(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function ks(){var e,a,o,u,g,O,A;return e=n,wu()!==t?(p(),U()!==t?(p(),(a=L())!==t?(p(),We()!==t?(p(),(o=L())!==t?(p(),u=n,(g=Iu())!==t?(O=p(),(A=L())!==t?u=g=[g,O,A,p()]:(n=u,u=t)):(n=u,u=t),u===t&&(u=null),(g=V())!==t?(v=e,e=Ei(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Hs(){var e,a,o;return e=n,Nu()!==t?(p(),U()!==t?(p(),(a=L())!==t?(p(),Au()!==t?(p(),(o=Ys())!==t?(p(),V()!==t?(v=e,e=Mi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ys(){var e,a,o;return e=n,(a=bu())!==t&&(v=e,a=Fi()),(e=a)===t&&(e=n,(a=Cu())!==t&&(v=e,a=Pi()),(e=a)===t&&(e=n,(a=xu())!==t&&(v=e,a=Li()),(e=a)===t&&(e=n,(a=Du())!==t&&(v=e,a=_i()),(e=a)===t&&(e=n,(a=Gt())!==t&&(v=e,a=Ri()),(e=a)===t&&(e=n,(a=Bt())!==t&&(v=e,a=qi()),(e=a)===t&&(e=n,(a=Qt())!==t&&(v=e,a=Ui()),(e=a)===t&&(e=n,(a=Eu())!==t?(p(),U()!==t?(p(),(o=re())!==t?(p(),V()!==t?(v=e,e=Vi(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)))))))),e}function js(){var e,a,o,u;return e=n,jt()!==t?(p(),U()!==t?(p(),(a=qt())===t&&(a=null),p(),(o=L())!==t?(p(),We()!==t?(p(),(u=L())!==t?(p(),V()!==t?(v=e,e=Ji(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,jt()!==t?(p(),U()!==t?(p(),(a=qt())===t&&(a=null),p(),(o=L())!==t?(p(),V()!==t?(v=e,e=Zi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function qt(){var e;return(e=yu())===t&&(e=Su())===t&&(e=Ou()),e}function Bs(){var e,a,o;return e=n,Tu()!==t?(p(),U()!==t?(p(),(a=L())!==t?(p(),Qe()!==t?(p(),(o=L())!==t?(p(),V()!==t?(v=e,e=$i(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Gs(){var e,a,o;return e=n,(a=_u())!==t?(p(),U()!==t?(p(),(o=Dt())===t&&(o=null),p(),V()!==t?(v=e,e=zi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Qs(){var e;return(e=Kt())===t&&(e=Xt())===t&&(e=en())===t&&(e=tn())===t&&(e=nn())===t&&(e=ae())===t&&(e=Fu())===t&&(e=Pu()),e}function Ws(){var e;return(e=Ge())===t&&(e=cu())===t&&(e=ou())===t&&(e=iu())===t&&(e=au())===t&&(e=Ks())===t&&(e=eu())===t&&(e=Xs()),e}function Ks(){var e,a;return e=n,Bt()!==t?(p(),(a=ne())!==t?(v=e,e=ki(a)):(n=e,e=t)):(n=e,e=t),e}function Xs(){var e,a;return e=n,Qt()!==t?(p(),(a=ne())!==t?(v=e,e=Hi(a)):(n=e,e=t)):(n=e,e=t),e}function eu(){var e,a,o,u;return e=n,Wt()!==t?(p(),l.charCodeAt(n)===45?(a=qe,n++):(a=t,f===0&&w(Ve)),a===t&&(l.charCodeAt(n)===43?(a=Re,n++):(a=t,f===0&&w(Ue))),a!==t?(p(),(o=ne())!==t?(p(),(u=Ut())!==t?(v=e,e=Yi(a,o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,Wt()!==t?(p(),(a=ne())!==t?(p(),(o=Ut())!==t?(v=e,e=ji(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ut(){var e,a,o;return e=n,(a=tu())!==t?(p(),Mu()!==t?(p(),(o=nu())!==t?(v=e,e=Bi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=ru()),e}function tu(){var e,a,o;return e=n,(a=le())!==t?(p(),U()!==t?(p(),(o=ye())!==t?(p(),V()!==t?(v=e,e=Gi(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=le())!==t&&(v=e,a=Qi(a)),e=a),e}function nu(){var e,a,o,u;return e=n,(a=le())!==t&&(v=e,a=Wi(a)),(e=a)===t&&(e=n,(a=ae())!==t?(p(),U()!==t?(p(),(o=ye())!==t?(p(),xe()!==t?(p(),(u=Te())!==t?(p(),V()!==t?(v=e,e=Ki(o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t?(p(),U()!==t?(p(),(o=ye())!==t?(p(),V()!==t?(v=e,e=Xi(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t&&(v=e,a=eo()),e=a))),e}function ru(){var e,a,o,u;return e=n,(a=le())!==t?(p(),U()!==t?(p(),(o=Te())!==t?(p(),V()!==t?(v=e,e=to(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=le())!==t&&(v=e,a=no(a)),(e=a)===t&&(e=n,(a=ae())!==t?(p(),U()!==t?(p(),(o=ye())!==t?(p(),xe()!==t?(p(),(u=Te())!==t?(p(),V()!==t?(v=e,e=ro(o,u)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t?(p(),U()!==t?(p(),(o=Te())!==t?(p(),V()!==t?(v=e,e=ao(o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(a=ae())!==t&&(v=e,a=io()),e=a)))),e}function le(){var e,a;return e=n,(a=en())!==t&&(v=e,a=oo()),(e=a)===t&&(e=n,(a=tn())!==t&&(v=e,a=so()),(e=a)===t&&(e=n,(a=nn())!==t&&(v=e,a=uo()),(e=a)===t&&(e=n,(a=Xt())!==t&&(v=e,a=lo()),(e=a)===t&&(e=n,(a=Kt())!==t&&(v=e,a=co()),e=a)))),e}function Te(){var e,a;return e=n,(a=re())!==t&&(v=e,a=fo(a)),e=a}function ye(){var e,a;return e=n,(a=re())!==t&&(v=e,a=mo(a)),e=a}function au(){var e,a;return e=n,Gt()!==t?(p(),(a=ne())!==t?(v=e,e=po(a)):(n=e,e=t)):(n=e,e=t),e}function iu(){var e,a;return e=n,(a=mu())!==t&&(v=e,a=vo()),e=a}function ou(){var e,a;return e=n,(a=pu())!==t&&(v=e,a=ho()),(e=a)===t&&(e=n,(a=vu())!==t&&(v=e,a=Io()),e=a),e}function ne(){var e;return(e=Ge())===t&&(e=Be()),e}function Ge(){var e,a,o,u,g;if(e=n,l.charCodeAt(n)===39?(a=mt,n++):(a=t,f===0&&w(yt)),a===t&&(l.substr(n,2)===pt?(a=pt,n+=2):(a=t,f===0&&w(Xr))),a!==t){for(o=[],u=n,l.substr(n,2)===he?(g=he,n+=2):(g=t,f===0&&w(St)),g!==t&&(v=u,g=bt()),(u=g)===t&&(It.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(Ot)));u!==t;)o.push(u),u=n,l.substr(n,2)===he?(g=he,n+=2):(g=t,f===0&&w(St)),g!==t&&(v=u,g=bt()),(u=g)===t&&(It.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(Ot)));l.charCodeAt(n)===39?(u=mt,n++):(u=t,f===0&&w(yt)),u!==t?(v=e,e=wo(o)):(n=e,e=t)}else n=e,e=t;return e}function su(){var e;return(e=uu())===t&&(e=lu()),e}function uu(){var e,a,o,u,g;if(e=n,be()!==t)if(p(),(a=L())!==t){for(p(),o=[],u=Oe();u!==t;)o.push(u),u=Oe();u=p(),(g=Ce())!==t?(v=e,e=go(a,o)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,be()!==t)if(p(),(a=L())!==t){for(p(),o=[],u=Oe();u!==t;)o.push(u),u=Oe();u=p(),(g=Vt())!==t?(p(),Ce()!==t?(v=e,e=To(a,o,g)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function lu(){var e,a,o,u;if(e=n,be()!==t){for(p(),a=[],o=Se();o!==t;)a.push(o),o=Se();o=p(),(u=Ce())!==t?(v=e,e=yo(a)):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,be()!==t){for(p(),a=[],o=Se();o!==t;)a.push(o),o=Se();o=p(),(u=Vt())!==t?(p(),Ce()!==t?(v=e,e=So(a,u)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Se(){var e,a,o;return e=n,rn()!==t?(p(),(a=L())!==t?(p(),an()!==t?(p(),(o=L())!==t?(v=e,e=Oo(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Oe(){var e,a,o;return e=n,rn()!==t?(p(),(a=L())!==t?(p(),an()!==t?(p(),(o=L())!==t?(v=e,e=No(a,o)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Vt(){var e,a;return e=n,Lu()!==t?(p(),(a=L())!==t?(v=e,e=Ao(a)):(n=e,e=t)):(n=e,e=t),e}function cu(){var e,a,o,u;return e=n,(a=fu())!==t?(o=n,f++,u=je(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=bo(a)):(n=e,e=t)):(n=e,e=t),e}function fu(){var e,a,o,u;return e=n,(a=Ne())!==t&&(o=Jt())!==t&&(u=Zt())!==t?(v=e,e=Co(a,o,u)):(n=e,e=t),e===t&&(e=n,(a=Ne())!==t&&(o=Jt())!==t?(v=e,e=xo(a,o)):(n=e,e=t),e===t&&(e=n,(a=Ne())!==t&&(o=Zt())!==t?(v=e,e=Do(a,o)):(n=e,e=t),e===t&&(e=n,(a=Ne())!==t&&(v=e,a=Eo(a)),e=a))),e}function Ne(){var e,a,o;return(e=re())===t&&(e=n,l.charCodeAt(n)===45?(a=qe,n++):(a=t,f===0&&w(Ve)),a===t&&(l.charCodeAt(n)===43?(a=Re,n++):(a=t,f===0&&w(Ue))),a!==t&&(o=re())!==t?(v=e,e=Mo(a,o)):(n=e,e=t)),e}function Jt(){var e,a,o;return e=n,l.charCodeAt(n)===46?(a=qn,n++):(a=t,f===0&&w(ea)),a!==t?((o=re())===t&&(o=null),v=e,e=Fo(o)):(n=e,e=t),e}function Zt(){var e,a,o;return e=n,(a=du())!==t&&(o=re())!==t?(v=e,e=Po(a,o)):(n=e,e=t),e}function re(){var e,a,o;if(e=n,a=[],(o=$t())!==t)for(;o!==t;)a.push(o),o=$t();else a=t;return a!==t&&(v=e,a=Lo(a)),e=a}function $t(){var e;return _r.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(ta)),e}function du(){var e,a,o;return e=n,Rr.test(l.charAt(n))?(a=l.charAt(n),n++):(a=t,f===0&&w(na)),a!==t?(qr.test(l.charAt(n))?(o=l.charAt(n),n++):(o=t,f===0&&w(ra)),o===t&&(o=null),v=e,e=_o(a,o)):(n=e,e=t),e}function mu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Un?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(aa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function pu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Vn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ia)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function vu(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===Jn?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(oa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?e=a=[a,o]:(n=e,e=t)):(n=e,e=t),e}function Qe(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===Zn?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(sa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ro()):(n=e,e=t)):(n=e,e=t),e}function zt(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===$n?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(ua)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=qo()):(n=e,e=t)):(n=e,e=t),e}function kt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===zn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(la)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Uo()):(n=e,e=t)):(n=e,e=t),e}function hu(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===kn?(a=l.substr(n,6),n+=6):(a=t,f===0&&w(ca)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Vo()):(n=e,e=t)):(n=e,e=t),e}function ce(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Hn?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(fa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Jo()):(n=e,e=t)):(n=e,e=t),e}function Ae(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Yn?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(da)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Zo()):(n=e,e=t)):(n=e,e=t),e}function Ht(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===jn?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(ma)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=$o()):(n=e,e=t)):(n=e,e=t),e}function Yt(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===Bn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(pa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=zo()):(n=e,e=t)):(n=e,e=t),e}function We(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Gn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(va)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ko()):(n=e,e=t)):(n=e,e=t),e}function Iu(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Qn?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(ha)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ho()):(n=e,e=t)):(n=e,e=t),e}function wu(){var e,a,o,u;return e=n,l.substr(n,9).toLowerCase()===Wn?(a=l.substr(n,9),n+=9):(a=t,f===0&&w(Ia)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Yo()):(n=e,e=t)):(n=e,e=t),e}function gu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===Kn?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(wa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=jo()):(n=e,e=t)):(n=e,e=t),e}function jt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Xn?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ga)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Bo()):(n=e,e=t)):(n=e,e=t),e}function Tu(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===er?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(Ta)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Go()):(n=e,e=t)):(n=e,e=t),e}function Bt(){var e,a,o,u;return e=n,l.substr(n,9).toLowerCase()===tr?(a=l.substr(n,9),n+=9):(a=t,f===0&&w(ya)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Qo()):(n=e,e=t)):(n=e,e=t),e}function Gt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===nr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Sa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Wo()):(n=e,e=t)):(n=e,e=t),e}function Qt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===rr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Oa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ko()):(n=e,e=t)):(n=e,e=t),e}function yu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===ar?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(Na)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Xo()):(n=e,e=t)):(n=e,e=t),e}function Su(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===ir?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(Aa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=es()):(n=e,e=t)):(n=e,e=t),e}function Ou(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===or?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ba)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ts()):(n=e,e=t)):(n=e,e=t),e}function Nu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===sr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Ca)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ns()):(n=e,e=t)):(n=e,e=t),e}function Au(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===ur?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(xa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=rs()):(n=e,e=t)):(n=e,e=t),e}function bu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===lr?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(Da)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=as()):(n=e,e=t)):(n=e,e=t),e}function Cu(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===cr?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(Ea)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=is()):(n=e,e=t)):(n=e,e=t),e}function xu(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===fr?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(Ma)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=os()):(n=e,e=t)):(n=e,e=t),e}function Du(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===dr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Fa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ss()):(n=e,e=t)):(n=e,e=t),e}function Eu(){var e,a,o,u;return e=n,l.substr(n,7).toLowerCase()===mr?(a=l.substr(n,7),n+=7):(a=t,f===0&&w(Pa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=us()):(n=e,e=t)):(n=e,e=t),e}function Mu(){var e,a,o,u;return e=n,l.substr(n,2).toLowerCase()===pr?(a=l.substr(n,2),n+=2):(a=t,f===0&&w(La)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ls()):(n=e,e=t)):(n=e,e=t),e}function Wt(){var e,a,o,u;return e=n,l.substr(n,8).toLowerCase()===vr?(a=l.substr(n,8),n+=8):(a=t,f===0&&w(_a)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=cs()):(n=e,e=t)):(n=e,e=t),e}function Kt(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===hr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Ra)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=fs()):(n=e,e=t)):(n=e,e=t),e}function Fu(){var e,a,o,u;return e=n,l.substr(n,13).toLowerCase()===Ir?(a=l.substr(n,13),n+=13):(a=t,f===0&&w(qa)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ds()):(n=e,e=t)):(n=e,e=t),e}function Pu(){var e,a,o,u;return e=n,l.substr(n,15).toLowerCase()===wr?(a=l.substr(n,15),n+=15):(a=t,f===0&&w(Ua)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ms()):(n=e,e=t)):(n=e,e=t),e}function Xt(){var e,a,o,u;return e=n,l.substr(n,5).toLowerCase()===gr?(a=l.substr(n,5),n+=5):(a=t,f===0&&w(Va)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ps()):(n=e,e=t)):(n=e,e=t),e}function en(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Tr?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(Ja)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=vs()):(n=e,e=t)):(n=e,e=t),e}function tn(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===yr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Za)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=hs()):(n=e,e=t)):(n=e,e=t),e}function nn(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===Sr?(a=l.substr(n,6),n+=6):(a=t,f===0&&w($a)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Is()):(n=e,e=t)):(n=e,e=t),e}function ae(){var e,a,o,u;return e=n,l.substr(n,6).toLowerCase()===Or?(a=l.substr(n,6),n+=6):(a=t,f===0&&w(za)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ws()):(n=e,e=t)):(n=e,e=t),e}function be(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Nr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ka)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=gs()):(n=e,e=t)):(n=e,e=t),e}function Ce(){var e,a,o,u;return e=n,l.substr(n,3).toLowerCase()===Ar?(a=l.substr(n,3),n+=3):(a=t,f===0&&w(Ha)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ts()):(n=e,e=t)):(n=e,e=t),e}function rn(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===br?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Ya)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=ys()):(n=e,e=t)):(n=e,e=t),e}function an(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===Cr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(ja)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Ss()):(n=e,e=t)):(n=e,e=t),e}function Lu(){var e,a,o,u;return e=n,l.substr(n,4).toLowerCase()===xr?(a=l.substr(n,4),n+=4):(a=t,f===0&&w(Ba)),a!==t?(o=n,f++,u=y(),f--,u===t?o=void 0:(n=o,o=t),o!==t?(v=e,e=Os()):(n=e,e=t)):(n=e,e=t),e}function xe(){var e;return l.charCodeAt(n)===44?(e=Dr,n++):(e=t,f===0&&w(Ga)),e}function U(){var e;return l.charCodeAt(n)===40?(e=Er,n++):(e=t,f===0&&w(Qa)),e}function V(){var e;return l.charCodeAt(n)===41?(e=Mr,n++):(e=t,f===0&&w(Wa)),e}function p(){var e,a;for(e=[],a=on();a!==t;)e.push(a),a=on();return e}function on(){var e;return Ur.test(l.charAt(n))?(e=l.charAt(n),n++):(e=t,f===0&&w(Ka)),e}function _u(){var e,a,o,u;if(e=n,(a=Lt())!==t&&(v=e,a=Ns(a)),(e=a)===t)if(e=n,l.charCodeAt(n)===96?(a=vt,n++):(a=t,f===0&&w(Nt)),a!==t){if(o=[],wt.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(At)),u!==t)for(;u!==t;)o.push(u),wt.test(l.charAt(n))?(u=l.charAt(n),n++):(u=t,f===0&&w(At));else o=t;o!==t?(l.charCodeAt(n)===96?(u=vt,n++):(u=t,f===0&&w(Nt)),u!==t?(v=e,e=As(o)):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ru(e,a){return{type:"unary-expression",operator:e,expr:a}}function sn(e,a,o,u){var g={type:"binary-expression",operator:e,left:a,right:o};return u!==void 0&&(g.escape=u),g}function qu(e,a){for(var o=[e],u=0;u<a.length;u++)o.push(a[u][3]);return o}function Uu(e,a,o){return qu(e,a)}function fe(e,a){for(var o=e,u=0;u<a.length;u++)o=sn(a[u][1],o,a[u][3]);return o}function Vu(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Ze("Timestamp literal is invalid")}function Ju(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&Ze("Time literal is invalid")}function Zu(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Ze("Date literal is invalid")}if((h=R())!==t&&n===l.length)return h;throw h!==t&&n<l.length&&w(bs()),xs(Je,K<l.length?l.charAt(K):null,K<l.length?$e(K,K+1):$e(K,K))}return i(r,Error),r.prototype.format=function(l){var I="Error: "+this.message;if(this.location){var h,t=null;for(h=0;h<l.length;h++)if(l[h].source===this.location.source){t=l[h].text.split(/\r\n|\n|\r/g);break}var S=this.location.start,N=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(S):S,R=this.location.source+":"+N.line+":"+N.column;if(t){var H=this.location.end,Y=s("",N.line.toString().length," "),b=t[S.line-1],M=(S.line===H.line?H.column:b.length+1)-S.column||1;I+=`
 --> `+R+`
`+Y+` |
`+N.line+" | "+b+`
`+Y+" | "+s("",S.column-1," ")+s("",M,"^")}else I+=`
 at `+R}return I},r.buildMessage=function(l,I){var h={literal:function(b){return'"'+S(b.text)+'"'},class:function(b){var M=b.parts.map(function(G){return Array.isArray(G)?N(G[0])+"-"+N(G[1]):N(G)});return"["+(b.inverted?"^":"")+M.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(b){return b.description}};function t(b){return b.charCodeAt(0).toString(16).toUpperCase()}function S(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(M){return"\\x0"+t(M)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(M){return"\\x"+t(M)})}function N(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(M){return"\\x0"+t(M)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(M){return"\\x"+t(M)})}function R(b){return h[b.type](b)}function H(b){var M,G,q=b.map(R);if(q.sort(),q.length>0){for(M=1,G=1;M<q.length;M++)q[M-1]!==q[M]&&(q[G]=q[M],G++);q.length=G}switch(q.length){case 1:return q[0];case 2:return q[0]+" or "+q[1];default:return q.slice(0,-1).join(", ")+", or "+q[q.length-1]}}function Y(b){return b?'"'+S(b)+'"':"end of input"}return"Expected "+H(l)+" but "+Y(I)+" found."},{SyntaxError:r,parse:c}},(Nn=bn).exports&&(Nn.exports=An());var uc=bn.exports,Le=class{static parse(r){return uc.parse(r)}};var lc=new Set(["current_timestamp","current_date","current_time"]),st=class{static makeBool(r){return Dn(r)}static featureValue(r,s,c,l){return Fn(r,s,c,l)}static equalsNull(r){return r===null}static applyLike(r,s,c){return ct(r,s,c)}static ensureArray(r){return ut(r)}static applyIn(r,s,c){return lt(r,s)}static currentDate(r){return J.fromNow(r)}static makeSqlInterval(r,s,c){return _.createFromValueAndQualifier(r,s,c)}static convertInterval(r){return r instanceof _?r.valueInMilliseconds():r}static currentTimestamp(r){return se(new Date,r)}static compare(r,s,c,l){return j(s,c,r)}static calculate(r,s,c,l){return it(r,s,c,l)}static evaluateTime(r){return de(r)}static evaluateTimestamp(r,s,c){return ue(r,s,c)}static evaluateDate(r,s){return nt(r,s)}static evaluateFunction(r,s,c){return pe(r,s,c)}static lookup(r,s){let c=s[r];return c===void 0?null:c}static between(r,s,c){return r==null||s[0]==null||s[1]==null?null:j(r,s[0],">=")&&j(r,s[1],"<=")}static notbetween(r,s,c){return r==null||s[0]==null||s[1]==null?null:j(r,s[0],"<")||j(r,s[1],">")}static ternaryNot(r){return _e(r)}static ternaryAnd(r,s){return En(r,s)}static ternaryOr(r,s){return Mn(r,s)}},Cn=class i{constructor(r,s,c="UTC"){this.fieldsIndex=s,this.timeZone=c,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Le.parse(r);let{isStandardized:l,isAggregate:I,referencedFieldNames:h}=this._extractExpressionInfo(s);this._referencedFieldNames=h,this.isStandardized=l,this.isAggregate=I}static convertValueToStorageFormat(r,s=null){if(s===null)return B(r)?r.getTime():C(r)?r.toMillis():D(r)?r.toStorageFormat():E(r)?r.toStorageString():x(r)?r.toStorageFormat():r;switch(s){case"date":return B(r)?r.getTime():C(r)?r.toMillis():D(r)?r.toMilliseconds():x(r)?r.toNumber():r;case"date-only":return B(r)?J.fromDateJS(r).toString():D(r)?J.fromSqlTimeStampOffset(r).toString():C(r)?J.fromDateTime(r).toString():r;case"time-only":return B(r)?k.fromDateJS(r).toStorageString():C(r)?k.fromDateTime(r).toStorageString():D(r)?k.fromSqlTimeStampOffset(r).toStorageString():E(r)?r.toStorageString():r;case"timestamp-offset":if(B(r))return Z.fromJSDate(r).toStorageFormat();if(C(r))return Z.fromDateTime(r).toStorageFormat();if(D(r))return r.toStorageFormat()}return r}static create(r,s,c="UTC"){return new i(r,s,c)}get fieldNames(){return this._referencedFieldNames}testSet(r,s=ve){return!!this._evaluateNode(this.parseTree,null,s,r)}calculateValue(r,s=ve){let c=this._evaluateNode(this.parseTree,r,s,null);return c instanceof _?c.valueInMilliseconds()/864e5:c}calculateValueCompiled(r,s=ve){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(r,this.parameters,s,this.fieldsIndex,this.timeZone):Ke("esri-csp-restrictions")?this.calculateValue(r,s):(this._compileMe(),this.parseTree._compiledVersion(r,this.parameters,s,this.fieldsIndex,this.timeZone))}testFeature(r,s=ve){return!!this._evaluateNode(this.parseTree,r,s,null)}testFeatureCompiled(r,s=ve){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(r,this.parameters,s,this.fieldsIndex,this.timeZone):Ke("esri-csp-restrictions")?this.testFeature(r,s):(this._compileMe(),!!this.parseTree._compiledVersion(r,this.parameters,s,this.fieldsIndex,this.timeZone))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,r=>{r.type==="current-time"?this._hasDateFunctions=!0:r.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||lc.has(r.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){let r=new Set;return this._visitAll(this.parseTree,s=>{s.type==="function"&&r.add(s.name.toLowerCase())}),Array.from(r)}getExpressions(){let r=new Map;return this._visitAll(this.parseTree,s=>{if(s.type==="function"){let c=s.name.toLowerCase(),l=s.args.value[0];if(l.type==="column-reference"){let I=l.column,h=`${c}-${I}`;r.has(h)||r.set(h,{aggregateType:c,field:I})}}}),[...r.values()]}getVariables(){let r=new Set;return this._visitAll(this.parseTree,s=>{s.type==="parameter"&&r.add(s.value.toLowerCase())}),Array.from(r)}_compileMe(){let r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",r).bind(st)}_extractExpressionInfo(r){let s=[],c=new Set,l=!0,I=!1;return this._visitAll(this.parseTree,h=>{switch(h.type){case"column-reference":{let t=r?.get(h.column),S,N;t?S=N=t.name??"":(N=h.column,S=N.toLowerCase()),c.has(S)||(c.add(S),s.push(N)),h.column=N;break}case"function":{let{name:t,args:S}=h,N=S.value.length;l&&(l=yn(t,N)),I===!1&&(I=et(t,N));break}}}),{referencedFieldNames:Array.from(s),isStandardized:l,isAggregate:I}}_visitAll(r,s){if(r!=null)switch(s(r),r.type){case"when-clause":this._visitAll(r.operand,s),this._visitAll(r.value,s);break;case"case-expression":for(let c of r.clauses)this._visitAll(c,s);r.format==="simple"&&this._visitAll(r.operand,s),r.else!==null&&this._visitAll(r.else,s);break;case"expression-list":for(let c of r.value)this._visitAll(c,s);break;case"unary-expression":this._visitAll(r.expr,s);break;case"binary-expression":this._visitAll(r.left,s),this._visitAll(r.right,s);break;case"function":this._visitAll(r.args,s)}}evaluateNodeToJavaScript(r){switch(r.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case"case-expression":{let s="";if(r.format==="simple"){let c=this.evaluateNodeToJavaScript(r.operand);s="( ";for(let l=0;l<r.clauses.length;l++)s+=" (this.compare('=',"+c+","+this.evaluateNodeToJavaScript(r.clauses[l].operand)+") ? ("+this.evaluateNodeToJavaScript(r.clauses[l].value)+") : ";r.else!==null?s+=this.evaluateNodeToJavaScript(r.else):s+="null",s+=" )"}else{s="( ";for(let c=0;c<r.clauses.length;c++)s+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[c].operand)+")===true ? ("+this.evaluateNodeToJavaScript(r.clauses[c].value)+") : ";r.else!==null?s+=this.evaluateNodeToJavaScript(r.else):s+="null",s+=" )"}return s}case"parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case"expression-list":{let s="[";for(let c of r.value)s!=="["&&(s+=","),s+=this.evaluateNodeToJavaScript(c);return s+="]",s}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case"binary-expression":switch(r.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"IS":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case"ISNOT":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+", timeZone)"}throw new m(d.UnsupportedOperator,{operator:r.operator});case"null":case"boolean":case"string":case"number":return JSON.stringify(r.value);case"time":return"this.evaluateTime("+JSON.stringify(r.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(r.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(r.value)+", 'unknown')";case"current-time":return r.mode==="date"?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+", timeZone)"}throw new m(d.UnsupportedSyntax,{node:r.type})}_evaluateNode(r,s,c,l){let I;switch(r.type){case"interval":{let h=this._evaluateNode(r.value,s,c,l);return _.createFromValueAndQualifier(h,r.qualifier,r.op)}case"case-expression":if(r.format==="simple"){let h=this._evaluateNode(r.operand,s,c,l);for(let t=0;t<r.clauses.length;t++)if(j(h,this._evaluateNode(r.clauses[t].operand,s,c,l),"=",this.timeZone))return this._evaluateNode(r.clauses[t].value,s,c,l);if(r.else!==null)return this._evaluateNode(r.else,s,c,l)}else{for(let h=0;h<r.clauses.length;h++)if(Dn(this._evaluateNode(r.clauses[h].operand,s,c,l)))return this._evaluateNode(r.clauses[h].value,s,c,l);if(r.else!==null)return this._evaluateNode(r.else,s,c,l)}return null;case"parameter":return I=this.parameters[r.value.toLowerCase()],B(I)?F.fromJSDate(I):I instanceof fn?I.toDateTime():I;case"expression-list":{let h=[];for(let t of r.value)h.push(this._evaluateNode(t,s,c,l));return h}case"unary-expression":return _e(this._evaluateNode(r.expr,s,c,l));case"binary-expression":switch(r.operator){case"AND":return En(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l));case"OR":return Mn(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l));case"IS":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(r.left,s,c,l)===null;case"ISNOT":if(r.right.type!=="null")throw new m(d.UnsupportedIsRhs);return this._evaluateNode(r.left,s,c,l)!==null;case"IN":{let h=ut(this._evaluateNode(r.right,s,c,l));return lt(this._evaluateNode(r.left,s,c,l),h,this.timeZone)}case"NOT IN":{let h=ut(this._evaluateNode(r.right,s,c,l));return _e(lt(this._evaluateNode(r.left,s,c,l),h,this.timeZone))}case"BETWEEN":{let h=this._evaluateNode(r.left,s,c,l),t=this._evaluateNode(r.right,s,c,l);return h==null||t[0]==null||t[1]==null?null:j(h,t[0],">=",this.timeZone)&&j(h,t[1],"<=",this.timeZone)}case"NOTBETWEEN":{let h=this._evaluateNode(r.left,s,c,l),t=this._evaluateNode(r.right,s,c,l);return h==null||t[0]==null||t[1]==null?null:j(h,t[0],"<",this.timeZone)||j(h,t[1],">",this.timeZone)}case"LIKE":return ct(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.escape);case"NOT LIKE":return _e(ct(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return j(this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),r.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return it(r.operator,this._evaluateNode(r.left,s,c,l),this._evaluateNode(r.right,s,c,l),this.timeZone)}case"null":case"boolean":case"string":case"number":return r.value;case"date":return r.parsedValue??=nt(r.value,"unknown"),r.parsedValue;case"timestamp":return r.parsedValue??=ue(r.value,"unknown"),r.parsedValue;case"time":return de(r.value);case"current-time":return r.mode==="date"?J.fromNow(this.timeZone):se(new Date,this.timeZone);case"column-reference":return Fn(s,r.column,this.fieldsIndex,c);case"data-type":return r.value;case"function":{if(this.isAggregate&&et(r.name,r.args.value.length)){let t=[];for(let S of r.args?.value||[]){let N=[];for(let R of l||[])N.push(this._evaluateNode(S,R,c,null));t.push(N)}return vn(r.name,t)}let h=this._evaluateNode(r.args,s,c,l);return pe(r.name,h,this.timeZone)}}throw new m(d.UnsupportedSyntax,{node:r.type})}};function Dn(i){return i===!0}function ut(i){return Array.isArray(i)?i:[i]}function _e(i){return i!==null?i!==!0:null}function En(i,r){return i!=null&&r!=null?i===!0&&r===!0:i!==!1&&r!==!1&&null}function Mn(i,r){return i!=null&&r!=null?i===!0||r===!0:i===!0||r===!0||null}function lt(i,r,s){if(i==null)return null;let c=!1;for(let l of r)if(l==null)c=null;else{if(i===l){c=!0;break}if(Fe(i)&&Fe(l)&&(c=j(i,l,"="),c))break}return c}var xn="-[]/{}()*+?.\\^$|",ie;function cc(i,r){let s=r,c="",l=ie.Normal;for(let I=0;I<i.length;I++){let h=i.charAt(I);switch(l){case ie.Normal:h===s?l=ie.Escaped:xn.includes(h)?c+="\\"+h:c+=h==="%"?".*":h==="_"?".":h;break;case ie.Escaped:xn.includes(h)?c+="\\"+h:c+=h,l=ie.Normal}}return new RegExp("^"+c+"$","m")}function ct(i,r,s){return i==null?null:cc(r,s).test(i)}function fc(i){return i&&typeof i.attributes=="object"}function Fn(i,r,s,c){let l=c.getAttribute(i,r),I=s?.get(r);return l==null||I?.type!=="esriFieldTypeDate"&&I?.type!=="date"?l==null||I?.type!=="esriFieldTypeDateOnly"&&I?.type!=="date-only"?l==null||I?.type!=="esriFieldTypeTimeOnly"&&I?.type!=="time-only"?l==null||I?.type!=="esriFieldTypeTimestampOffset"&&I?.type!=="timestamp-offset"?l:new Z(l):k.fromReader(l):J.fromReader(l):se(new Date(l),s?.getLuxonTimeZone(I.name)??cn.utcInstance)}(function(i){i[i.Normal=0]="Normal",i[i.Escaped=1]="Escaped"})(ie||(ie={}));var ve={getAttribute:(i,r)=>(fc(i)?i.attributes:i)[r]};export{d as a,m as b,Q as c,dn as d,Z as e,Cn as f,ve as g};
