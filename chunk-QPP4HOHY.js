import{e as H,o as W}from"./chunk-DDHMQRMR.js";import{b as q,c as U}from"./chunk-MP46524Y.js";import{a as G,d as S,e as L,f as R,g as P,k as F}from"./chunk-AC7AQWXQ.js";import{a as N}from"./chunk-IFCRPPYQ.js";import{b as O,g as h}from"./chunk-72VQRINQ.js";import{V as E,aa as C}from"./chunk-BRGZVJPZ.js";import{a as B}from"./chunk-TZHKPIVH.js";import{s as T}from"./chunk-BRWS572J.js";import{a as I}from"./chunk-AKNRR36C.js";var lt="http://www.w3.org/2000/svg",ht=0,ct=0,Y=I("android"),ft=I("chrome")||Y&&Y>=4?"auto":"optimizeLegibility",ut={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},dt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,u={},l={},gt=Math.PI,pt=1;function A(t,e){let i=t*(gt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function K(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function X(t,e,i,r,n){if(t){if(t.type==="circle")return h("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return h("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return h("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return h("image",{alt:n||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){let o=typeof t.path!="string"?K(t.path):t.path;return h("path",{d:o,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return B(r),h("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":ft,x:t.x,y:t.y},t.text)}return null}function tt(t){let e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){let i="patternId-"+ ++ht;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){let i="linearGradientId-"+ ++ct;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(r=>({offset:r.offset,color:r.color&&new N(r.color).toString()}))}}else if(t){let i=new N(t);e.fill=i.toString()}}return e}function et(t){let e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new N(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=H(t).join(",")||"none")),e}function it(t,e){let i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){let r=t.alignBaseline,n=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=n,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",B(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function yt(t){let{pattern:e,linearGradient:i}=t;if(e)return h("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},h("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){let r=i.stops.map((n,o)=>h("stop",{key:`${o}-stop`,offset:n.offset,"stop-color":n.color}));return h("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function mt(t,e){if(!t||t.length===0)return null;let i=[];for(let r of t){let{shape:n,fill:o,stroke:a,font:c}=r,s=tt(o),p=et(a),d=n.type==="text"?it(n,c):null,g=X(n,s.fill,p,d);g&&i.push(g)}return h("mask",{id:e,maskUnits:"userSpaceOnUse"},h("g",null,i))}function _(t,e,i){return P(t,G(t),[e,i])}function Q(t,e,i,r,n){return R(t,G(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-n*i+n,t}function xt(t,e,i,r){let n=e%360*Math.PI/180;L(t,G(t),n);let o=Math.cos(n),a=Math.sin(n),c=t[4],s=t[5];return t[4]=c*o-s*a+r*a-i*o+i,t[5]=s*o+c*a-i*a-r*o+r,t}function x(t,e){u&&"left"in u?(u.left!=null&&u.left>t&&(u.left=t),(u.right==null||u.right<t)&&(u.right=t),(u.top==null||u.top>e)&&(u.top=e),(u.bottom==null||u.bottom<e)&&(u.bottom=e)):u={left:t,bottom:e,right:t,top:e}}function Z(t){let e=t.args,i=e.length,r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)x(e[r],e[r+1]);l.x=e[i-2],l.y=e[i-1];break;case"H":for(r=0;r<i;++r)x(e[r],l.y);l.x=e[i-1];break;case"V":for(r=0;r<i;++r)x(l.x,e[r]);l.y=e[i-1];break;case"m":{let n=0;for(("x"in l)||(x(l.x=e[0],l.y=e[1]),n=2),r=n;r<i;r+=2)x(l.x+=e[r],l.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)x(l.x+=e[r],l.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)x(l.x+=e[r],l.y);break;case"v":for(r=0;r<i;++r)x(l.x,l.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)x(l.x+e[r],l.y+e[r+1]),x(l.x+e[r+2],l.y+e[r+3]),x(l.x+=e[r+4],l.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)x(l.x+e[r],l.y+e[r+1]),x(l.x+=e[r+2],l.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)x(e[r+5],e[r+6]);l.x=e[i-2],l.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)x(l.x+=e[r+5],l.y+=e[r+6])}}function J(t,e,i){let r=ut[t.toLowerCase()],n;typeof r=="number"&&(r?e.length>=r&&(n={action:t,args:e.slice(0,e.length-e.length%r)},i.push(n),Z(n)):(n={action:t,args:[]},i.push(n),Z(n)))}function wt(t){let e=(typeof t.path!="string"?K(t.path):t.path).match(dt),i=[];if(u={},l={},!e)return null;let r="",n=[],o=e.length;for(let c=0;c<o;++c){let s=e[c],p=parseFloat(s);isNaN(p)?(r&&J(r,n,i),n=[],r=s):n.push(p)}J(r,n,i);let a={x:0,y:0,width:0,height:0};return u&&"left"in u&&(a.x=u.left,a.y=u.top,a.width=u.right-u.left,a.height=u.bottom-u.top),a}function kt(t){let e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){let i=wt(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function bt(t){let e={x:0,y:0,width:0,height:0},i=null,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let o of t)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),r=Math.max(r,o.x+o.width),n=Math.max(n,o.y+o.height)):(i=e,i.x=o.x,i.y=o.y,r=o.x+o.width,n=o.y+o.height);return i&&(i.width=r-i.x,i.height=n-i.y),i}function Mt(t,e,i,r,n,o,a,c,s){let p=(a&&o?A(o,e):e)/2,d=(a&&o?A(o,i):i)/2;if(s){let w=s[0],m=s[1];p=(a&&o?A(o,w):w)/2,d=(a&&o?A(o,m):m)/2}let g=t.width+r,y=t.height+r,k=F(),f=F(),j=!1;if(n&&g!==0&&y!==0){let w=e!==i?e/i:g/y,m=e>i?e:i,b=1,$=1;isNaN(m)||(w>1?(b=m/g,$=m/w/y):($=m/y,b=m*w/g)),S(f,f,Q(k,b,$,p,d)),j=!0}let M=t.x+(g-r)/2,v=t.y+(y-r)/2;if(S(f,f,_(k,p-M,d-v)),!j&&(g>e||y>i)){let w=g/e>y/i,m=(w?e:i)/(w?g:y);S(f,f,Q(k,m,m,M,v))}return o&&S(f,f,xt(k,o,M,v)),c&&S(f,f,_(k,c[0],c[1])),`matrix(${f[0]},${f[1]},${f[2]},${f[3]},${f[4]},${f[5]})`}function vt(t,e,i){let r=t?.effects.find(p=>p.type==="bloom");if(!r)return null;let{strength:n,radius:o}=r,a=n>0?o:0,c=(n+a)*e,s=4*n+1;return h("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},h("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(n+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),h("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:c/25}),h("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:c/50}),h("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},h("feFuncR",{slope:s,type:"linear"}),h("feFuncG",{slope:s,type:"linear"}),h("feFuncB",{slope:s,type:"linear"})),h("feMerge",null,h("feMergeNode",{in:"intensityBlur"}),h("feMergeNode",{in:"intensityBrightness"}),h("feGaussianBlur",{stdDeviation:n/10})))}function rt(t,e,i,r={}){let n=[],o=[],a=++pt,c=vt(r.effectView,e,a),s=null;if(c){let d=r.effectView?.effects.find(f=>f.type==="bloom"),g=(d.strength?d.strength+d.radius/2:0)/3,y=e+e*g,k=i+i*g;s=[Math.max(y,10),Math.max(k,10)]}for(let d=0;d<t.length;d++){let g=t[d],y=[],k=[],f=0,j=0,M=0;for(let m of g){let{shape:b,fill:$,stroke:V,font:nt,offset:z}=m;r.ignoreStrokeWidth||b.type==="text"||(f+=V?.width||0);let D=tt($),at=et(V),st=b.type==="text"?it(b,nt):null;n.push(yt(D)),y.push(X(b,D.fill,at,st,r.ariaLabel)),k.push(kt(b)),z&&(j+=z[0],M+=z[1])}let v=Mt(bt(k),e,i,f,r.scale??!1,r.rotation,r.useRotationSize??!1,[j,M],s),w=null;if(r.masking){let m=`mask-${d}`,b=r.masking[d];n.push(mt(b,m)),w=`url(#${m})`}o.push(w?h("g",{mask:w},h("g",{transform:v},y)):h("g",{transform:v},y))}return r.useRotationSize&&r.rotation&&(e=A(r.rotation,e),i=A(r.rotation,i)),c&&(B(s),e=s[0],i=s[1]),h("svg",{"aria-label":r.ariaLabel,focusable:!1,height:i,role:"img",style:"display: block;",width:e,xmlns:lt},c,h("defs",null,n),c?h("g",{filter:`url(#bloom${a})`},o):o)}var ot=O();function St(t,e){ot.append(t,e),ot.detach(e)}function Yt(t,e,i){let r=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;let o=i?.node||document.createElement("div");return i.opacity!=null&&(o.style.opacity=i.opacity.toString()),i.effectView!=null&&(o.style.filter=W(i.effectView)),St(o,()=>rt(t,r,n,i)),o}function At(t,e){t=Math.ceil(t),e=Math.ceil(e);let i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";let r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function jt(t,e,i){return t?C(t,{responseType:"image"}).then(r=>{let n=r.data,o=n.width,a=n.height,c=o/a,s=e;if(i){let p=Math.max(o,a);s=Math.min(s,p)}return{image:n,width:c<=1?Math.ceil(s*c):s,height:c<=1?s:Math.ceil(s/c)}}):Promise.reject(new T("renderUtils: imageDataSize","href not provided."))}function $t(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function It(t,e,i,r,n){switch(n){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{let o=U({r:t[e],g:t[e+1],b:t[e+2]});o.h=r.h,o.s=r.s,o.v=o.v/100*r.v;let a=q(o);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function _t(t,e,i,r,n){return jt(t,e,n).then(o=>{let a=o.width??e,c=o.height??e;if(o.image&&$t(i,r)){let s=o.image.width,p=o.image.height;I("edge")&&/\.svg$/i.test(t)&&(s-=1,p-=1);let d=At(a,c);d.drawImage(o.image,0,0,s,p,0,0,a,c);let g=d.getImageData(0,0,a,c),y=[i.r/255,i.g/255,i.b/255,i.a],k=U(i);for(let f=0;f<g.data.length;f+=4)It(g.data,f,y,k,r);d.putImageData(g,0,0),t=d.canvas.toDataURL("image/png")}else{let s=E?.findCredential(t);if(s?.token){let p=t.includes("?")?"&":"?";t=`${t}${p}token=${s.token}`}}return{url:t,width:a,height:c}}).catch(()=>({url:t,width:e,height:e}))}export{X as a,tt as b,et as c,yt as d,kt as e,bt as f,Mt as g,rt as h,Yt as i,_t as j};
