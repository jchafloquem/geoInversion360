import{a as q}from"./chunk-JWHIBBJK.js";import{g as j}from"./chunk-SE7FIBEW.js";import{E as D,F as L}from"./chunk-B7IX6UFG.js";import{a as V}from"./chunk-IWJQ3PU6.js";function B(n){switch(n.type){case"CIMPointSymbol":{let t=n.symbolLayers;if(!t||t.length!==1)return null;let r=t[0];return r.type!=="CIMVectorMarker"?null:B(r)}case"CIMVectorMarker":{let t=n.markerGraphics;if(!t||t.length!==1)return null;let r=t[0];if(!r)return null;let o=r.geometry;if(!o)return null;let s=r.symbol;return!s||s.type!=="CIMPolygonSymbol"&&s.type!=="CIMLineSymbol"||s.symbolLayers?.some(e=>!!e.effects)?null:{type:"sdf",geom:o,asFill:s.type==="CIMPolygonSymbol"}}}}function R(n){return n?n.rings?n.rings:n.paths?n.paths:n.xmin!==void 0&&n.ymin!==void 0&&n.xmax!==void 0&&n.ymax!==void 0?[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]:null:null}function T(n){let t=1/0,r=-1/0,o=1/0,s=-1/0;for(let e of n)for(let l of e)l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<o&&(o=l[1]),l[1]>s&&(s=l[1]);return new j(t,o,r-t,s-o)}function z(n){let t=1/0,r=-1/0,o=1/0,s=-1/0;for(let e of n)for(let l of e)l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<o&&(o=l[1]),l[1]>s&&(s=l[1]);return[t,o,r,s]}function W(n){return n?n.rings?z(n.rings):n.paths?z(n.paths):V(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function X(n,t,r,o,s){let[e,l,i,u]=n;if(i<e||u<l)return[0,0,0,1];let f=i-e,a=u-l,m=L,c=D,x=Math.floor(.5*(.5*m-c)),y=(m-2*(x+c))/Math.max(f,a),p=Math.round(f*y)+2*x,b=Math.round(a*y)+2*x,S=1;t&&(S=b/y/(t.ymax-t.ymin));let h=0,g=0,d=1;o&&(s?t&&r&&t.ymax-t.ymin>0&&(d=(t.xmax-t.xmin)/(t.ymax-t.ymin),h=o.x/(r*d),g=o.y/r):(h=o.x,g=o.y)),t&&(h=.5*(t.xmax+t.xmin)+h*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin)),h-=e,g-=l,h*=y,g*=y,h+=x,g+=x;let M=h/p-.5,F=g/b-.5;return s&&r&&(M*=r*d,F*=r),[S,M,F,d]}function Y(n){let t=R(n.geom),r=T(t),o=L,s=D,e=Math.floor(.5*(.5*o-s)),l=(o-2*(e+s))/Math.max(r.width,r.height),i=Math.round(r.width*l)+2*e,u=Math.round(r.height*l)+2*e,f=[];for(let m of t)if(m&&m.length>1){let c=[];for(let x of m){let[y,p]=x;y-=r.x,p-=r.y,y*=l,p*=l,y+=e-.5,p+=e-.5,n.asFill?c.push([y,p]):c.push([Math.round(y),Math.round(p)])}if(n.asFill){let x=c.length-1;c[0][0]===c[x][0]&&c[0][1]===c[x][1]||c.push(c[0])}f.push(c)}let a=U(f,i,u,e);return n.asFill&&H(f,i,u,e,a),[J(a,e),i,u]}function U(n,t,r,o){let s=t*r,e=new Array(s),l=o*o+1;for(let i=0;i<s;++i)e[i]=l;for(let i of n){let u=i.length;for(let f=1;f<u;++f){let a=i[f-1],m=i[f],c,x,y,p;a[0]<m[0]?(c=a[0],x=m[0]):(c=m[0],x=a[0]),a[1]<m[1]?(y=a[1],p=m[1]):(y=m[1],p=a[1]);let b=Math.floor(c)-o,S=Math.floor(x)+o,h=Math.floor(y)-o,g=Math.floor(p)+o;b<0&&(b=0),S>t&&(S=t),h<0&&(h=0),g>r&&(g=r);let d=m[0]-a[0],M=m[1]-a[1],F=d*d+M*M;for(let k=b;k<S;k++)for(let v=h;v<g;v++){let P=k+.5,A=v+.5,I,w,C=(P-a[0])*d+(A-a[1])*M;C<0?(I=a[0],w=a[1]):C>F?(I=m[0],w=m[1]):(C/=F,I=a[0]+C*d,w=a[1]+C*M);let E=(P-I)*(P-I)+(A-w)*(A-w),G=(r-v-1)*t+k;E<e[G]&&(e[G]=E)}}}for(let i=0;i<s;++i)e[i]=Math.sqrt(e[i]);return e}function H(n,t,r,o,s){for(let e of n){let l=e.length;for(let i=1;i<l;++i){let u=e[i-1],f=e[i],a,m,c,x;u[0]<f[0]?(a=u[0],m=f[0]):(a=f[0],m=u[0]),u[1]<f[1]?(c=u[1],x=f[1]):(c=f[1],x=u[1]);let y=Math.floor(a),p=Math.floor(m)+1,b=Math.floor(c),S=Math.floor(x)+1;y<o&&(y=o),p>t-o&&(p=t-o),b<o&&(b=o),S>r-o&&(S=r-o);for(let h=b;h<S;++h){if(u[1]>h==f[1]>h)continue;let g=h+.5,d=(r-h-1)*t;for(let M=y;M<p;++M)M+.5<(f[0]-u[0])*(g-u[1])/(f[1]-u[1])+u[0]&&(s[d+M]=-s[d+M]);for(let M=o;M<y;++M)s[d+M]=-s[d+M]}}}}function J(n,t){let r=2*t,o=n.length,s=new Uint8Array(4*o);for(let e=0;e<o;++e){let l=.5-n[e]/r;q(l,s,4*e)}return s}export{B as a,W as b,X as c,Y as d};
