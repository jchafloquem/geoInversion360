import{a as i,e as f}from"./chunk-RG4RXSQS.js";import"./chunk-NNKLK2DS.js";import"./chunk-BRGZVJPZ.js";import"./chunk-Z5NXR7SL.js";import"./chunk-7JLWSSXP.js";import"./chunk-W3WDPWBE.js";import"./chunk-JKP4I6UL.js";import"./chunk-TZHKPIVH.js";import"./chunk-JPDAKIWT.js";import"./chunk-W6LY37E4.js";import"./chunk-BRWS572J.js";import"./chunk-AKNRR36C.js";import{g as p}from"./chunk-JEGVIFEP.js";var o,e;function g(r){return p(this,null,function*(){if(yield d(),r.inputs.length<1)return{result:{status:i.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]},transferList:[]};let n={ptrs:[],sizes:[]};for(let s of r.inputs){let c=e._malloc(s.byteLength);new Uint8Array(e.HEAPU8.buffer,c,s.byteLength).set(new Uint8Array(s)),n.ptrs.push(c),n.sizes.push(s.byteLength)}let t=e.process(r.jobDescJson,n,r.isMissingResourceCase),u=t.status===i.Succeeded&&t.data,l=t.status===i.MissingInputs&&t.missingInputUrls.length>0;if(u){let s=t.data.slice();t.data=s}else l&&(t.jobDescJson=t.jobDescJson.slice(0),t.originalInputs=r.inputs);for(let s=0;s<n.ptrs.length;++s)e._free(n.ptrs[s]);let a=[];if(u)a.push(t.data.buffer);else if(l)for(let s of r.inputs)a.push(s);return{result:t,transferList:a}})}function h(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function d(){return e?Promise.resolve():(o||(o=f().then(r=>{e=r,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{h as destroyWasm,d as initialize,g as process};
