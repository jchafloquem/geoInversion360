import{a as p,c as h}from"./chunk-7S6PD5JC.js";import{H as b,aa as m,s as u}from"./chunk-BRGZVJPZ.js";import{k as f}from"./chunk-JKP4I6UL.js";import{s as i}from"./chunk-BRWS572J.js";import{a as l}from"./chunk-AKNRR36C.js";import{a as y,g as d}from"./chunk-JEGVIFEP.js";var S=()=>!!l("enable-feature:force-wosr");var I=()=>l.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),j=()=>l.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0);var U=()=>l.add("enable-i3s-patching",!0,!0,!0),L=()=>l.add("enable-i3s-patching",!1,!0,!0),q=()=>!!l("enable-feature:SceneLayer-editing"),R=(e="i3s-patching")=>{switch(L(),j(),l.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":I();break;case"i3s-patching":U()}};R("i3s-patching");var c={};function E(e,a){return d(this,null,function*(){try{return{data:(yield F(e,a)).data,baseUrl:b(e),styleUrl:e}}catch(t){return f(t),null}})}function N(e,a,t){let r=a.portal!=null?a.portal:h.getDefault(),n,o=`${r.url} - ${r.user?.username} - ${e}`;return c[o]||(c[o]=C(e,r,t).then(s=>(n=s,s.fetchData())).then(s=>({data:s,baseUrl:n.itemUrl??"",styleName:e}))),c[o]}function C(e,a,t){return a.load(t).then(()=>{let r=new p({disableExtraQuery:!0,query:`owner:${g} AND type:${w} AND typekeywords:"${e}"`});return a.queryItems(r,t)}).then(({results:r})=>{let n=null,o=e.toLowerCase();if(r&&Array.isArray(r)){for(let s of r)if(s.typeKeywords?.some(D=>D.toLowerCase()===o)&&s.type===w&&s.owner===g){n=s;break}}if(!n)throw new i("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(t)})}function z(e,a,t){return e?.styleUrl!=null?E(e.styleUrl,t):e?.styleName!=null?N(e.styleName,a,t):Promise.reject(new i("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function B(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function J(e,a,t=["gltf"]){if(a==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!S())for(let r of t){let n=e.formatInfos.find(o=>o.type===r);if(n)return n.href}return encodeURI(e.webRef)}function F(e,a){let t=y({responseType:"json",query:{f:"json"}},a);return m(u(e),t)}var g="esri_en",w="Style",K="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{q as a,z as b,B as c,J as d,F as e,K as f};
